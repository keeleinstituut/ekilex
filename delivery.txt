Märkused ver 1.46.0 tarne kohta:

Tarne sisaldab vähesel määral andmeparandusi ja täiendusi andmemudelisse.
Lisandub täiesti uus sihtotstarbeline rakendus "wwexam" (eksamirakendus), mis sisaldab ainult Sõnaveebi ÕS vaate sarnast funktsionaalsust.

1) Võta githubist värske tarkvara versioon, mille viite arendaja annab

2) Ehita tarkvara tarkvaraprojekti juurikast.

   ../ekilex>mvn clean install -D skipTests

   Ekilex rakenduse pake asub

   ../ekilex/ekilex-app/target/ekilex-app.jar

   Sõnaveebi rakenduse pake asub

   ../ekilex/wordweb-app/target/wordweb-app.jar

   Eksamirakenduse pake asub

   ../ekilex/wwexam-app/target/wwexam-app.jar

3) Eksamirakenduse andmebaasi loomine ja sisustamine

   1. Loo rakendusele mõeldud andmebaasikasutaja nimega "wwexam". Kasuta eeskujuna sõnaveebi analoogseid määranguid andmebaasis
   2. Loo eksamirakenduse andmebaas nimega "wwexam" ning määra kasutaja "wwexam" andmebaasi "wwexam" omanikuks. Kasuta eeskujuna sõnaveebi analoogseid määranguid andmebaasis
   3. Lisa andmebaasile "wwexam" laiendus (extension) "fuzzystrmatch". Andmebaasi juurkasutajaga (postgres) saab seda teha käsuga:

      create extension fuzzystrmatch;

   4. Tõmba alla ja paki lahti eksamirakenduse andmebaasi täielik dump (wwexam.sql) siit:

      https://ekitest.tripledev.ee/wwexam.zip

   5. Lae andmebaasi dump andmebaasi. Andmebaasi juurkasutajaga (postgres) saab seda teha käsuga:

      psql -v -U postgres -d wwexam -f wwexam.sql

	  Märkus: laadimine kestab kümmekond minutit

4) Eksamirakenduse seadistamine

   1. Tarnele on lisatud eksamirakenduse toodangu keskkonna jaoks loodud Spring profiili määrangute faili põhi application-prod.properties
      Järgmised määrangud tuleb väärtustada keskkonna-spetsiifiliste väärtustega:

      tomcat.ajp.port=<mõni muudest rakendustest erinev vaba port>
      spring.datasource.password=<äsja loodud andmebaasikasutaja wwexam salasõna>
      logging.file.name=<täis rada koos logifaili nimega ilma faililaiendita>
      ekistat.service.url=<sama mis sõnaveebil>
      ekistat.service.key=<sama mis sõnaveebil>

      Märkus: vajadusel veenduda muude määrangute sobivuses

   2. Konfigureeri uue rakenduse wwexam systemctl teenus muude rakenduste eeskujul
   
   3. Paiguta muudetud määrangute fail teenuses määratud rakenduse pakke wwexam-app.jar kõrvale

5) Käivita ekilex andmebaasis muudatuste skript:

   ../ekilex/eki-common/src/main/resources/sql/delivery.sql

   Märkus: skript jookseb mõne sekundi.

6) Seadista ja käivita tekstides jutumärkide paranduse utiliit.
   Utiliitrakendus ise ja kogu järgnev tegevus on täpselt sama, mis eelmises tarnes punktis 6 kirjeldatud.

   1. Loo rakenduse "dev"-profiili määrangute fail:

      ../ekilex/ekilex-app/src/main/resources/application-dev.properties

   2. Sisusta fail ainult selles kontekstis oluliste rakenduse määrangutega:

      server.port=1234
      spring.datasource.url=jdbc:postgresql://localhost:5432/ekilex
      spring.datasource.username=<username>
      spring.datasource.password=<password>

      logging.level.root=warn
      logging.level.eki.ekilex=debug
      logging.level.eki.common=info
      logging.level.org.jooq=warn

      Andmebaasi ühenduse parameetrid peavad olema reaalsed selle keskkonna parameetrid.
      Kuna erinevad ekilexi rakendused käivitavad ka veebikonteksti siis on oluline, et nende veebi pordid ei konkureeriks.
      Seepärast määra "server.port"-le mingi ajutine fiktiivne väärtus

   3. Käivita rakendus ekilex/ekilex-app rajalt:

      mvn spring-boot:run -P qure -D spring-boot.run.profiles=dev

      Spring profiil "dev" tähendab automaatselt seda, et rakenduse logi jookseb otse terminali mitte logifaili.
      See on antud juhul kasulik kiireks tagasisideks rakenduselt.
	  Rakendus logib muudatuste statistikat, mis tarne paigalduse kontekstis pole oluline.
	  Rakendus jookseb u 10 sekundit.
      Logi lõppeb infoga "BUILD SUCCESS".
      Kui logi lõpetab kirjaga "BUILD FAIL", informeeri arendajat.

7) Sõnaveebi andmebaasi agregeerimine.

   1. Kustuta ja taasloo Ekilex andmebaasis senised põhi-Sõnaveebiga seotud vaated ja andmetüübid skriptiga:

      ../ekilex/eki-common/src/main/resources/sql/main_create_ww_views.sql

   2. Kustuta ja taasloo Sõnaveebi andmebaasis põhi-Sõnaveebi materjaliseeritud vaated ja andmetüübid ja lae andmed skriptiga:

      ../ekilex/wordweb-app/fileresources/sql/create_ww_mviews.sql

      NB! Muuda skriptis dblink parameetreid vastavalt keskkonnale!
      NB! Ühtegi veateadet ei tohi olla!

      Skript jookseb umbes pool tundi.

8) Seo rakenduste *.jar failid teenustega nagu seni ja käivita. Kontrolli peale käivitamist rakenduste logifailidest kas käivitamisega kaasnesid veateated, neid ei ohiks olla ühtegi.

<märkmete lõpp>
