Märkused ver 1.40.0 tarne kohta:

Seekord on tarne koosseisus ka uuem ekistat rakendus.
Kuna ekistat API liides on muutunud nii ekilexi kui sõnaveebi jaoks, siis tuleb kõigi rakenduste paigaldamine ja käivitamine ajastada sobivaks.

1) Võta githubist värske tarkvara versioon, mille viite arendaja annab

2) Muutunud või lisandunud on mõned sõnaveebi väliste teenuste liideste parameetrid. Rakenduse määrangute juurfailis application.properties on parameetrid juba korrektsed. Juhul kui järgnevad parameetrid on lisaks kirjeldatud ka vastava keskkonna profiili failis application-<env>.properties, siis need kustutada:

   speech.synthesizer.service.url
   corpus.service.rus.url

3) Ehita tarkvara tarkvaraprojekti juurikast.

   ../ekilex>mvn clean install -D skipTests

   Ekilex rakenduse pake asub

   ../ekilex/ekilex-app/target/ekilex-app.jar

   Ekistat rakenduse pake asub

   ../ekilex/ekistat-app/target/ekistat-app.jar

   Sõnaveebi rakenduse pake asub

   ../ekilex/wordweb-app/target/wordweb-app.jar

4) Käivita ekilex andmebaasis muudatuste skript:

   ../ekilex/eki-common/src/main/resources/sql/delivery.sql

5) Käivita ekistat andmebaasis muudatuste skript:

   ../ekilex/ekistat-app/src/main/resources/sql/delivery.sql

6) Kohanimede seletuste laadimine utiliitrakendusega.

   1. loo rakenduse "dev"-profiili määrangute fail:

      ../ekilex/ekilex-app/src/main/resources/application-dev.properties

   2. sisusta fail ainult selles kontekstis oluliste rakenduse määrangutega:

      server.port=1234
      spring.datasource.url=jdbc:postgresql://localhost:5432/ekilex
      spring.datasource.username=<username>
      spring.datasource.password=<password>
      
      logging.level.root=warn
      logging.level.eki.ekilex=debug
      logging.level.eki.common=info
      logging.level.org.jooq=warn
      
      Andmebaasi ühenduse parameetrid peavad olema reaalsed selle keskkonna parameetrid.
      Kuna erinevad ekilexi rakendused käivitavad ka veebikonteksti siis on oluline, et nende veebi pordid ei konkureeriks.
      Seepärast määra "server.port"-le mingi ajutine fiktiivne väärtus

   3. kopeeri kohanimede seletuste fail "kohanimed.tsv" kohalikku failisüsteemi utiliitrakendusele juurdepääsetavasse kohta

   4. käivita rakendus:

      mvn spring-boot:run -P defl -D spring-boot.run.profiles=dev -D spring-boot.run.arguments="impfile="/path/to/kohanimed.tsv""
      
      NB! Väärtusta parameeter "impfile" korrektse viitega failile!
      NB! Märka topelt jutumärke!
      NB! Rakendus annab logisse kokkuvõtva statistika rea:
          "Out of 2605 lines, def create count: 1451, def exist count: 1154, missing meaning count: 0"
          Kui "missing meaning count: 0" on erinev number 0-st, palun teavitada arendajat

      Spring profiil "dev" tähendab automaatselt seda, et rakenduse logi jookseb otse terminali mitte logifaili.
      See on antud juhul kasulik kiireks tagassideks rakenduselt.
      Rakendus jookseb läbi sekunditega.
      Logi lõppeb infoga "BUILD SUCCESS".
      Kui logi sisaldab midagi muud, informeeri arendajat.

7) Sõnaveebi andmebaasi agregeerimine.

   1. kustuta ja taasloo Ekilex andmebaasis senised Sõnaveebiga seotud vaated ja andmetüübid skriptiga:

      ../ekilex/eki-common/src/main/resources/sql/create_views.sql

   2. kustuta ja loo Sõnaveebi andmebaasis materjaliseeritud vaated ja andmetüübid skriptiga:

      ../ekilex/wordweb-app/fileresources/sql/create_mviews.sql

      NB! Muuda skriptis dblink parameetreid vastavalt keskkonnale!
      NB! Ühtegi veateadet ei tohi olla!

      Skript jookseb umbes pool tundi.

8) Seo rakenduste *.jar failid teenustega nagu seni ja käivita. Kontrolli peale käivitamist rakenduste logifailidest kas käivitamisega kaasnesid veateated, neid ei ohiks olla ühtegi.

<märkmete lõpp>
