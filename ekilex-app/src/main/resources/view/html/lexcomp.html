<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head></head>
<body>
  <div class="card-body p-0 d-flex flex-column h-100" th:fragment="search_result">
    <input type="hidden" id="selectedMeaningId" th:value="${selectedMeaningId}">
    <input type="hidden" id="pageNum" th:value="${wordsResult.currentPage}">
    <div class="bg-light rounded-top px-2 py-1">
      <div class="d-flex flex-row">
        <span th:text="#{lex.results.found}">Kokku leiti:</span>
        <span th:text="${wordsResult.totalCount}"></span>
        <div class="d-flex ml-auto mr-2">
          <form th:action="@{/lex_paging}" method="post">
            <input type="hidden" name="searchUri" th:value="${searchUri}">
            <input type="hidden" name="pageNum" th:value="${wordsResult.currentPage}">
            <input type="hidden" name="direction" value="page">
            <input type="hidden" name="offset" value="0">
            <button type="button" data-plugin="refreshSearchResults" class="btn btn-sm btn-secondary" data-toggle="tooltip" th:title="#{common.refresh.search}">
              <i class="fa fa-refresh" aria-hidden="true"></i>
            </button>
          </form>
        </div>
      </div>
    </div>
    <th:block th:replace=" :: search_result_rows"></th:block>
  </div>
  <th:block th:fragment="search_result_rows">
    <div class="overflow-auto h-100">
      <ul id="results" class="mb-0 pb-3 list-group">
        <th:block th:each="word : ${wordsResult.words}">
          <li th:id="${'word-result-' + word.wordId}" class="list-group-item search-result-item border-left-0 border-right-0 rounded-0 p-0">
            <button
              type="button"
              data-plugin="contextmenu, loadDetailsPlugin"
              data-contextmenu:compare="Ava uues paneelis"
              class="search-result-btn btn btn-block p-2 text-left position-relative rounded-0"
              th:data-id="${word.wordId}"
              name="details-btn">
              <span class="d-flex align-items-center">
                <span class="badge badge-light mr-2" th:text="${word.homonymNr}" th:if="${word.homonymNr > 0}"></span>
                <span th:utext="${@viewUtil.getWordValueMarkup(word)}">vorm 1</span>
                <span th:text="${'(' + @viewUtil.getLangIso2(word.lang) + ')'}" class="ml-1"></span>
              </span>
              <small class="d-flex">
                <span th:text="${#strings.listJoin(word.datasetCodes, ', ')}"></span>
              </small>
              <small class="d-flex" th:if="${!word.wordPublic}">
                <span>Mitteavalik keelend</span>
              </small>
              <span class="d-flex align-items-start">
                <small th:if="${not #lists.isEmpty(word.lexemesValueStateLabels)}">
                  <span th:text="${#strings.listJoin(word.lexemesValueStateLabels, ', ')}"></span>
                </small>
                <small th:if="${word.lexemesArePublic != null}">
                  <span class="ml-1" th:if="${not #lists.isEmpty(word.lexemesValueStateLabels)}">|</span>
                  <span th:text="#{'boolean.public.' + ${word.lexemesArePublic}}">avalik/mitteavalik</span>
                </small>
                <span class="badge badge-pill badge-light ml-auto" th:if="${not #lists.isEmpty(word.lexemesTagNames)}">
                  <span th:text="${#strings.listJoin(word.lexemesTagNames, ', ')}"></span>
                </span>
              </span>
              <span class="position-absolute search-result-status">
                <span th:id="${'select_wait_' + word.wordId}" class="fa fa-refresh fa-spin" style="display: none"></span>
              </span>
            </button>
          </li>
        </th:block>
      </ul>
    </div>
    <div th:if="${wordsResult.showPaging}">
      <div th:replace="components :: paging(${wordsResult})"></div>
    </div>
  </th:block>
  <div class="row" th:fragment="lexeme_tags">
    <div class="col pr-0 col-w13rem">
      <span class="lbl" th:text="#{lex.lexeme.tag}">Ilmiku silt</span>
      <button type="button" class="btn badge badge-success float-right mr-4"
              th:title="#{common.add.new}"
              data-toggle="modal"
              th:data-target="${'#addLexemeTagDlg_' + lexeme.lexemeId}"
              sec:authorize="#vars.lexeme.crudGrant">
        <i class="fa fa-plus" aria-hidden="true"></i>
      </button>
    </div>
    <div class="col pl-0">
      <span th:each="tag,tagIter : ${lexeme.tags}" class="hidden-buttons">
        <span th:text="${tag}"></span>
        <button type="button" class="btn badge badge-warning"
                data-op-code="lexeme_tag"
                th:data-id="${lexeme.lexemeId}"
                th:data-value="${tag}"
                th:data-callback="${@viewUtil.composeFunction('loadFullLexemeDetails', lexeme.lexemeId, lexeme.levels)}"
                data-toggle="delete-confirm"
                data-placement="right"
                sec:authorize="#vars.lexeme.crudGrant">
          <i class="fa fa-remove" aria-hidden="true"></i>
        </button>
        <span th:unless="${tagIter.last}">,</span>
      </span>
    </div>
  </div>
  <div class="hidden-buttons row" th:fragment="data_ids">
    <div class="col pr-0 col-w13rem">
      <span class="lbl" th:text="#{lex.data.ids}">Identifikaatorid</span>
    </div>
    <div class="col pl-0">
      <span class="pr-1" th:text="|W${lexeme.wordId}|"></span>
      <span class="pr-1" th:text="|L${lexeme.lexemeId}|"></span>
      <span class="pr-1" th:text="|M${lexeme.meaningId}|" th:classappend="${lexeme.meaningId == selectedMeaningId ? 'text-warning' : ''}"></span>
    </div>
  </div>
  <div class="hidden-buttons row" th:fragment="word_status">
    <div class="col pr-0 col-w13rem">
      <span class="lbl" th:text="#{lex.word.status.wordis}">Keelend on</span>
    </div>
    <div class="col pl-0">
      <span>
        <span th:text="#{|boolean.is.${lexeme.word}|}"></span>
        <button type="button" class="btn badge badge-primary"
                th:title="#{common.edit}"
                data-toggle="modal"
                th:data-target="${'#editLexemeIsWordDlg_' + lexeme.lexemeId}"
                sec:authorize="#vars.lexeme.crudGrant">
          <i class="fa fa-caret-down" aria-hidden="true"></i>
        </button>
        <span th:text="#{lex.word.status.isword}">sõna</span>
      </span>
      <span class="ml-3">
        <span th:text="#{|boolean.is.${lexeme.collocation}|}"></span>
        <button type="button" class="btn badge badge-primary"
                th:title="#{common.edit}"
                data-toggle="modal"
                th:data-target="${'#editLexemeIsCollocDlg_' + lexeme.lexemeId}"
                sec:authorize="#vars.lexeme.crudGrant">
          <i class="fa fa-caret-down" aria-hidden="true"></i>
        </button>
        <span th:text="#{lex.word.status.iscollocation}">kollokatsioon</span>
      </span>
    </div>
  </div>
  <div class="hidden-buttons row" th:if="${lexeme.complexity != null}" th:fragment="lexeme_complexity">
    <div class="col pr-0 col-w13rem">
      <span class="lbl" th:text="#{lex.complexity}">Detailsus</span>
    </div>
    <div class="col pl-0">
      <span th:text="#{'enum.complexity.' + ${lexeme.complexity}}"></span>
      <button type="button" class="btn badge badge-primary"
              th:title="#{common.edit}"
              data-toggle="modal"
              th:data-target="${'#editLexemeComplexityDlg_' + lexeme.lexemeId}"
              sec:authorize="#vars.lexeme.crudGrant">
        <i class="fa fa-caret-down" aria-hidden="true"></i>
      </button>
    </div>
  </div>
  <div class="hidden-buttons row" th:if="${lexeme.lexemeValueState != null}" th:fragment="lexeme_value_state">
    <div class="col pr-0 col-w13rem">
      <span class="lbl" th:text="#{lex.lexeme.value.state}">Väärtusolek</span>
    </div>
    <div class="col pl-0">
      <span th:text="${lexeme.lexemeValueState.value}"></span>
      <button type="button" class="btn badge badge-primary"
              th:title="#{common.edit}"
              data-toggle="modal"
              th:data-target="${'#editLexemeValueStateCodeDlg_' + lexeme.lexemeId}"
              sec:authorize="#vars.lexeme.crudGrant">
        <i class="fa fa-caret-down" aria-hidden="true"></i>
      </button>
      <button type="button" class="btn badge badge-warning"
              data-op-code="lexeme_value_state"
              th:data-id="${lexeme.lexemeId}"
              th:data-callback="${@viewUtil.composeFunction('loadFullLexemeDetails', lexeme.lexemeId, lexeme.levels)}"
              data-toggle="delete-confirm"
              data-placement="right"
              sec:authorize="#vars.lexeme.crudGrant">
        <i class="fa fa-remove" aria-hidden="true"></i>
      </button>
    </div>
  </div>
  <div class="hidden-buttons row" th:if="${lexeme.lexemeProficiencyLevel != null}" th:fragment="lexeme_proficiency_level">
    <div class="col pr-0 col-w13rem">
      <span class="lbl" th:text="#{lex.lexeme.proficiency.level}">Keeletase</span>
    </div>
    <div class="col pl-0">
      <span th:text="${lexeme.lexemeProficiencyLevel.value}"></span>
      <button type="button" class="btn badge badge-primary"
              th:title="#{common.edit}"
              data-toggle="modal"
              th:data-target="${'#editLexemeProficiencyLevelDlg_' + lexeme.lexemeId}"
              sec:authorize="#vars.lexeme.crudGrant">
        <i class="fa fa-caret-down" aria-hidden="true"></i>
      </button>
      <button type="button" class="btn badge badge-warning"
              data-op-code="lexeme_proficiency_level"
              th:data-id="${lexeme.lexemeId}"
              th:data-callback="${@viewUtil.composeFunction('loadFullLexemeDetails', lexeme.lexemeId, lexeme.levels)}"
              data-toggle="delete-confirm"
              data-placement="right"
              sec:authorize="#vars.lexeme.crudGrant">
        <i class="fa fa-remove" aria-hidden="true"></i>
      </button>
    </div>
  </div>
  <div class="row" th:if="${not #lists.isEmpty(lexeme.grammars)}" th:fragment="lexeme_grammar">
    <div class="col pr-0 col-w13rem">
      <span class="lbl" th:text="#{lex.lexeme.grammar}">Grammatika</span>
      <button type="button" class="btn badge badge-success float-right mr-4"
              th:title="#{common.add.new}"
              data-toggle="modal"
              th:data-target="${'#addLexemeGrammarDlg_' + lexeme.lexemeId}"
              sec:authorize="#vars.lexeme.crudGrant">
        <i class="fa fa-plus" aria-hidden="true"></i>
      </button>
    </div>
    <div class="col pl-0">
      <span th:each="grammar,grammarIter : ${lexeme.grammars}" class="hidden-buttons">
        <span th:replace="lexdialog :: edit_lexeme_grammar_dlg"></span>
        <span th:utext="${grammar.valuePrese}"></span>
        <span class="ctxt" th:text="'(' + #{'enum.complexity.' + ${grammar.complexity}} + ')'" data-plugin="complexityAndPublicity"></span>
        <button type="button" class="btn badge badge-primary"
                th:title="#{common.edit}"
                data-toggle="modal"
                th:data-target="${'#editLexemeGrammarDlg_' + lexeme.lexemeId + '_' + grammar.id}"
                sec:authorize="#vars.lexeme.crudGrant">
          <i class="fa fa-edit" aria-hidden="true"></i>
        </button>
        <button type="button" class="btn badge badge-warning"
                data-op-code="lexeme_grammar"
                th:data-id="${grammar.id}"
                th:data-callback="${@viewUtil.composeFunction('loadFullLexemeDetails', lexeme.lexemeId, lexeme.levels)}"
                data-toggle="delete-confirm"
                data-placement="right"
                sec:authorize="#vars.lexeme.crudGrant">
          <i class="fa fa-remove" aria-hidden="true"></i>
        </button>
        <span th:unless="${grammarIter.last}" class="ml-n1">,</span>
      </span>
    </div>
  </div>
  <div class="hidden-buttons row" th:fragment="lexeme_weight">
    <div class="col pr-0 col-w13rem">
      <span class="lbl" th:text="#{lex.lexeme.weight}">Ilmiku kaal</span>
    </div>
    <div class="col pl-0">
      <span th:text="${@viewUtil.getFormattedWeight(lexeme.weight)}"></span>
      <button type="button" class="btn badge badge-primary"
              th:title="#{common.edit}"
              data-toggle="modal"
              th:data-target="${'#editLexemeWeightDlg_' + lexeme.lexemeId}"
              sec:authorize="#vars.lexeme.crudGrant">
        <i class="fa fa-edit" aria-hidden="true"></i>
      </button>
    </div>
  </div>
  <div class="row" th:if="${not #lists.isEmpty(lexeme.pos)}" th:fragment="lexeme_pos">
    <div class="col pr-0 col-w13rem">
      <span class="lbl" th:text="#{lex.lexeme.pos}">Sõnaliik</span>
      <button type="button" class="btn badge badge-success float-right mr-4"
              th:title="#{common.add.new}"
              data-toggle="modal"
              th:data-target="${'#addLexemePosDlg_' + lexeme.lexemeId}"
              sec:authorize="#vars.lexeme.crudGrant">
        <i class="fa fa-plus" aria-hidden="true"></i>
      </button>
    </div>
    <div class="col pl-0">
      <span th:each="classif,classifIter : ${lexeme.pos}" class="hidden-buttons">
        <span th:replace="lexdialog :: edit_lexeme_pos_dlg"></span>
        <span th:text="${classif.code}"></span>
        <th:block th:unless="${classif.code == classif.value}">
          -
          <span th:text="${classif.value}"></span>
        </th:block>
        <button type="button" class="btn badge badge-primary"
                th:title="#{common.edit}"
                data-toggle="modal"
                th:data-target="${'#editLexemePosDlg_' + lexeme.lexemeId + '_' + classifIter.index}"
                sec:authorize="#vars.lexeme.crudGrant">
          <i class="fa fa-caret-down" aria-hidden="true"></i>
        </button>
        <button type="button" class="btn badge badge-warning"
                data-op-code="lexeme_pos"
                th:data-id="${lexeme.lexemeId}"
                th:data-value="${classif.code}"
                th:data-callback="${@viewUtil.composeFunction('loadFullLexemeDetails', lexeme.lexemeId, lexeme.levels)}"
                data-toggle="delete-confirm"
                data-placement="right"
                sec:authorize="#vars.lexeme.crudGrant">
          <i class="fa fa-remove" aria-hidden="true"></i>
        </button>
        <span th:unless="${classifIter.last}">,</span>
      </span>
    </div>
  </div>
  <div class="row" th:if="${not #lists.isEmpty(lexeme.derivs)}" th:fragment="lexeme_derivative">
    <div class="col pr-0 col-w13rem">
      <span class="lbl" th:text="#{lex.lexeme.derivative}">Tuletuskood</span>
      <button type="button" class="btn badge badge-success float-right mr-4"
              th:title="#{common.add.new}"
              data-toggle="modal"
              th:data-target="${'#addLexemeDerivDlg_' + lexeme.lexemeId}"
              sec:authorize="#vars.lexeme.crudGrant">
        <i class="fa fa-plus" aria-hidden="true"></i>
      </button>
    </div>
    <div class="col pl-0">
      <span th:each="classif,classifIter : ${lexeme.derivs}" class="hidden-buttons">
        <span th:replace="lexdialog :: edit_lexeme_deriv_dlg"></span>
        <span th:text="${classif.code}"></span>
        <th:block th:unless="${classif.code == classif.value}">
          -
          <span th:text="${classif.value}"></span>
        </th:block>
        <button type="button" class="btn badge badge-primary"
                th:title="#{common.edit}"
                data-toggle="modal"
                th:data-target="${'#editLexemeDerivDlg_' + lexeme.lexemeId + '_' + classifIter.index}"
                sec:authorize="#vars.lexeme.crudGrant">
          <i class="fa fa-caret-down" aria-hidden="true"></i>
        </button>
        <button type="button" class="btn badge badge-warning"
                data-op-code="lexeme_deriv"
                th:data-id="${lexeme.lexemeId}"
                th:data-value="${classif.code}"
                th:data-callback="${@viewUtil.composeFunction('loadFullLexemeDetails', lexeme.lexemeId, lexeme.levels)}"
                data-toggle="delete-confirm"
                data-placement="right"
                sec:authorize="#vars.lexeme.crudGrant">
          <i class="fa fa-remove" aria-hidden="true"></i>
        </button>
        <span th:unless="${classifIter.last}">,</span>
      </span>
    </div>
  </div>
  <div class="row" th:if="${not #lists.isEmpty(lexeme.registers)}" th:fragment="lexeme_register">
    <div class="col pr-0 col-w13rem">
      <span class="lbl" th:text="#{lex.lexeme.register}">Register</span>
      <button type="button" class="btn badge badge-success float-right mr-4"
              th:title="#{common.add.new}"
              data-toggle="modal"
              th:data-target="${'#addLexemeRegisterDlg_' + lexeme.lexemeId}"
              sec:authorize="#vars.lexeme.crudGrant">
        <i class="fa fa-plus" aria-hidden="true"></i>
      </button>
    </div>
    <div class="col pl-0">
      <span th:each="classif,classifIter : ${lexeme.registers}" class="hidden-buttons">
        <span th:replace="lexdialog :: edit_lexeme_register_dlg"></span>
        <span th:text="${classif.code}"></span>
        <th:block th:unless="${classif.code == classif.value}">
          -
          <span th:text="${classif.value}"></span>
        </th:block>
        <button type="button" class="btn badge badge-primary"
                th:title="#{common.edit}"
                data-toggle="modal"
                th:data-target="${'#editLexemeRegisterDlg_' + lexeme.lexemeId + '_' + classifIter.index}"
                sec:authorize="#vars.lexeme.crudGrant">
          <i class="fa fa-caret-down" aria-hidden="true"></i>
        </button>
        <button type="button" class="btn badge badge-warning"
                data-op-code="lexeme_register"
                th:data-id="${lexeme.lexemeId}"
                th:data-value="${classif.code}"
                th:data-callback="${@viewUtil.composeFunction('loadFullLexemeDetails', lexeme.lexemeId, lexeme.levels)}"
                data-toggle="delete-confirm"
                data-placement="right"
                sec:authorize="#vars.lexeme.crudGrant">
          <i class="fa fa-remove" aria-hidden="true"></i>
        </button>
        <span th:unless="${classifIter.last}">,</span>
      </span>
    </div>
  </div>
  <div class="row" th:if="${not #lists.isEmpty(lexeme.meaning.domains)}" th:fragment="meaning_domain">
    <div class="col pr-0 col-w13rem">
      <span class="lbl" th:text="#{lex.meaning.domain}">Valdkond</span>
      <button type="button" class="btn badge badge-success float-right mr-4"
              th:title="#{common.add.new}"
              data-toggle="modal"
              th:data-target="${'#addMeaningDomainDlg_' + lexeme.meaningId}"
              sec:authorize="#vars.lexeme.meaning.crudGrant">
        <i class="fa fa-plus" aria-hidden="true"></i>
      </button>
    </div>
    <div class="col pl-0">
      <div class="orderable" data-op-code="meaning_domain">
        <div th:each="classif,classifIter : ${lexeme.meaning.domains}" th:data-id="${classif.id}" th:data-orderby="${classif.orderBy}" class="hidden-buttons">
          <div class="row">
            <div class="action-column">
              <th:block th:replace="common :: ordering_buttons(${classifIter})" sec:authorize="#vars.lexeme.meaning.crudGrant"></th:block>
            </div>
            <div class="col">
              <span th:replace="lexdialog :: edit_meaning_domain_dlg"></span>
              <span th:text="${classif.code}"></span>
              <th:block th:unless="${classif.code == classif.value}">
                -
                <span th:text="${classif.value}"></span>
              </th:block>
              <button type="button" class="btn badge badge-primary" th:title="#{common.edit}" data-toggle="modal"
                      th:data-target="${'#editMeaningDomainDlg_' + lexeme.lexemeId + '_' + classifIter.index}"
                      sec:authorize="#vars.lexeme.meaning.crudGrant">
                <i class="fa fa-caret-down" aria-hidden="true"></i>
              </button>
              <button type="button" class="btn badge badge-warning" 
                      data-op-code="meaning_domain"
                      th:data-id="${lexeme.meaningId}"
                      th:data-value="${classif.toIdString()}"
                      th:data-callback="${@viewUtil.composeFunction('loadFullLexemeDetails', lexeme.lexemeId, lexeme.levels)}"
                      data-toggle="delete-confirm"
                      data-placement="right"
                      sec:authorize="#vars.lexeme.meaning.crudGrant">
                <i class="fa fa-remove" aria-hidden="true"></i>
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="row" th:if="${not #lists.isEmpty(lexeme.meaning.semanticTypes)}" th:fragment="meaning_semantic_type">
    <div class="col pr-0 col-w13rem">
      <span class="lbl" th:text="#{lex.meaning.semantic.type}">Semantiline tüüp</span>
      <button type="button" class="btn badge badge-success float-right mr-4"
              th:title="#{common.add.new}"
              data-toggle="modal"
              th:data-target="${'#addMeaningSemanticTypeDlg_' + lexeme.meaningId}"
              sec:authorize="#vars.lexeme.meaning.crudGrant">
        <i class="fa fa-plus" aria-hidden="true"></i>
      </button>
    </div>
    <div class="col pl-0">
      <span th:each="classif,classifIter : ${lexeme.meaning.semanticTypes}" class="hidden-buttons">
        <span th:replace="lexdialog :: edit_meaning_semantic_type_dlg"></span>
        <span th:text="${classif.code}"></span>
        <th:block th:unless="${classif.code == classif.value}">
          -
          <span th:text="${classif.value}"></span>
        </th:block>
        <button type="button" class="btn badge badge-primary"
                th:title="#{common.edit}"
                data-toggle="modal"
                th:data-target="${'#editMeaningSemanticTypeDlg_' + lexeme.meaningId + '_' + classifIter.index}"
                sec:authorize="${#vars.lexeme.meaning.crudGrant}">
          <i class="fa fa-caret-down" aria-hidden="true"></i>
        </button>
        <button type="button" class="btn badge badge-warning"
                data-op-code="meaning_semantic_type"
                th:data-id="${lexeme.meaningId}"
                th:data-value="${classif.code}"
                th:data-callback="${@viewUtil.composeFunction('loadFullLexemeDetails', lexeme.lexemeId, lexeme.levels)}"
                data-toggle="delete-confirm"
                data-placement="right"
                sec:authorize="${#vars.lexeme.meaning.crudGrant}">
          <i class="fa fa-remove" aria-hidden="true"></i>
        </button>
        <span th:unless="${classifIter.last}">,</span>
      </span>
    </div>
  </div>
  <div class="mr-1" th:fragment="word_reg_year">
    <th:block th:unless="${details.word.regYear}">
      <button type="button" class="btn btn-secondary btn-compact btn-sm"
              data-toggle="modal"
              th:data-target="${'#editWordRegYearDlg_' + wordId}"
              sec:authorize="#vars.details.word.crudGrant">
        <i class="fa fa-plus action-icon mr-1" aria-hidden="true"></i>
        <span th:text="#{lex.word.regyear}">Registreeritud</span>
      </button>
    </th:block>
    <th:block th:if="${details.word.regYear}">
      <div class="hover-actions-container hover-actions-container-outline">
        <span data-toggle="tooltip" data-boundary="window" data-placement="top"
              th:text="${details.word.regYear}"
              th:title="#{lex.word.regyear}"></span>
        <div class="hover-actions">
          <div class="btn-group">
            <button type="button" class="btn btn-secondary btn-sm"
                    th:title="#{common.edit}"
                    data-toggle="modal"
                    th:data-target="${'#editWordRegYearDlg_' + wordId}"
                    sec:authorize="#vars.details.word.crudGrant">
              <i class="fa fa-caret-down action-icon" aria-hidden="true"></i>
            </button>
            <button type="button" class="btn btn-secondary btn-sm"
                th:data-id="${wordId}"
                data-op-code="word_reg_year"
                data-toggle="delete-confirm"
                data-placement="right"
                sec:authorize="#vars.details.word.crudGrant">
              <i class="fa fa-remove action-icon" aria-hidden="true"></i>
            </button>
          </div>
        </div>
      </div>
    </th:block>
  </div>
  <div class="mr-1" th:fragment="word_lang">
    <th:block th:if="${#strings.isEmpty(details.word.lang)}">
      <button type="button" class="btn btn-secondary btn-compact btn-sm"
              data-toggle="modal"
              th:data-target="${'#addWordLangDlg_' + wordId}"
              sec:authorize="#vars.details.word.crudGrant">
        <i class="fa fa-plus action-icon mr-1" aria-hidden="true"></i>
        <span th:text="#{lex.word.language}">Keel</span>
        <i class="fa fa-plus action-icon mr-1" aria-hidden="true"></i>
      </button>
    </th:block>
    <th:block th:unless="${#strings.isEmpty(details.word.lang)}">
      <div class="hover-actions-container hover-actions-container-outline">
        <span data-toggle="tooltip" data-boundary="window" data-placement="top"
              th:text="${@viewUtil.getClassifierValue(details.word.lang, languages)}"
              th:title="#{lex.word.language}"></span>
        <div class="hover-actions">
          <div class="btn-group">
            <button type="button" class="btn btn-secondary btn-sm"
                    th:title="#{common.edit}"
                    data-toggle="modal"
                    th:data-target="${'#editWordLangDlg_' + wordId}"
                    sec:authorize="#vars.details.word.crudGrant">
              <i class="fa fa-caret-down action-icon" aria-hidden="true"></i>
            </button>
          </div>
        </div>
      </div>
    </th:block>
  </div>
  <div class="mr-1" th:fragment="word_display_morph">
    <th:block th:if="${details.word.displayMorphCode == null}">
      <button type="button" class="btn btn-secondary btn-compact btn-sm"
              data-toggle="modal"
              th:data-target="${'#addWordDisplayMorphDlg_' + wordId}"
              sec:authorize="#vars.details.word.crudGrant">
        <i class="fa fa-plus action-icon mr-1" aria-hidden="true"></i>
        <span th:text="#{lex.word.display.morph.code}">Vormikood</span>
      </button>
    </th:block>
    <th:block th:unless="${details.word.displayMorphCode == null}">
      <div class="hover-actions-container hover-actions-container-outline">
        <span data-toggle="tooltip" data-boundary="window" data-placement="top"
              th:text="'[' + ${details.word.displayMorphCode} + ']'"
              th:title="#{lex.word.display.morph.code}"></span>
        <div class="hover-actions">
          <div class="btn-group">
            <button type="button" class="btn btn-secondary btn-sm"
                    th:title="#{common.edit}"
                    data-toggle="modal"
                    th:data-target="${'#editWordDisplayMorphDlg_' + wordId}"
                    sec:authorize="#vars.details.word.crudGrant">
              <i class="fa fa-caret-down action-icon" aria-hidden="true"></i>
            </button>
            <button type="button" class="btn btn-secondary btn-sm"
                    th:data-id="${wordId}"
                    data-op-code="word_display_morph"
                    data-toggle="delete-confirm"
                    data-placement="right"
                    sec:authorize="#vars.details.word.crudGrant">
              <i class="fa fa-remove action-icon" aria-hidden="true"></i>
            </button>
          </div>
        </div>
      </div>
    </th:block>
  </div>
  <div class="mr-1" th:fragment="word_vocal_form">
    <th:block th:if="${#strings.isEmpty(details.word.vocalForm)}">
      <button type="button" class="btn btn-secondary btn-compact btn-sm"
              data-toggle="modal"
              th:data-target="${'#addWordVocalFormDlg_' + wordId}"
              sec:authorize="#vars.details.word.crudGrant">
        <i class="fa fa-plus action-icon mr-1" aria-hidden="true"></i>
        <span th:text="#{lex.word.vocal.form}">Hääldus</span>
      </button>
    </th:block>
    <th:block th:unless="${#strings.isEmpty(details.word.vocalForm)}">
      <div class="hover-actions-container hover-actions-container-outline">
        <span data-toggle="tooltip" data-boundary="window" data-placement="top"
              th:text="${details.word.vocalForm}"
              th:title="#{lex.word.vocal.form}"></span>
        <div class="hover-actions hover-actions-bottom-right">
          <div class="btn-group">
            <button type="button" class="btn btn-secondary btn-sm" th:title="#{common.edit}"
                    data-toggle="modal"
                    th:data-target="${'#editWordVocalFormDlg_' + wordId}"
                    sec:authorize="#vars.details.word.crudGrant">
              <i class="fa fa-pencil action-icon" aria-hidden="true"></i>
            </button>
            <button type="button" class="btn btn-secondary btn-sm"
                    th:data-id="${wordId}"
                    data-op-code="word_vocal_form"
                    data-toggle="delete-confirm"
                    data-placement="right"
                    sec:authorize="#vars.details.word.crudGrant">
              <i class="fa fa-remove action-icon" aria-hidden="true"></i>
            </button>
          </div>
        </div>
      </div>
    </th:block>
  </div>
  <div class="mr-1" th:fragment="word_morphophono_form">
    <th:block th:if="${#strings.isEmpty(details.word.morphophonoForm)}">
      <button type="button" class="btn btn-secondary btn-compact btn-sm"
              data-toggle="modal"
              th:data-target="${'#addWordMorphophonoFormDlg_' + wordId}"
              sec:authorize="#vars.details.word.crudGrant">
        <i class="fa fa-plus action-icon mr-1" aria-hidden="true"></i>
        <span th:text="#{lex.word.morphophono.form}">MF kuju</span>
      </button>
    </th:block>
    <th:block th:unless="${#strings.isEmpty(details.word.morphophonoForm)}">
      <div class="hover-actions-container hover-actions-container-outline">
        <span data-toggle="tooltip" data-boundary="window" data-placement="top"
              th:text="${details.word.morphophonoForm}"
              th:title="#{lex.word.morphophono.form}"></span>
        <div class="hover-actions hover-actions-bottom-right">
          <div class="btn-group">
            <button type="button" class="btn btn-secondary btn-sm"
                    th:title="#{common.edit}"
                    data-toggle="modal"
                    th:data-target="${'#editWordMorphophonoFormDlg_' + wordId}"
                    sec:authorize="#vars.details.word.crudGrant">
              <i class="fa fa-pencil action-icon" aria-hidden="true"></i>
            </button>
            <button type="button" class="btn btn-secondary btn-sm"
                    th:data-id="${wordId}"
                    data-op-code="word_morphophono_form"
                    data-toggle="delete-confirm"
                    data-placement="right"
                    sec:authorize="#vars.details.word.crudGrant">
              <i class="fa fa-remove action-icon" aria-hidden="true"></i>
            </button>
          </div>
        </div>
      </div>
    </th:block>
  </div>
  <div class="mr-1" th:fragment="word_gender">
    <th:block th:if="${details.word.genderCode == null}">
      <button type="button" class="btn btn-secondary btn-compact btn-sm"
              data-toggle="modal"
              th:data-target="${'#addWordGenderDlg_' + wordId}"
              sec:authorize="#vars.details.word.crudGrant">
        <i class="fa fa-plus action-icon mr-1" aria-hidden="true"></i>
        <span th:text="#{lex.word.gender}">Sugu</span>
      </button>
    </th:block>
    <th:block th:unless="${details.word.genderCode == null}">
      <div class="hover-actions-container hover-actions-container-outline">
        <span data-toggle="tooltip" data-boundary="window" data-placement="top"
              th:text="${@viewUtil.getClassifierValue(details.word.genderCode, wordGenders)}"
              th:title="#{lex.word.gender}"></span>
        <div class="hover-actions hover-actions-bottom-right">
          <div class="btn-group">
            <button type="button" class="btn btn-secondary btn-sm"
                    th:title="#{common.edit}"
                    data-toggle="modal"
                    th:data-target="${'#editWordGenderDlg_' + wordId}"
                    sec:authorize="#vars.details.word.crudGrant">
              <i class="fa fa-caret-down action-icon" aria-hidden="true"></i>
            </button>
            <button type="button" class="btn btn-secondary btn-sm"
                    th:data-id="${wordId}"
                    data-op-code="word_gender"
                    data-toggle="delete-confirm"
                    data-placement="right"
                    sec:authorize="#vars.details.word.crudGrant">
              <i class="fa fa-remove action-icon" aria-hidden="true"></i>
            </button>
          </div>
        </div>
      </div>
    </th:block>
  </div>
  <div class="mr-1" th:fragment="word_type">
    <th:block th:if="${#lists.isEmpty(details.word.wordTypes)}">
      <button type="button" class="btn btn-secondary btn-compact btn-sm"
              data-toggle="modal"
              th:data-target="${'#addWordTypeDlg_' + wordId}"
              sec:authorize="#vars.details.word.crudGrant">
        <i class="fa fa-plus action-icon mr-1" aria-hidden="true"></i>
        <span th:text="#{lex.word.type}">Keelendi tüüp</span>
      </button>
    </th:block>
    <th:block th:unless="${#lists.isEmpty(details.word.wordTypes)}">
      <div th:each="classif,classifIter : ${details.word.wordTypes}"
           th:title="#{lex.word.type}"
           data-toggle="tooltip" data-boundary="window" data-placement="top"
           class="hover-actions-container hover-actions-container-outline">
        <span th:replace="lexdialog :: edit_word_type_dlg"></span>
        <span th:text="${classif.code}"></span>
        <th:block th:unless="${classif.code == classif.value}">
          -
          <span th:text="${classif.value}"></span>
        </th:block>
        <div class="hover-actions hover-actions-bottom-right">
          <div class="btn-group">
            <button type="button" class="btn btn-secondary btn-sm"
                    data-toggle="modal"
                    th:data-target="${'#addWordTypeDlg_' + wordId}"
                    sec:authorize="#vars.details.word.crudGrant">
              <i class="fa fa-plus action-icon" aria-hidden="true"></i>
            </button>
            <button type="button" class="btn btn-secondary btn-sm"
                    th:title="#{common.edit}"
                    data-toggle="modal"
                    th:data-target="${'#editWordTypeDlg_' + wordId + '_' + classifIter.index}"
                    sec:authorize="#vars.details.word.crudGrant">
              <i class="fa fa-caret-down action-icon" aria-hidden="true"></i>
            </button>
            <button type="button" class="btn btn-secondary btn-sm"
                    th:data-id="${wordId}"
                    data-op-code="word_type"
                    th:data-value="${classif.code}"
                    data-toggle="delete-confirm"
                    data-placement="right"
                    sec:authorize="#vars.details.word.crudGrant">
              <i class="fa fa-remove action-icon" aria-hidden="true"></i>
            </button>
          </div>
        </div>
        <span th:unless="${classifIter.last}">,</span>
      </div>
    </th:block>
  </div>
  <div class="mr-1" th:fragment="word_aspect">
    <th:block th:if="${details.word.aspectCode == null}">
      <button type="button" class="btn btn-secondary btn-compact btn-sm"
              data-toggle="modal"
              th:data-target="${'#addWordAspectDlg_' + wordId}"
              sec:authorize="#vars.details.word.crudGrant">
        <i class="fa fa-plus action-icon mr-1" aria-hidden="true"></i>
        <span th:text="#{lex.word.aspect}">Aspekt</span>
      </button>
    </th:block>
    <th:block th:unless="${details.word.aspectCode == null}">
      <div class="hover-actions-container hover-actions-container-outline">
        <span data-toggle="tooltip" data-boundary="window" data-placement="top"
              th:text="${@viewUtil.getClassifierValue(details.word.aspectCode, wordAspects)}"
              th:title="#{lex.word.aspect}"></span>
        <div class="hover-actions">
          <div class="btn-group">
            <button type="button" class="btn btn-secondary btn-sm"
                    th:title="#{common.edit}"
                    data-toggle="modal"
                    th:data-target="${'#editWordAspectDlg_' + wordId}"
                    sec:authorize="#vars.details.word.crudGrant">
              <i class="fa fa-caret-down action-icon" aria-hidden="true"></i>
            </button>
            <button type="button" class="btn btn-secondary btn-sm"
                    th:data-id="${wordId}"
                    data-op-code="word_aspect"
                    data-toggle="delete-confirm"
                    data-placement="right"
                    sec:authorize="#vars.details.word.crudGrant">
              <i class="fa fa-remove action-icon" aria-hidden="true"></i>
            </button>
          </div>
        </div>
      </div>
    </th:block>
  </div>
  <div class="mr-1" th:fragment="word_tag">
    <th:block th:if="${#lists.isEmpty(details.word.tags)}">
      <button type="button" class="btn btn-secondary btn-compact btn-sm"
              data-toggle="modal"
              th:data-target="${'#addWordTagDlg_' + wordId}"
              sec:authorize="#vars.details.word.crudGrant">
        <i class="fa fa-plus action-icon mr-1" aria-hidden="true"></i>
        <span th:text="#{lex.word.tag}">Silt</span>
      </button>
    </th:block>
    <th:block th:unless="${#lists.isEmpty(details.word.tags)}">
      <span th:each="tag,tagIter : ${details.word.tags}"
            th:title="#{lex.word.tag}"
            data-toggle="tooltip" data-boundary="window" data-placement="top"
            class="hover-actions-container hover-actions-container-outline">
        <span th:text="${tag}"></span>
        <span class="hover-actions hover-actions-bottom-right">
          <span class="btn-group">
            <button type="button" class="btn btn-secondary btn-sm"
                    data-toggle="modal"
                    th:data-target="${'#addWordTagDlg_' + wordId}"
                    sec:authorize="#vars.details.word.crudGrant">
              <i class="fa fa-plus action-icon" aria-hidden="true"></i>
            </button>
            <button type="button" class="btn btn-secondary btn-sm"
                    th:data-id="${wordId}"
                    data-op-code="word_tag"
                    th:data-value="${tag}"
                    data-toggle="delete-confirm"
                    data-placement="right"
                    sec:authorize="#vars.details.word.crudGrant">
              <i class="fa fa-remove action-icon" aria-hidden="true"></i>
            </button>
          </span>
        </span>
        <span th:unless="${tagIter.last}" class="ml-n1">,</span>
      </span>
    </th:block>
  </div>
  <div class="row" th:fragment="definition">
    <hr/>
    <div class="col pr-0 col-w13rem">
      <span class="lbl" th:text="#{lex.definition}">Seletus</span>
      <button type="button" class="btn badge badge-success float-right mr-4"
              th:title="#{common.add.new}"
              data-toggle="modal"
              th:data-target="${'#addDefinitionDlg_' + lexeme.lexemeId}"
              sec:authorize="#vars.isMeaningLexemeCrudGranted">
        <i class="fa fa-plus" aria-hidden="true"></i>
      </button>
    </div>
    <div class="col pl-0">
      <th:block th:each="definitionLangGroup : ${lexeme.meaning.definitionLangGroups}">
        <div>
          <span th:text="${@viewUtil.getLangIso2(definitionLangGroup.lang)}" class="mr-2"></span>
          <button name="lang-collapse-btn" type="button" class="btn badge badge-secondary btn-toggle"
                  th:data-callback="${@viewUtil.composeFunction('loadFullLexemeDetails', lexeme.lexemeId, lexeme.levels)}"
                  th:data-lang="${definitionLangGroup.lang}"
                  th:title="${definitionLangGroup.selected} ? #{common.hide.lang.group} : #{common.show.lang.group}"
                  data-plugin="langCollapsePlugin">
            <i th:class="${definitionLangGroup.selected ? 'fa fa-angle-down' : 'fa fa-angle-right'}" aria-hidden="true"></i>
          </button>
        </div>
        <div th:if="${definitionLangGroup.selected}" class="orderable" data-op-code="definition">
          <div th:each="definition, definitionIter: ${definitionLangGroup.definitions}"
               th:data-id="${definition.id}"
               th:data-orderby="${definition.orderBy}"
               class="ml-4" style="position: relative;" >
            <div th:replace="lexdialog :: edit_definition_dlg"></div>
            <div th:replace="lexdialog :: add_definition_source_link_dlg"></div>
            <div th:replace="lexdialog :: add_definition_note_dlg"></div>
            <div style="position: absolute; display: list-item;"></div>
            <div class="action-column">
              <th:block th:replace="common :: ordering_buttons(${definitionIter})" sec:authorize="#vars.lexeme.meaning.crudGrant"></th:block>
            </div>
            <div class="invisible-buttons action-buttons-anchor mw-80">
              <span th:utext="${definition.valuePrese}"></span>
              <span class="ctxt" th:text="'(' + #{'enum.complexity.' + ${definition.complexity}} + ')'" data-plugin="complexityAndPublicity"></span>
              <span class="ctxt" th:each="datasetCode,iter : ${definition.datasetCodes}" th:text="${(iter.first ? '[' : '') + datasetCode + (iter.last ? ']' : ', ')}"></span>
              <span class="ctxt" th:text="'(' + #{'boolean.public.' + ${definition.public}} + ')'" th:if="${definition.crudGrant}" data-plugin="complexityAndPublicity"></span>
              <span class="show-on-mouseover">
                <button type="button" class="btn badge badge-success"
                        th:title="#{common.add.source.link}"
                        data-toggle="modal"
                        th:data-target="${'#addDefinitionSourceLinkDlg_' + lexeme.lexemeId + '_' + definition.id}"
                        sec:authorize="#vars.definition.crudGrant">
                  <i class="fa fa-external-link" aria-hidden="true"></i>
                </button>
              </span>
              <div class="action-buttons-3">
                <button type="button" class="btn badge badge-primary"
                        th:title="#{common.edit}"
                        data-toggle="modal"
                        th:data-target="${'#editDefinitionDlg_' + lexeme.lexemeId + '_' + definition.id}"
                        sec:authorize="#vars.definition.crudGrant">
                  <i class="fa fa-edit" aria-hidden="true"></i>
                </button>
                <button type="button" class="btn badge badge-success"
                        title="Lisa märkus"
                        data-toggle="modal"
                        th:data-target="${'#addDefinitionNoteDlg_' + lexeme.lexemeId + '_' + definition.id}"
                        sec:authorize="#vars.definition.crudGrant">
                  <i class="fa fa-sticky-note-o" aria-hidden="true"></i>
                </button>
                <button type="button" class="btn badge badge-warning"
                        data-op-code="definition"
                        th:data-id="${definition.id}"
                        th:data-callback="${@viewUtil.composeFunction('loadFullLexemeDetails', lexeme.lexemeId, lexeme.levels)}"
                        data-toggle="delete-confirm"
                        data-placement="right"
                        sec:authorize="#vars.definition.crudGrant">
                  <i class="fa fa-remove" aria-hidden="true"></i>
                </button>
              </div>
            </div>
            <div class="hidden-buttons">
              <th:block th:unless="${#lists.isEmpty(definition.sourceLinks)}">
                <div class="orderable" data-op-code="definition_source_link">
                  <div th:each="sourceLink,sourceLinkIter : ${definition.sourceLinks}"
                       th:data-id="${sourceLink.id}"
                       th:data-orderby="${sourceLink.orderBy}"
                       class="ml-4" style="position: relative;">
                    <div th:replace="lexdialog :: edit_definition_source_link_dlg"></div>
                    <div style="position: absolute; display: list-item;"></div>
                    <div class="action-column">
                      <th:block th:replace="common :: ordering_buttons(${sourceLinkIter})" sec:authorize="#vars.lexeme.meaning.crudGrant"></th:block>
                    </div>
                    <div class="invisible-buttons action-buttons-anchor mw-80">
                      <span>
                        <a th:href="@{'/definition_source_link:' + ${sourceLink.id}}" th:text="${sourceLink.sourceName}"></a>
                        <span th:if="${sourceLink.name != null}" th:text="${sourceLink.name}"></span>
                        <button type="button" class="btn badge badge-primary"
                                th:title="#{common.edit}"
                                data-toggle="modal"
                                th:data-target="${'#editDefinitionSourceLinkDlg_' + sourceLink.id}"
                                sec:authorize="#vars.definition.crudGrant">
                          <i class="fa fa-edit" aria-hidden="true"></i>
                        </button>
                        <button type="button" class="btn badge badge-warning"
                                data-op-code="definition_source_link"
                                th:data-id="${sourceLink.id}"
                                th:data-callback="${@viewUtil.composeFunction('loadFullLexemeDetails', lexeme.lexemeId, lexeme.levels)}"
                                data-toggle="delete-confirm"
                                data-placement="right"
                                sec:authorize="#vars.definition.crudGrant">
                          <i class="fa fa-remove" aria-hidden="true"></i>
                        </button>
                      </span>
                    </div>
                  </div>
                </div>
              </th:block>
            </div>
            <div th:if="${not #lists.isEmpty(definition.notes)}" class="col pl-0">
              <div>
                <span class="lbl" th:text="#{lex.note}">Märkus</span>
              </div>
              <div class="orderable" data-op-code="definition_note">
                <div th:each="note,noteIter : ${definition.notes}"
                     th:data-id="${note.id}"
                     th:data-orderby="${note.orderBy}"
                     class="ml-4" style="position: relative;">
                  <div th:replace="lexdialog :: edit_definition_note_dlg"></div>
                  <div th:replace="lexdialog :: add_definition_note_source_link_dlg"></div>
                  <div style="position: absolute; display: list-item;"></div>
                  <div class="action-column">
                    <th:block th:replace="common :: ordering_buttons(${noteIter})" sec:authorize="#vars.definition.crudGrant"></th:block>
                  </div>
                  <div class="invisible-buttons action-buttons-anchor mw-90">
                    <span th:utext="${note.valuePrese}"></span>
                    <span class="ctxt" th:text="'(' + #{'boolean.public.' + ${note.public}} + ')'" th:if="${definition.crudGrant}" data-plugin="complexityAndPublicity"></span>
                    <div class="action-buttons-3">
                      <button type="button" class="btn badge badge-primary"
                              th:title="#{common.edit}"
                              data-toggle="modal"
                              th:data-target="${'#editDefinitionNoteDlg_' + lexeme.lexemeId + '_' + note.id}"
                              sec:authorize="#vars.definition.crudGrant">
                        <i class="fa fa-edit" aria-hidden="true"></i>
                      </button>
                      <button type="button" class="btn badge badge-success"
                              th:title="#{common.add.source.link}"
                              data-toggle="modal"
                              th:data-target="${'#addDefinitionNoteSourceLinkDlg_' + definition.id + '_' + note.id}"
                              sec:authorize="#vars.definition.crudGrant">
                        <i class="fa fa-external-link" aria-hidden="true"></i>
                      </button>
                      <button type="button" class="btn badge badge-warning"
                              th:data-id="${note.id}"
                              data-op-code="definition_note"
                              th:data-callback="${@viewUtil.composeFunction('loadFullLexemeDetails', lexeme.lexemeId, lexeme.levels)}"
                              data-toggle="delete-confirm"
                              data-placement="right"
                              sec:authorize="#vars.definition.crudGrant">
                        <i class="fa fa-remove" aria-hidden="true"></i>
                      </button>
                    </div>
                  </div>
                  <div class="hidden-buttons">
                    <th:block th:unless="${#lists.isEmpty(note.sourceLinks)}">
                      <div class="orderable" data-op-code="definition_note_source_link">
                        <div th:each="sourceLink,sourceLinkIter : ${note.sourceLinks}"
                             th:data-id="${sourceLink.id}"
                             th:data-orderby="${sourceLink.orderBy}"
                             class="ml-4" style="position: relative;">
                          <div th:replace="lexdialog :: edit_definition_note_source_link_dlg"></div>
                          <div style="position: absolute; display: list-item;"></div>
                          <div class="action-column">
                            <th:block th:replace="common :: ordering_buttons(${sourceLinkIter})" sec:authorize="#vars.definition.crudGrant"></th:block>
                          </div>
                          <div class="invisible-buttons action-buttons-anchor mw-80">
                            <span>
                              <a th:href="@{'/definition_note_source_link:' + ${sourceLink.id}}" th:text="${sourceLink.sourceName}"></a>
                              <span th:if="${sourceLink.name != null}" th:text="${sourceLink.name}"></span>
                              <button type="button" class="btn badge badge-primary"
                                      th:title="#{common.edit}"
                                      data-toggle="modal"
                                      th:data-target="${'#editDefinitionNoteSourceLinkDlg_' + sourceLink.id}"
                                      sec:authorize="#vars.definition.crudGrant">
                                <i class="fa fa-edit" aria-hidden="true"></i>
                              </button>
                              <button type="button" class="btn badge badge-warning"
                                      data-op-code="definition_note_source_link"
                                      th:data-id="${sourceLink.id}"
                                      th:data-callback="${@viewUtil.composeFunction('loadFullLexemeDetails', lexeme.lexemeId, lexeme.levels)}"
                                      data-toggle="delete-confirm"
                                      data-placement="right"
                                      sec:authorize="#vars.definition.crudGrant">
                                <i class="fa fa-remove" aria-hidden="true"></i>
                              </button>
                            </span>
                          </div>
                        </div>
                      </div>
                    </th:block>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </th:block>
    </div>
  </div>
  <th:block th:fragment="lexeme_source_link">
    <div class="row" th:if="${not #lists.isEmpty(lexeme.sourceLinks)}">
      <hr/>
      <div class="col pr-0 col-w13rem">
        <span class="lbl" th:text="#{lex.source.link}">Allikaviide</span>
        <button type="button" class="btn badge badge-success float-right mr-4"
                th:title="#{common.add.source.link}"
                data-toggle="modal"
                th:data-target="${'#addLexemeSourceLinkDlg_' + lexeme.lexemeId}"
                sec:authorize="#vars.lexeme.crudGrant">
          <i class="fa fa-external-link" aria-hidden="true"></i>
        </button>
      </div>
      <div class="col pl-0 hidden-buttons">
        <th:block th:unless="${#lists.isEmpty(lexeme.sourceLinks)}">
          <div class="orderable" data-op-code="lexeme_source_link">
            <div th:each="sourceLink,sourceLinkIter : ${lexeme.sourceLinks}"
                 th:data-id="${sourceLink.id}"
                 th:data-orderby="${sourceLink.orderBy}"
                 class="ml-4" style="position: relative;">
              <div th:replace="lexdialog :: edit_lexeme_source_link_dlg"></div>
              <div style="position: absolute; display: list-item;"></div>
              <div class="action-column">
                <th:block th:replace="common :: ordering_buttons(${sourceLinkIter})" sec:authorize="#vars.lexeme.crudGrant"></th:block>
              </div>
              <div class="invisible-buttons action-buttons-anchor mw-80">
                <span>
                  <a th:href="@{'/lexeme_source_link:' + ${sourceLink.id}}" th:text="${sourceLink.sourceName}"></a>
                  <span th:if="${sourceLink.name != null}" th:text="${sourceLink.name}"></span>
                  <button type="button" class="btn badge badge-primary"
                          th:title="#{common.edit}"
                          data-toggle="modal"
                          th:data-target="${'#editLexemeSourceLinkDlg_' + sourceLink.id}"
                          sec:authorize="#vars.lexeme.crudGrant">
                    <i class="fa fa-edit" aria-hidden="true"></i>
                  </button>
                  <button type="button" class="btn badge badge-warning"
                          data-op-code="lexeme_source_link"
                          th:data-id="${sourceLink.id}"
                          th:data-callback="${@viewUtil.composeFunction('loadFullLexemeDetails', lexeme.lexemeId, lexeme.levels)}"
                          data-toggle="delete-confirm"
                          data-placement="right"
                          sec:authorize="#vars.lexeme.crudGrant">
                    <i class="fa fa-remove" aria-hidden="true"></i>
                  </button>
                </span>
              </div>
            </div>
          </div>
        </th:block>
      </div>
    </div>
  </th:block>
  <div class="row" th:if="${not #lists.isEmpty(lexeme.meaning.learnerComments)}" th:fragment="meaning_learner_comment">
    <hr/>
    <div class="col pr-0 col-w13rem">
      <span class="lbl" th:text="#{lex.learner.comment}">Õppekommentaar</span>
      <button type="button" class="btn badge badge-success float-right mr-4"
              th:title="#{common.add.new}"
              data-toggle="modal"
              th:data-target="${'#addLearnerCommentDlg_' + lexeme.lexemeId}"
              sec:authorize="#vars.lexeme.meaning.crudGrant">
        <i class="fa fa-plus" aria-hidden="true"></i>
      </button>
    </div>
    <div class="col pl-0">
      <th:block th:each="learnerComment : ${lexeme.meaning.learnerComments}">
        <div th:replace="lexdialog :: edit_learner_comment_dlg"></div>
        <div class="row">
          <div class="col hidden-buttons">
            <div class="action-buttons-anchor">
              <span th:utext="${learnerComment.valuePrese}"></span>
              <span class="ctxt" th:text="'(' + #{'enum.complexity.' + ${learnerComment.complexity}} + ')'" data-plugin="complexityAndPublicity"></span>
              <div class="action-buttons-2">
                <button type="button" class="btn badge badge-primary"
                        th:title="#{common.edit}"
                        data-toggle="modal"
                        th:data-target="${'#editLearnerCommentDlg_' + lexeme.lexemeId + '_' + learnerComment.id}"
                        sec:authorize="#vars.lexeme.meaning.crudGrant">
                  <i class="fa fa-edit" aria-hidden="true"></i>
                </button>
                <button type="button" class="btn badge badge-warning"
                        data-op-code="learner_comment"
                        th:data-id="${learnerComment.id}"
                        th:data-callback="${@viewUtil.composeFunction('loadFullLexemeDetails', lexeme.lexemeId, lexeme.levels)}"
                        data-toggle="delete-confirm"
                        data-placement="right"
                        sec:authorize="#vars.lexeme.meaning.crudGrant">
                  <i class="fa fa-remove" aria-hidden="true"></i>
                </button>
              </div>
            </div>
          </div>
        </div>
      </th:block>
    </div>
  </div>
  <div class="row" th:if="${not #lists.isEmpty(lexeme.meaning.images)}" th:fragment="meaning_image">
    <hr>
    <div class="col pr-0 col-w13rem">
      <span class="lbl" th:text="#{lex.image}">Pilt</span>
      <button type="button" class="btn badge badge-success float-right mr-4"
              th:title="#{common.add.new}"
              data-toggle="modal"
              th:data-target="${'#addMeaningImageDlg_' + lexeme.lexemeId}"
              sec:authorize="#vars.isMeaningLexemeCrudGranted">
        <i class="fa fa-plus" aria-hidden="true"></i>
      </button>
    </div>
    <div class="col pl-0">
      <th:block th:each="image,imageIter : ${lexeme.meaning.images}">
        <div th:replace="lexdialog :: edit_meaning_image_dlg"></div>
        <div th:replace="lexdialog :: add_meaning_image_source_link_dlg"></div>
        <div th:if="${imageIter.index > 0}" class="mt-3"></div>
        <div class="invisible-buttons action-buttons-anchor w-100">
          <img class="w-50" th:src="${image.sourceUrl}">
          <button type="button" class="btn badge badge-primary align-bottom"
                  th:title="#{common.edit}"
                  data-toggle="modal"
                  th:data-target="${'#editMeaningImageDlg_' + lexeme.lexemeId + '_' + image.id}"
                  sec:authorize="#vars.lexeme.meaning.crudGrant">
            <i class="fa fa-edit" aria-hidden="true"></i>
          </button>
          <button type="button" class="btn badge badge-success align-bottom"
                  th:title="#{common.add.source.link}"
                  data-toggle="modal"
                  th:data-target="${'#addMeaningImageSourceLinkDlg_' + image.id}"
                  sec:authorize="#vars.lexeme.meaning.crudGrant">
            <i class="fa fa-external-link" aria-hidden="true"></i>
          </button>
          <button type="button" class="btn badge badge-warning align-bottom"
                  th:title="#{lex.delete.image}"
                  data-op-code="meaning_image"
                  th:data-id="${image.id}"
                  th:data-callback="${@viewUtil.composeFunction('loadFullLexemeDetails', lexeme.lexemeId, lexeme.levels)}"
                  data-toggle="delete-confirm"
                  sec:authorize="#vars.lexeme.meaning.crudGrant">
            <i class="fa fa-remove" aria-hidden="true"></i>
          </button>
        </div>
        <div th:unless="${#strings.isEmpty(image.title)}">
          <span th:text="${image.title}"></span>
        </div>
        <div class="hidden-buttons">
          <th:block th:unless="${#lists.isEmpty(image.sourceLinks)}">
            <div class="orderable" data-op-code="meaning_image_source_link">
              <div th:each="sourceLink,sourceLinkIter : ${image.sourceLinks}"
                   th:data-id="${sourceLink.id}"
                   th:data-orderby="${sourceLink.orderBy}"
                   class="ml-4" style="position: relative;">
                <div th:replace="lexdialog :: edit_meaning_image_source_link_dlg"></div>
                <div style="position: absolute; display: list-item;"></div>
                <div class="action-column">
                  <th:block th:replace="common :: ordering_buttons(${sourceLinkIter})" sec:authorize="#vars.lexeme.meaning.crudGrant"></th:block>
                </div>
                <div class="invisible-buttons action-buttons-anchor mw-80">
                  <span>
                    <a th:href="@{'/meaning_image_source_link:' + ${sourceLink.id}}" th:text="${sourceLink.sourceName}"></a>
                    <span th:if="${sourceLink.name != null}" th:text="${sourceLink.name}"></span>
                    <button type="button" class="btn badge badge-primary"
                            th:title="#{common.edit}"
                            data-toggle="modal"
                            th:data-target="${'#editMeaningImageSourceLinkDlg_' + sourceLink.id}"
                            sec:authorize="#vars.lexeme.meaning.crudGrant">
                      <i class="fa fa-edit" aria-hidden="true"></i>
                    </button>
                    <button type="button" class="btn badge badge-warning"
                            data-op-code="meaning_image_source_link"
                            th:data-id="${sourceLink.id}"
                            th:data-callback="${@viewUtil.composeFunction('loadFullLexemeDetails', lexeme.lexemeId, lexeme.levels)}"
                            data-toggle="delete-confirm"
                            data-placement="right"
                            sec:authorize="#vars.lexeme.meaning.crudGrant">
                      <i class="fa fa-remove" aria-hidden="true"></i>
                    </button>
                  </span>
                </div>
              </div>
            </div>
          </th:block>
        </div>
      </th:block>
    </div>
  </div>
  <div class="row" th:if="${not #lists.isEmpty(lexeme.meaning.medias)}" th:fragment="meaning_media">
    <hr>
    <div class="col pr-0 col-w13rem">
      <span class="lbl" th:text="#{lex.media}">Videod ja muu meedia</span>
      <button type="button" class="btn badge badge-success float-right mr-4"
              th:title="#{common.add.new}"
              data-toggle="modal"
              th:data-target="${'#addMeaningMediaDlg_' + lexeme.lexemeId}"
              sec:authorize="#vars.isMeaningLexemeCrudGranted">
        <i class="fa fa-plus" aria-hidden="true"></i>
      </button>
    </div>
    <div class="col pl-0">
      <th:block th:each="media : ${lexeme.meaning.medias}">
        <div th:replace="lexdialog :: edit_meaning_media_dlg"></div>
        <div class="invisible-buttons action-buttons-anchor w-100">
          <iframe th:src="${media.sourceUrl}" allowfullscreen></iframe>
          <button type="button" class="btn badge badge-primary align-bottom"
                  th:title="#{common.edit}"
                  data-toggle="modal"
                  th:data-target="${'#editMeaningMediaDlg_' + lexeme.lexemeId + '_' + media.id}"
                  sec:authorize="#vars.lexeme.meaning.crudGrant">
            <i class="fa fa-edit" aria-hidden="true"></i>
          </button>
          <button type="button" class="btn badge badge-warning align-bottom"
                  th:title="#{lex.delete.media}"
                  data-op-code="meaning_media"
                  th:data-id="${media.id}"
                  th:data-callback="${@viewUtil.composeFunction('loadFullLexemeDetails', lexeme.lexemeId, lexeme.levels)}"
                  data-toggle="delete-confirm"
                  sec:authorize="#vars.lexeme.meaning.crudGrant">
            <i class="fa fa-remove" aria-hidden="true"></i>
          </button>
        </div>
      </th:block>
    </div>
  </div>
  <div class="row" th:if="${not #lists.isEmpty(lexeme.meaning.freeforms)}" th:fragment="meaning_freeform">
    <hr/>
    <div class="col pr-0 col-w13rem">
      <span class="lbl" th:text="#{lex.meaning.freeforms}">Tähenduse atribuudid</span>
      <button type="button" class="btn badge badge-success float-right mr-4"
              th:title="#{common.add.new}"
              data-toggle="modal"
              th:data-target="${'#addMeaningFreeformDlg_' + lexeme.lexemeId}"
              sec:authorize="#vars.lexeme.meaning.crudGrant">
        <i class="fa fa-plus" aria-hidden="true"></i>
      </button>
    </div>
    <div class="col pl-0">
      <div class="orderable" data-op-code="meaning_freeform">
        <div th:each="freeform,freeformIter : ${lexeme.meaning.freeforms}"
             th:data-id="${freeform.id}"
             th:data-orderby="${freeform.orderBy}">
          <div th:replace="lexdialog :: edit_meaning_freeform_dlg"></div>
          <div th:replace="lexdialog :: add_meaning_freeform_source_link_dlg"></div>
          <div class="action-column">
            <th:block th:replace="common :: ordering_buttons(${freeformIter})" sec:authorize="#vars.lexeme.meaning.crudGrant"></th:block>
          </div>
          <div class="invisible-buttons action-buttons-anchor mw-80">
            <span th:text="${freeform.freeformTypeValue}" class="text-monospace pr-3"></span>
            <span th:utext="${freeform.valuePrese}"></span>
            <span th:text="'(' + #{'boolean.public.' + ${freeform.public}} + ')'" data-plugin="complexityAndPublicity" class="ctxt"></span>
            <div class="action-buttons-3">
              <button type="button" class="btn badge badge-primary"
                      th:title="#{common.edit}"
                      data-toggle="modal"
                      th:data-target="${'#editMeaningFreeformDlg_' + lexeme.lexemeId + '_' + freeform.id}"
                      sec:authorize="#vars.lexeme.meaning.crudGrant">
                <i class="fa fa-edit" aria-hidden="true"></i>
              </button>
              <button type="button" class="btn badge badge-success hidden"
                      th:title="#{common.add.source.link}"
                      data-toggle="modal"
                      th:data-target="${'#addMeaningFreeformSourceLinkDlg_' + lexeme.lexemeId + '_' + freeform.id}"
                      sec:authorize="#vars.lexeme.meaning.crudGrant">
                <i class="fa fa-external-link" aria-hidden="true"></i>
              </button>
              <button type="button" class="btn badge badge-warning"
                      data-op-code="meaning_freeform"
                      th:data-id="${freeform.id}"
                      th:data-callback="${@viewUtil.composeFunction('loadFullLexemeDetails', lexeme.lexemeId, lexeme.levels)}"
                      data-toggle="delete-confirm"
                      data-placement="right"
                      sec:authorize="#vars.lexeme.meaning.crudGrant">
                <i class="fa fa-remove" aria-hidden="true"></i>
              </button>
            </div>
          </div>
          <div class="hidden-buttons">
            <th:block th:unless="${#lists.isEmpty(freeform.sourceLinks)}">
              <div class="orderable" data-op-code="freeform_source_link">
                <div th:each="sourceLink,sourceLinkIter : ${freeform.sourceLinks}"
                     th:data-id="${sourceLink.id}"
                     th:data-orderby="${sourceLink.orderBy}"
                     class="ml-4" style="position: relative;">
                  <div th:replace="lexdialog :: edit_meaning_freeform_source_link_dlg"></div>
                  <div style="position: absolute; display: list-item;"></div>
                  <div class="action-column">
                    <th:block th:replace="common :: ordering_buttons(${sourceLinkIter})" sec:authorize="#vars.lexeme.meaning.crudGrant"></th:block>
                  </div>
                  <div class="invisible-buttons action-buttons-anchor mw-80">
                    <span>
                      <a th:href="@{'/freeform_source_link:' + ${sourceLink.id}}" th:text="${sourceLink.sourceName}"></a>
                      <span th:if="${sourceLink.name != null}" th:text="${sourceLink.name}"></span>
                      <button type="button" class="btn badge badge-primary"
                              th:title="#{common.edit}"
                              data-toggle="modal"
                              th:data-target="${'#editMeaningFreeformSourceLinkDlg_' + sourceLink.id}"
                              sec:authorize="#vars.lexeme.meaning.crudGrant">
                        <i class="fa fa-edit" aria-hidden="true"></i>
                      </button>
                      <button type="button" class="btn badge badge-warning"
                              data-op-code="freeform_source_link"
                              th:data-id="${sourceLink.id}"
                              th:data-callback="${@viewUtil.composeFunction('loadFullLexemeDetails', lexeme.lexemeId, lexeme.levels)}"
                              data-toggle="delete-confirm"
                              data-placement="right"
                              sec:authorize="#vars.lexeme.meaning.crudGrant">
                        <i class="fa fa-remove" aria-hidden="true"></i>
                      </button>
                    </span>
                  </div>
                </div>
              </div>
            </th:block>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="row" th:if="${not #lists.isEmpty(lexeme.meaning.viewRelations)}" th:fragment="meaning_relation">
    <hr/>
    <div class="col pr-0 col-w13rem">
      <span class="lbl" th:text="#{lex.meaning.relation}">Tähenduse seos</span>
      <button type="button" class="btn badge badge-success float-right mr-4"
              th:title="#{common.add.new}"
              data-toggle="modal"
              th:data-target="${'#addMeaningRelationDlg_' + lexeme.lexemeId}"
              sec:authorize="#vars.lexeme.meaning.crudGrant">
        <i class="fa fa-plus" aria-hidden="true"></i>
      </button>
    </div>
    <div class="col pl-0">
      <table class="table table-striped">
        <tr th:each="relations : ${lexeme.meaning.viewRelations}" th:with="relSample = ${relations.get(0)}" class="hidden-buttons">
          <td class="pr-3" th:if="${userProfile.showMeaningRelationMeaningId}">
            <span class="text-monospace" th:text="${relSample.meaningId}"></span>
          </td>
          <td class="pr-3">
            <th:block th:each="relation, relIter : ${relations}">
              <button
                type="button"
                class="btn btn-link btn-xs"
                th:data-id="${relation.wordId}"
                name="details-btn"
                data-behaviour="replace"
                data-plugin="contextmenu, loadDetailsPlugin"
                data-contextmenu:compare="Ava uues paneelis">
                <span th:utext="${@viewUtil.getWordValueMarkup(relation)}"></span>
                <span th:text="${'(' + @viewUtil.getLangIso2(relation.wordLang) + ')'}"></span>
                <th:block th:each="datasetCode, dsIter : ${relation.datasetCodes}">
                  <span th:if="${dsIter.first}">[</span>
                  <span th:text="${datasetCode}"></span>
                  <span th:unless="${dsIter.last}">,</span>
                  <span th:if="${dsIter.last}">]</span>
                </th:block>
                <th:block th:unless="${#strings.isEmpty(relation.wordAspectCode)}">
                  <span th:text="${'[' + relation.wordAspectCode + ']'}"></span>
                </th:block>
                <th:block th:each="valueStateCode, vsIter : ${relation.lexemeValueStateCodes}">
                  <span th:if="${vsIter.first}">[</span>
                  <span th:text="${valueStateCode}"></span>
                  <span th:unless="${vsIter.last}">,</span>
                  <span th:if="${vsIter.last}">]</span>
                </th:block>
                <th:block th:each="registerCode, regIter : ${relation.lexemeRegisterCodes}">
                  <span th:if="${regIter.first}">[</span>
                  <span th:text="${registerCode}"></span>
                  <span th:unless="${regIter.last}">,</span>
                  <span th:if="${regIter.last}">]</span>
                </th:block>
                <th:block th:each="government, govIter : ${relation.lexemeGovernmentValues}">
                  <span th:if="${govIter.first}">[</span>
                  <span th:utext="${government}"></span>
                  <span th:unless="${govIter.last}">,</span>
                  <span th:if="${govIter.last}">]</span>
                </th:block>
              </button>
              <span th:unless="${relIter.last}">,</span>
            </th:block>
          </td>
          <td>
            <span th:text="${relSample.relTypeLabel}"></span>
          </td>
          <td>
            <button type="button" class="btn badge badge-warning"
                    data-placement="right"
                    data-op-code="meaning_relation"
                    th:data-id="${relSample.id}"
                    th:data-callback="${@viewUtil.composeFunction('loadFullLexemeDetails', lexeme.lexemeId, lexeme.levels)}"
                    data-toggle="delete-confirm"
                    sec:authorize="#vars.lexeme.meaning.crudGrant">
              <i class="fa fa-remove" aria-hidden="true"></i>
            </button>
          </td>
        </tr>
      </table>
    </div>
  </div>
  <div class="row" th:if="${not #lists.isEmpty(lexeme.governments)}" th:fragment="government">
    <hr/>
    <div class="col pr-0 col-w13rem">
      <span class="lbl" th:text="#{lex.government}">Rektsioon</span>
      <button type="button" class="btn badge badge-success float-right mr-4"
              th:title="#{common.add.new}"
              data-toggle="modal"
              th:data-target="${'#addGovernmentDlg_' + lexeme.lexemeId}"
              sec:authorize="#vars.lexeme.crudGrant">
        <i class="fa fa-plus" aria-hidden="true"></i>
      </button>
    </div>
    <div class="col pl-0">
      <div class="orderable" data-op-code="government">
        <div th:each="government, itemIter : ${lexeme.governments}"
             th:data-id="${government.id}"
             th:data-orderby="${government.orderBy}">
          <div th:replace="lexdialog :: edit_government_dlg"></div>
          <div class="row">
            <div class="action-column">
              <th:block th:replace="common :: ordering_buttons(${itemIter})" sec:authorize="#vars.lexeme.meaning.crudGrant"></th:block>
            </div>
            <div class="col hidden-buttons">
              <div class="action-buttons-anchor">
                <span class="pr-3" th:text="${government.value}"></span>
                <span class="ctxt" th:text="'(' + #{'enum.complexity.' + ${government.complexity}} + ')'" data-plugin="complexityAndPublicity"></span>
                <div class="action-buttons-2">
                  <button type="button" class="btn badge badge-primary"
                          th:title="#{common.edit}"
                          data-toggle="modal"
                          th:data-target="${'#editGovernmentDlg_' + lexeme.lexemeId + '_' + government.id}"
                          sec:authorize="#vars.lexeme.crudGrant">
                    <i class="fa fa-edit" aria-hidden="true"></i>
                  </button>
                  <button type="button" class="btn badge badge-warning"
                          data-op-code="government"
                          th:data-id="${government.id}"
                          th:data-callback="${@viewUtil.composeFunction('loadFullLexemeDetails', lexeme.lexemeId, lexeme.levels)}"
                          data-toggle="delete-confirm"
                          data-placement="right"
                          sec:authorize="#vars.lexeme.crudGrant">
                    <i class="fa fa-remove" aria-hidden="true"></i>
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="row" th:if="${not #lists.isEmpty(lexeme.usages)}" th:fragment="usage">
    <hr/>
    <div class="col pr-0 col-w13rem">
      <span class="lbl" th:text="#{lex.usage}">Kasutusnäide</span>
      <button type="button" class="btn badge badge-success float-right mr-4"
              th:title="#{common.add.new}"
              data-toggle="modal"
              th:data-target="${'#addUsageDlg_' + lexeme.lexemeId}"
              sec:authorize="#vars.lexeme.crudGrant">
        <i class="fa fa-plus" aria-hidden="true"></i>
      </button>
    </div>
    <div class="col pl-0">
      <th:block th:if="${not #lists.isEmpty(lexeme.usages)}">
        <div class="orderable" data-op-code="usage">
          <div th:each="usage,usageIter : ${lexeme.usages}"
               th:data-id="${usage.id}"
               th:data-orderby="${usage.orderBy}">
            <div th:replace="lexdialog :: edit_usage_dlg"></div>
            <div th:replace="lexdialog :: add_usage_member_dlg"></div>
            <div th:replace="lexdialog :: add_usage_source_link_dlg"></div>
            <div class="action-column">
              <th:block th:replace="common :: ordering_buttons(${usageIter})" sec:authorize="#vars.usage.crudGrant"></th:block>
            </div>
            <div class="invisible-buttons action-buttons-anchor mw-80">
              <span th:utext="${usage.valuePrese}"></span>
              <span class="ctxt" th:text="'(' + #{'enum.complexity.' + ${usage.complexity}} + ')'" data-plugin="complexityAndPublicity"></span>
              <span class="ctxt" th:text="'(' + #{'boolean.public.' + ${usage.public}} + ')'" th:if="${usage.crudGrant}" data-plugin="complexityAndPublicity"></span>
              <span class="show-on-mouseover" sec:authorize="#vars.usage.crudGrant">
                <button type="button" class="btn badge badge-success hidden"
                        th:title="#{common.add.source.link}"
                        data-toggle="modal"
                        th:data-target="${'#addUsageSourceLinkDlg_' + usage.id}"
                        sec:authorize="#vars.usage.crudGrant">
                  <i class="fa fa-external-link" aria-hidden="true"></i>
                </button>
              </span>
              <div class="action-buttons-3">
                <button type="button" class="btn badge badge-primary"
                        th:title="#{common.edit}"
                        data-toggle="modal"
                        th:data-target="${'#editUsageDlg_' + lexeme.lexemeId + '_' + usage.id}"
                        sec:authorize="#vars.usage.crudGrant">
                  <i class="fa fa-edit" aria-hidden="true"></i>
                </button>
                <button type="button" class="btn badge badge-success"
                        th:title="#{lex.add.usage.member}"
                        data-toggle="modal"
                        th:data-target="${'#addUsageMemberDlg_' + lexeme.lexemeId + '_' + usage.id}"
                        sec:authorize="#vars.usage.crudGrant">
                  <i class="fa fa-plus" aria-hidden="true"></i>
                </button>
                <button type="button" class="btn badge badge-warning"
                        data-op-code="usage"
                        th:data-id="${usage.id}"
                        th:data-callback="${@viewUtil.composeFunction('loadFullLexemeDetails', lexeme.lexemeId, lexeme.levels)}"
                        data-toggle="delete-confirm"
                        data-placement="right"
                        sec:authorize="#vars.usage.crudGrant">
                  <i class="fa fa-remove" aria-hidden="true"></i>
                </button>
              </div>
            </div>
            <div class="hidden-buttons">
              <th:block th:unless="${#lists.isEmpty(usage.sourceLinks)}">
                <div class="orderable" data-op-code="usage_source_link">
                  <div th:each="sourceLink,sourceLinkIter : ${usage.sourceLinks}"
                       th:data-id="${sourceLink.id}"
                       th:data-orderby="${sourceLink.orderBy}"
                       class="ml-4" style="position: relative;">
                    <div th:replace="lexdialog :: edit_usage_source_link_dlg"></div>
                    <div style="position: absolute; display: list-item;"></div>
                    <div class="action-column">
                      <th:block th:replace="common :: ordering_buttons(${sourceLinkIter})" sec:authorize="#vars.usage.crudGrant"></th:block>
                    </div>
                    <div class="invisible-buttons action-buttons-anchor mw-80">
                      <span>
                        <a th:href="@{'/usage_source_link:' + ${sourceLink.id}}" th:text="${sourceLink.sourceName}"></a>
                        <span th:if="${sourceLink.name != null}" th:text="${sourceLink.name}"></span>
                        <button type="button" class="btn badge badge-primary"
                                th:title="#{common.edit}"
                                data-toggle="modal"
                                th:data-target="${'#editUsageSourceLinkDlg_' + sourceLink.id}"
                                sec:authorize="#vars.usage.crudGrant">
                          <i class="fa fa-edit" aria-hidden="true"></i>
                        </button>
                        <button type="button" class="btn badge badge-warning"
                                data-op-code="usage_source_link"
                                th:data-id="${sourceLink.id}"
                                th:data-callback="${@viewUtil.composeFunction('loadFullLexemeDetails', lexeme.lexemeId, lexeme.levels)}"
                                data-toggle="delete-confirm"
                                data-placement="right"
                                sec:authorize="#vars.usage.crudGrant">
                          <i class="fa fa-remove" aria-hidden="true"></i>
                        </button>
                      </span>
                    </div>
                  </div>
                </div>
              </th:block>
            </div>
            <div th:if="${not #lists.isEmpty(usage.translations)}" class="col pl-0">
              <div>
                <span class="lbl" th:text="#{lex.usage.translation}">Kasutusnäite tõlge</span>
              </div>
              <div class="row" th:each="usageTranslation : ${usage.translations}">
                <div th:replace="lexdialog :: edit_usage_translation_dlg"></div>
                <div class="col hidden-buttons ml-2">
                  <!-- intentional generic lexeme perm on translations -->
                  <div class="action-buttons-anchor">
                    <span th:utext="${usageTranslation.valuePrese}"></span>
                    <span th:text="|(${@viewUtil.getLangIso2(usageTranslation.lang)})|"></span>
                    <div class="action-buttons-3">
                      <button type="button" class="btn badge badge-primary"
                              th:title="#{common.edit}"
                              data-toggle="modal"
                              th:data-target="${'#editUsageTranslationDlg_' + lexeme.lexemeId + '_' + usage.id + '_' + usageTranslation.id}"
                              sec:authorize="#vars.lexeme.crudGrant">
                        <i class="fa fa-edit" aria-hidden="true"></i>
                      </button>
                      <button type="button" class="btn badge badge-success"
                              th:title="#{common.add.new}"
                              data-toggle="modal"
                              th:data-target="${'#addUsageMemberDlg_' + lexeme.lexemeId + '_' + usage.id}"
                              sec:authorize="#vars.lexeme.crudGrant">
                        <i class="fa fa-plus" aria-hidden="true"></i>
                      </button>
                      <button type="button" class="btn badge badge-warning"
                              data-op-code="usage_translation"
                              th:data-id="${usageTranslation.id}"
                              th:data-callback="${@viewUtil.composeFunction('loadFullLexemeDetails', lexeme.lexemeId, lexeme.levels)}"
                              data-toggle="delete-confirm"
                              data-placement="right"
                              sec:authorize="#vars.lexeme.crudGrant">
                        <i class="fa fa-remove" aria-hidden="true"></i>
                      </button>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div th:if="${not #lists.isEmpty(usage.definitions)}" class="col pl-0">
              <div>
                <span class="lbl" th:text="#{lex.usage.definition}">Seletus</span>
              </div>
              <div class="row" th:each="usageDefinition : ${usage.definitions}">
                <div th:replace="lexdialog :: edit_usage_definition_dlg"></div>
                <div class="col hidden-buttons ml-2">
                  <div class="action-buttons-anchor">
                    <span th:utext="${usageDefinition.valuePrese}"></span>
                    <div class="action-buttons-3">
                      <button type="button" class="btn badge badge-primary"
                              th:title="#{common.edit}"
                              data-toggle="modal"
                              th:data-target="${'#editUsageDefinitionDlg_' + lexeme.lexemeId + '_' + usage.id + '_' + usageDefinition.id}"
                              sec:authorize="#vars.usage.crudGrant">
                        <i class="fa fa-edit" aria-hidden="true"></i>
                      </button>
                      <button type="button" class="btn badge badge-success"
                              th:title="#{common.add.new}"
                              data-toggle="modal"
                              th:data-target="${'#addUsageMemberDlg_' + lexeme.lexemeId + '_' + usage.id}"
                              sec:authorize="#vars.usage.crudGrant">
                        <i class="fa fa-plus" aria-hidden="true"></i>
                      </button>
                      <button type="button" class="btn badge badge-warning"
                              data-op-code="usage_definition"
                              th:data-id="${usageDefinition.id}"
                              th:data-callback="${@viewUtil.composeFunction('loadFullLexemeDetails', lexeme.lexemeId, lexeme.levels)}"
                              data-toggle="delete-confirm"
                              data-placement="right"
                              sec:authorize="#vars.usage.crudGrant">
                        <i class="fa fa-remove" aria-hidden="true"></i>
                      </button>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="w-50" th:unless="${usageIter.last}">
              <hr/>
            </div>
          </div>
        </div>
      </th:block>
    </div>
  </div>
  <div class="row" th:if="${not #lists.isEmpty(lexeme.noteLangGroups)}" th:fragment="lexeme_note">
    <hr/>
    <div class="col pr-0 col-w13rem">
      <span class="lbl" th:text="#{lex.lexeme.note}">Ilmiku märkus</span>
      <button type="button" class="btn badge badge-success float-right mr-4"
              th:title="#{common.add.new}"
              data-toggle="modal"
              th:data-target="${'#addLexemeNoteDlg_' + lexeme.lexemeId}"
              sec:authorize="#vars.lexeme.crudGrant">
        <i class="fa fa-plus" aria-hidden="true"></i>
      </button>
    </div>
    <div class="col pl-0">
      <th:block th:each="noteLangGroup : ${lexeme.noteLangGroups}">
        <div>
          <span th:text="${@viewUtil.getLangIso2(noteLangGroup.lang)}" class="mr-2"></span>
          <button name="lang-collapse-btn" type="button" class="btn badge badge-secondary btn-toggle"
                  th:data-callback="${@viewUtil.composeFunction('loadFullLexemeDetails', lexeme.lexemeId, lexeme.levels)}"
                  th:data-lang="${noteLangGroup.lang}"
                  th:title="${noteLangGroup.selected} ? #{common.hide.lang.group} : #{common.show.lang.group}"
                  data-plugin="langCollapsePlugin">
            <i th:class="${noteLangGroup.selected ? 'fa fa-angle-down' : 'fa fa-angle-right'}" aria-hidden="true"></i>
          </button>
        </div>
        <div th:if="${noteLangGroup.selected}" class="orderable" data-op-code="lexeme_note">
          <div th:each="note, itemIter: ${noteLangGroup.notes}"
               th:data-id="${note.id}"
               th:data-orderby="${note.orderBy}"
               class="ml-4" style="position: relative">
            <div th:replace="lexdialog :: edit_lexeme_note_dlg"></div>
            <div style="position: absolute; display: list-item;"></div>
            <div class="action-column">
              <th:block th:replace="common :: ordering_buttons(${itemIter})" sec:authorize="#vars.lexeme.crudGrant"></th:block>
            </div>
            <div class="invisible-buttons action-buttons-anchor mw-90">
              <span th:utext="${note.valuePrese}"></span>
              <span class="ctxt" th:text="'(' + #{'enum.complexity.' + ${note.complexity}} + ')'" data-plugin="complexityAndPublicity"></span>
              <span class="ctxt" th:text="'(' + #{'boolean.public.' + ${note.public}} + ')'" th:if="${lexeme.crudGrant}" data-plugin="complexityAndPublicity"></span>
              <div class="action-buttons-2">
                <button type="button" class="btn badge badge-primary"
                        th:title="#{common.edit}"
                        data-toggle="modal"
                        th:data-target="${'#editLexemeNoteDlg_' + lexeme.lexemeId + '_' + note.id}"
                        sec:authorize="#vars.lexeme.crudGrant">
                  <i class="fa fa-edit" aria-hidden="true"></i>
                </button>
                <button type="button" class="btn badge badge-warning"
                        data-op-code="lexeme_note"
                        th:data-id="${note.id}"
                        th:data-callback="${@viewUtil.composeFunction('loadFullLexemeDetails', lexeme.lexemeId, lexeme.levels)}"
                        data-toggle="delete-confirm"
                        data-placement="right"
                        sec:authorize="#vars.lexeme.crudGrant">
                  <i class="fa fa-remove" aria-hidden="true"></i>
                </button>
              </div>
            </div>
          </div>
        </div>
      </th:block>
    </div>
  </div>
  <div class="row" th:if="${not #lists.isEmpty(lexeme.meaning.noteLangGroups)}" th:fragment="meaning_note">
    <hr/>
    <div class="col pr-0 col-w13rem">
      <span class="lbl" th:text="#{lex.meaning.note}">Tähenduse märkus</span>
      <button type="button" class="btn badge badge-success float-right mr-4"
              th:title="#{common.add.new}"
              data-toggle="modal"
              th:data-target="${'#addMeaningNoteDlg_' + lexeme.lexemeId}"
              sec:authorize="#vars.lexeme.meaning.crudGrant">
        <i class="fa fa-plus" aria-hidden="true"></i>
      </button>
    </div>
    <div class="col pl-0">
      <th:block th:each="noteLangGroup : ${lexeme.meaning.noteLangGroups}">
        <div>
          <span th:text="${@viewUtil.getLangIso2(noteLangGroup.lang)}" class="mr-2"></span>
          <button name="lang-collapse-btn" type="button" class="btn badge badge-secondary btn-toggle"
                  th:data-callback="${@viewUtil.composeFunction('loadFullLexemeDetails', lexeme.lexemeId, lexeme.levels)}"
                  th:data-lang="${noteLangGroup.lang}"
                  th:title="${noteLangGroup.selected} ? #{common.hide.lang.group} : #{common.show.lang.group}"
                  data-plugin="langCollapsePlugin">
            <i th:class="${noteLangGroup.selected ? 'fa fa-angle-down' : 'fa fa-angle-right'}" aria-hidden="true"></i>
          </button>
        </div>
        <div th:if="${noteLangGroup.selected}" class="orderable" data-op-code="meaning_note">
          <div class="ml-4" style="position: relative;" th:each="note, itemIter: ${noteLangGroup.notes}"
               th:data-id="${note.id}"
               th:data-orderby="${note.orderBy}">
            <div th:replace="lexdialog :: edit_meaning_note_dlg"></div>
            <div style="position: absolute; display: list-item;"></div>
            <div class="action-column">
              <th:block th:replace="common :: ordering_buttons(${itemIter})" sec:authorize="#vars.lexeme.meaning.crudGrant"></th:block>
            </div>
            <div class="invisible-buttons action-buttons-anchor mw-90">
              <span th:utext="${note.valuePrese}"></span>
              <span class="ctxt" th:text="'(' + #{'enum.complexity.' + ${note.complexity}} + ')'" th:if="${lexeme.meaning.crudGrant}" data-plugin="complexityAndPublicity"></span>
              <span class="ctxt" th:text="'(' + #{'boolean.public.' + ${note.public}} + ')'" th:if="${lexeme.meaning.crudGrant}" data-plugin="complexityAndPublicity"></span>
              <div class="action-buttons-2">
                <button type="button" class="btn badge badge-primary"
                        th:title="#{common.edit}"
                        data-toggle="modal"
                        th:data-target="${'#editMeaningNoteDlg_' + lexeme.lexemeId + '_' + note.id}"
                        sec:authorize="#vars.lexeme.meaning.crudGrant">
                  <i class="fa fa-edit" aria-hidden="true"></i>
                </button>
                <button type="button" class="btn badge badge-warning"
                        data-op-code="meaning_note"
                        th:data-id="${note.id}"
                        th:data-callback="${@viewUtil.composeFunction('loadFullLexemeDetails', lexeme.lexemeId, lexeme.levels)}"
                        data-toggle="delete-confirm"
                        data-placement="right"
                        sec:authorize="#vars.lexeme.meaning.crudGrant">
                  <i class="fa fa-remove" aria-hidden="true"></i>
                </button>
              </div>
            </div>
          </div>
        </div>
      </th:block>
    </div>
  </div>
  <div class="row" th:if="${not #lists.isEmpty(lexeme.freeforms)}" th:fragment="lexeme_freeform">
    <hr/>
    <div class="col pr-0 col-w13rem">
      <span class="lbl" th:text="#{lex.lexeme.freeforms}">Ilmiku atribuudid</span>
      <button type="button" class="btn badge badge-success float-right mr-4"
              th:title="#{common.add.new}"
              data-toggle="modal"
              th:data-target="${'#addLexemeFreeformDlg_' + lexeme.lexemeId}"
              sec:authorize="#vars.lexeme.crudGrant">
        <i class="fa fa-plus" aria-hidden="true"></i>
      </button>
    </div>
    <div class="col pl-0">
      <div class="orderable" data-op-code="lexeme_freeform">
        <div th:each="freeform,freeformIter : ${lexeme.freeforms}"
             th:data-id="${freeform.id}"
             th:data-orderby="${freeform.orderBy}"
             class="ml-4" style="position: relative">
          <div th:replace="lexdialog :: edit_lexeme_freeform_dlg"></div>
          <div th:replace="lexdialog :: add_lexeme_freeform_source_link_dlg"></div>
          <div class="action-column">
            <th:block th:replace="common :: ordering_buttons(${freeformIter})" sec:authorize="#vars.lexeme.crudGrant"></th:block>
          </div>
          <div class="invisible-buttons action-buttons-anchor mw-80">
            <span th:text="${freeform.freeformTypeValue}" class="text-monospace pr-3"></span>
            <span th:utext="${freeform.valuePrese}"></span>
            <span class="ctxt" th:text="'(' + #{'boolean.public.' + ${freeform.public}} + ')'" data-plugin="complexityAndPublicity"></span>
            <div class="action-buttons-3">
              <button type="button" class="btn badge badge-primary"
                      th:title="#{common.edit}"
                      data-toggle="modal"
                      th:data-target="${'#editLexemeFreeformDlg_' + lexeme.lexemeId + '_' + freeform.id}"
                      sec:authorize="#vars.lexeme.crudGrant">
                <i class="fa fa-edit" aria-hidden="true"></i>
              </button>
              <button type="button" class="btn badge badge-success hidden"
                      th:title="#{common.add.source.link}"
                      data-toggle="modal"
                      th:data-target="${'#addLexemeFreeformSourceLinkDlg_' + lexeme.lexemeId + '_' + freeform.id}"
                      sec:authorize="#vars.lexeme.crudGrant">
                <i class="fa fa-external-link" aria-hidden="true"></i>
              </button>
              <button type="button" class="btn badge badge-warning"
                      data-op-code="lexeme_freeform"
                      th:data-id="${freeform.id}"
                      th:data-callback="${@viewUtil.composeFunction('loadFullLexemeDetails', lexeme.lexemeId, lexeme.levels)}"
                      data-toggle="delete-confirm"
                      data-placement="right"
                      sec:authorize="#vars.lexeme.crudGrant">
                <i class="fa fa-remove" aria-hidden="true"></i>
              </button>
            </div>
          </div>
          <div class="hidden-buttons">
            <th:block th:unless="${#lists.isEmpty(freeform.sourceLinks)}">
              <div class="orderable" data-op-code="freeform_source_link">
                <div th:each="sourceLink,sourceLinkIter : ${freeform.sourceLinks}"
                     th:data-id="${sourceLink.id}"
                     th:data-orderby="${sourceLink.orderBy}"
                     class="ml-4" style="position: relative;">
                  <div th:replace="lexdialog :: edit_lexeme_freeform_source_link_dlg"></div>
                  <div style="position: absolute; display: list-item;"></div>
                  <div class="action-column">
                    <th:block th:replace="common :: ordering_buttons(${sourceLinkIter})" sec:authorize="#vars.lexeme.crudGrant"></th:block>
                  </div>
                  <div class="invisible-buttons action-buttons-anchor mw-80">
                    <span>
                      <a th:href="@{'/freeform_source_link:' + ${sourceLink.id}}" th:text="${sourceLink.sourceName}"></a>
                      <span th:if="${sourceLink.name != null}" th:text="${sourceLink.name}"></span>
                      <button type="button" class="btn badge badge-primary"
                              th:title="#{common.edit}"
                              data-toggle="modal"
                              th:data-target="${'#editLexemeFreeformSourceLinkDlg_' + sourceLink.id}"
                              sec:authorize="#vars.lexeme.crudGrant">
                        <i class="fa fa-edit" aria-hidden="true"></i>
                      </button>
                      <button type="button" class="btn badge badge-warning"
                              data-op-code="freeform_source_link"
                              th:data-id="${sourceLink.id}"
                              th:data-callback="${@viewUtil.composeFunction('loadFullLexemeDetails', lexeme.lexemeId, lexeme.levels)}"
                              data-toggle="delete-confirm"
                              data-placement="right"
                              sec:authorize="#vars.lexeme.crudGrant">
                        <i class="fa fa-remove" aria-hidden="true"></i>
                      </button>
                    </span>
                  </div>
                </div>
              </div>
            </th:block>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="row" th:if="${not #lists.isEmpty(lexeme.lexemeRelations)}" th:fragment="lexeme_relation">
    <hr/>
    <div class="col pr-0 col-w13rem">
      <span class="lbl" th:text="#{lex.lexeme.relation}">Ilmiku seos</span>
      <button type="button" class="btn badge badge-success float-right mr-4"
              title="Lisa seos"
              data-toggle="modal"
              th:data-target="${'#addLexemeRelationDlg_' + lexeme.lexemeId}"
              sec:authorize="#vars.lexeme.crudGrant">
        <i class="fa fa-plus" aria-hidden="true"></i>
      </button>
    </div>
    <div class="col pl-0">
      <table class="orderable" data-op-code="lexeme_relation" th:if="${not #lists.isEmpty(lexeme.lexemeRelations)}">
        <tr th:each="relation, itemIter : ${lexeme.lexemeRelations}" th:data-id="${relation.id}" th:data-orderby="${relation.orderBy}">
          <td class="action-column">
            <th:block th:replace="common :: ordering_buttons(${itemIter})" sec:authorize="#vars.lexeme.crudGrant"></th:block>
          </td>
          <td class="pr-3 invisible-buttons">
            <button
              type="button"
              class="btn btn-link btn-xs"
              th:data-id="${relation.wordId}"
              name="details-btn"
              data-plugin="contextmenu, loadDetailsPlugin"
              data-contextmenu:compare="Ava uues paneelis"
              data-behaviour="replace">
              <span th:utext="${@viewUtil.getWordValueMarkup(relation) + ' (' + @viewUtil.getLangIso2(relation.wordLang) + ')'}"></span>
            </button>
            <button type="button" class="btn badge badge-warning"
                    data-op-code="lexeme_relation"
                    th:data-id="${relation.id}"
                    th:data-callback="${@viewUtil.composeFunction('loadFullLexemeDetails', lexeme.lexemeId, lexeme.levels)}"
                    data-toggle="delete-confirm"
                    data-placement="left"
                    sec:authorize="#vars.lexeme.crudGrant">
              <i class="fa fa-remove" aria-hidden="true"></i>
            </button>
          </td>
          <td class="invisible-buttons">
            <span th:text="${relation.relTypeLabel}"></span>
          </td>
        </tr>
      </table>
    </div>
  </div>
  <th:block th:fragment="collocation">
    <div th:id="|colloc_section_${lexeme.lexemeId}|">
      <th:block th:if="${lexeme.collocationsExist}">
        <div class="row">
          <hr/>
          <div class="col pr-0 col-w13rem">
            <span class="lbl" th:text="#{lex.collocations}">Kollokatsioonid</span>
          </div>
          <div class="col pl-0">
            <th:block th:unless="${sessionBean.lexemeCollocExpanded}">
              <button class="btn badge badge-light"
                      data-plugin="lexemeCollocExpandPlugin"
                      th:data-callback="${@viewUtil.composeFunction('loadFullLexemeDetails', lexeme.lexemeId, lexeme.levels)}">
                <i class="fa fa-ellipsis-h"></i>
              </button>
            </th:block>
            <th:block th:if="${sessionBean.lexemeCollocExpanded}">
              <button class="btn badge badge-light"
                      data-plugin="lexemeCollocExpandPlugin"
                      th:data-callback="${@viewUtil.composeFunction('loadFullLexemeDetails', lexeme.lexemeId, lexeme.levels)}">
                <i class="fa fa-times"></i>
              </button>
            </th:block>
          </div>
        </div>
        <th:block th:if="${sessionBean.lexemeCollocExpanded}">
          <div class="mt-2">
            <th:block th:replace="lexcomp :: primary_colloc"></th:block>
            <th:block th:replace="lexcomp :: secondary_colloc"></th:block>
            <th:block th:replace="lexcomp :: colloc_members"></th:block>
          </div>
        </th:block>
      </th:block>
    </div>
  </th:block>
  <th:block th:fragment="primary_colloc">
    <div class="mt-2" th:if="${not #lists.isEmpty(lexeme.primaryCollocations)}">
      <th:block th:each="collocPosGr : ${lexeme.primaryCollocations}">
        <h3 th:text="${collocPosGr.posGroupValue}"></h3>
        <th:block th:each="collocRelGr : ${collocPosGr.relGroups}">
          <h5 th:text="${collocRelGr.relGroupValue}"></h5>
          <div class="orderable" data-op-code="colloc">
            <table class="table table-sm">
              <tr th:each="colloc, collocIter : ${collocRelGr.collocations}"
                  th:data-id="${colloc.wordId}"
                  th:data-orderby="${colloc.groupOrder}">
                <th:block th:replace="lexcomp :: colloc_row"></th:block>
              </tr>
            </table>
          </div>
        </th:block>
      </th:block>
    </div>
  </th:block>
  <th:block th:fragment="secondary_colloc">
    <div class="mt-2" th:if="${not #lists.isEmpty(lexeme.secondaryCollocations)}">
      <h3 th:text="#{lex.collocation.secondary}">Klassifitseerimata</h3>
      <div class="orderable" data-op-code="colloc">
        <table class="table table-sm">
          <tr th:each="colloc, collocIter : ${lexeme.secondaryCollocations}"
              th:data-id="${colloc.wordId}"
              th:data-orderby="${colloc.groupOrder}">
            <th:block th:replace="lexcomp :: colloc_row"></th:block>
          </tr>
        </table>
      </div>
    </div>
  </th:block>
  <th:block th:fragment="colloc_row">
    <td class="col-3">
      <button
        type="button"
        class="btn btn-link p-0"
        th:data-id="${colloc.wordId}"
        name="details-btn"
        data-plugin="contextmenu, loadDetailsPlugin"
        data-contextmenu:compare="Ava uues paneelis"
        data-behaviour="replace">
        <span th:text="${colloc.wordValue}"></span>
      </button>
    </td>
    <td>
      <th:block th:each="collocMember : ${colloc.members}">
        <div th:if="${lexeme.wordId != collocMember.wordId}" class="p-0">
          <button
            type="button"
            class="btn btn-link p-0"
            th:data-id="${collocMember.wordId}"
            name="details-btn"
            data-plugin="contextmenu, loadDetailsPlugin"
            data-contextmenu:compare="Ava uues paneelis"
            data-behaviour="replace">
            <span th:text="${collocMember.wordValue}"></span>
          </button>
          <span th:text="${collocMember.weight}" class="small text-muted ml-2 mt-2"></span>
        </div>
      </th:block>
    </td>
    <td>
      <div th:if="${not #lists.isEmpty(colloc.usages)}">
        <div th:each="usage : ${colloc.usages}">
          <i><span th:text="${usage.valuePrese}"></span></i>
        </div>
      </div>
    </td>
    <td class="hidden-buttons" width="70px">
      <button type="button"
              th:hidden="${collocIter.first}"
              th:title="#{common.update.ordering}"
              data-plugin="changeItemOrderingPlugin"
              class="btn badge badge-secondary order-up" >
        <i class="fa fa-arrow-up" aria-hidden="true"></i>
      </button>
      <button type="button"
              th:hidden="${collocIter.last}"
              th:title="#{common.update.ordering}" 
              data-plugin="changeItemOrderingPlugin"
              class="btn badge badge-secondary order-down" >
        <i class="fa fa-arrow-down" aria-hidden="true"></i>
      </button>
      <button type="button"
              data-op-code="colloc"
              th:data-id="${colloc.wordId}"
              th:data-callback="${@viewUtil.composeFunction('loadFullLexemeDetails', lexeme.lexemeId, lexeme.levels)}"
              data-toggle="delete-confirm"
              data-placement="right"
              sec:authorize="#vars.lexeme.crudGrant"
              class="btn badge badge-warning">
        <i class="fa fa-remove" aria-hidden="true"></i>
      </button>
    </td>
  </th:block>
  <th:block th:fragment="colloc_members">
    <div class="row" th:if="${not #lists.isEmpty(lexeme.collocationMembers)}">
      <hr/>
      <div class="col pr-0 col-w13rem">
        <span class="lbl" th:text="#{lex.collocation.members}">Kollokatsiooni liikmed</span>
      </div>
      <div class="col pl-0">
        <th:block th:each="collocMember : ${lexeme.collocationMembers}">
          <div class="p-0">
            <button
              type="button"
              class="btn btn-link p-0"
              th:data-id="${collocMember.wordId}"
              name="details-btn"
              data-plugin="contextmenu, loadDetailsPlugin"
              data-contextmenu:compare="Ava uues paneelis"
              data-behaviour="replace">
              <span th:text="${collocMember.wordValue}"></span>
            </button>
            <span th:text="${collocMember.weight}" class="small text-muted ml-2 mt-2"></span>
          </div>
        </th:block>
      </div>
    </div>
  </th:block>
  <div class="border-top px-0 w-100 ekiAccordion__instance" th:fragment="meaning_forum">
    <div class="ekiAccordion__title">
      <span class="badge badge-data-exists" th:unless="${#lists.isEmpty(lexeme.meaning.forums)}">•</span>
      <span th:text="#{lex.meaning.forum}">Sisemärkus</span>
      <button type="button" class="ekiAccordion__add"
              th:title="#{common.add.new}"
              data-toggle="modal"
              th:data-target="${'#addMeaningForumDlg_' + lexeme.meaningId}"
              sec:authorize="#vars.userRoleData.crudRoleSelected">
        <i class="fa fa-plus" aria-hidden="true"></i>
      </button>
    </div>
    <div class="ekiAccordion__content overflow-auto">
      <div th:if="${#lists.isEmpty(lexeme.meaning.forums)}" th:text="#{common.no.content}">
        Sisu puudub...
      </div>
      <div th:each="forum,forumIter : ${lexeme.meaning.forums}">
        <div th:replace="lexdialog :: edit_meaning_forum_dlg"></div>
        <div class="col hidden-buttons pr-5" th:classappend="${forumIter.last ? '' : 'mb-3'}">
          <div class="action-buttons-anchor w-100">
            <span th:utext="${forum.valuePrese}"></span>
            <span class="ctxt" th:text="'[' + ${forum.modifiedBy} + ']'" th:if="${forum.modifiedBy != null}"></span>
            <span class="ctxt" th:text="'(' + ${#temporals.format(forum.modifiedOn, 'dd.MM.yyyy')} + ')'" th:if="${forum.modifiedOn != null}"></span>
            <div class="action-buttons-2">
              <button type="button" class="btn badge badge-primary"
                      th:title="#{common.edit}"
                      data-toggle="modal"
                      th:data-target="${'#editMeaningForumDlg_' + forum.id}"
                      sec:authorize="#vars.forum.crudGrant">
                <i class="fa fa-edit" aria-hidden="true"></i>
              </button>
              <button type="button" class="btn badge badge-warning"
                      th:data-id="${forum.id}"
                      data-op-code="meaning_forum"
                      data-toggle="delete-confirm"
                      data-placement="right"
                      sec:authorize="#vars.forum.crudGrant">
                <i class="fa fa-remove" aria-hidden="true"></i>
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</body>
</html>
