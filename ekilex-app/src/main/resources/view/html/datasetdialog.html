<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head></head>
<body>
  <div id="addDatasetDlg" class="modal" role="dialog" th:fragment="add_dataset_dlg">
    <div class="modal-dialog modal-lg" role="document">
      <div class="modal-content">
        <form id="addDatasetForm" th:action="@{/create_dictionary}" method="post" th:object="${datasetData}">
          <div class="modal-body">
            <div class="form-group row">
              <label class="col-md-2 col-form-label" th:text="#{dictionaries.dataset.code}">Sõnakogu kood</label>
              <input class="col-md-3 form-control required-field" maxlength="10" name="code"/>
              <small class="col-md-4 text-danger field-error" style="display: none"></small>
            </div>
            <div class="form-group row">
              <label class="col-md-2 col-form-label" th:text="#{dictionaries.dataset.name}">Sõnakogu nimi</label>
              <input class="col-md-6 form-control required-field" name="name"/>
            </div>
            <div class="form-group row">
              <label class="col-md-auto col-form-label" th:text="#{dictionaries.dataset.description}">Kirjeldus</label>
              <div class="col-md-12">
                <textarea class="form-control" rows="4" name="description"></textarea>
              </div>
            </div>

            <div class="form-group row">
              <label class="col-md-auto col-form-label" th:text="#{dictionaries.dataset.origins}">Päritolu</label>
              <div class="col-md-12">
                <select class="dataset-origin-select" data-live-search="true" th:title="#{dictionaries.dataset.select.origin}">
                  <option value=""></option>
                  <option th:each="origin : ${origins}"
                          th:value="${origin.code}" th:text="${origin.label != null ? origin.label : origin.code}"
                          />
                </select>
              </div>
            </div>

            <div class="form-group row">
              <label class="col-md-auto col-form-label" th:text="#{dictionaries.dataset.domains}">Valdkonnad</label>
              <div class="col-md-12">
                <select name="selectedDomains" class="dataset-domain-select" multiple data-live-search="true" th:title="#{dictionaries.dataset.select.domain}"
                         data-actions-box="true" disabled
                         th:data-select-all-text="#{button.select.all.text}" th:data-deselect-all-text="#{button.unselect.all.text}">
                </select>
              </div>
            </div>

            <div class="form-group row">
              <label class="col-md-auto col-form-label" th:text="#{dictionaries.dataset.languages}">Keeled</label>
              <div class="col-md-12">
                <select  name="selectedLanguages" class="classifier-select" multiple data-live-search="true" th:title="#{dictionaries.dataset.select.language}"
                         data-actions-box="true"
                         th:data-select-all-text="#{button.select.all.text}" th:data-deselect-all-text="#{button.unselect.all.text}">
                  <th:block th:each="language: ${languages}">
                    <option th:value="${language.toIdString()}" th:text="${language.value}"/>
                  </th:block>
                </select>
              </div>
            </div>

            <div class="form-group row">
              <label class="col-md-auto col-form-label" th:text="#{dictionaries.dataset.processstates}">Protsessiolekud</label>
              <div class="col-md-12">
                <select  name="selectedProcessStates" class="classifier-select" multiple data-live-search="true" th:title="#{dictionaries.dataset.select.processstate}"
                         data-actions-box="true"
                         th:data-select-all-text="#{button.select.all.text}" th:data-deselect-all-text="#{button.unselect.all.text}">
                  <th:block th:each="processState: ${processStates}">
                    <option th:value="${processState.toIdString()}" th:text="${processState.value}"/>
                  </th:block>
                </select>
              </div>
            </div>


            <div class="form-check mt-1">
              <input id="chkVisible" class="form-check-input" type="checkbox" name="visible"
                     checked="checked"/>
              <label for="chkVisible" class="form-check-label" th:text="#{dictionaries.dataset.is.visible}">Nähtav</label>
            </div>
            <div class="form-check mt-1">
              <input id="chkPublic" class="form-check-input" type="checkbox" name="public"/>
              <label for="chkPublic" class="form-check-label" th:text="#{dictionaries.dataset.is.public}">Nähtav</label>
            </div>
          </div>
          <div class="modal-footer">
            <button id="addDatasetSubmitBtn" type="submit" class="btn btn-primary">Salvesta</button>
            <button type="button" class="btn btn-default" data-dismiss="modal">Katkesta</button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <div th:id="${'editDatasetDlg_' + thisDataset.code}" class="modal" role="dialog" th:fragment="edit_dataset_dlg(thisDataset)">
    <div class="modal-dialog modal-lg" role="document">
      <div class="modal-content">
        <form th:action="@{/update_dictionary}" method="post" th:object="${datasetData}">
          <div class="modal-body">
            <div class="form-group row">
              <label class="col-md-2 col-form-label" th:text="#{dictionaries.dataset.code}">Sõnakogu kood</label>
              <input class="col-md-3 form-control" readonly name="code" th:value="${thisDataset.code}">
            </div>
            <div class="form-group row">
              <label class="col-md-2 col-form-label" th:text="#{dictionaries.dataset.name}">Sõnakogu nimi</label>
              <input class="col-md-6 form-control required-field" name="name" th:value="${thisDataset.name}">
            </div>
            <div class="form-group row">
              <label class="col-md-auto col-form-label" th:text="#{dictionaries.dataset.description}">Kirjeldus</label>
              <div class="col-md-12">
                <textarea class="form-control" rows="4" name="description" th:text="${thisDataset.description}"></textarea>
              </div>
            </div>

            <div class="form-group row">
              <label class="col-md-auto col-form-label" th:text="#{dictionaries.dataset.origins}">Päritolu</label>
              <div class="col-md-12">
                <select class="dataset-origin-select" data-live-search="true" th:title="#{dictionaries.dataset.select.origin}">
                  <option value=""></option>
                  <option th:each="origin : ${origins}"
                          th:value="${origin.code}" th:text="${origin.label != null ? origin.label : origin.code}"
                          th:selected="${not #lists.isEmpty(thisDataset.selectedDomains) && thisDataset.selectedDomains[0].origin == origin.code}"
                  />
                </select>
              </div>
            </div>

            <div class="form-group row">
              <label class="col-md-auto col-form-label" th:text="#{dictionaries.dataset.domains}">Valdkonnad</label>
              <div class="col-md-12">
                <select  name="selectedDomains" class="dataset-domain-select" multiple data-live-search="true" th:title="#{dictionaries.dataset.select.domain}"
                         th:disabled="${#lists.isEmpty(thisDataset.selectedDomains)}"
                         data-actions-box="true"
                         th:data-select-all-text="#{button.select.all.text}" th:data-deselect-all-text="#{button.unselect.all.text}">
                  <option th:each="selectedDomain : ${thisDataset.selectedDomains}"
                          selected="selected"
                          th:value="${selectedDomain.toIdString()}" th:text="${#strings.abbreviate(selectedDomain.value + (selectedDomain.code != selectedDomain.value ?  ' [' + selectedDomain.code + ']' : ''), 100)}"/>
                </select>
              </div>
            </div>

            <div class="form-group row">
                <label class="col-md-auto col-form-label" th:text="#{dictionaries.dataset.languages}">Keeled</label>
                <div class="col-md-12">
                  <select name="selectedLanguages"  class="classifier-select" multiple data-live-search="true" data-actions-box="true"
                          th:data-select-all-text="#{button.select.all.text}" th:data-deselect-all-text="#{button.unselect.all.text}" th:title="#{dictionaries.dataset.select.language}">
                    <th:block th:each="language: ${languages}">
                      <option th:value="${language.toIdString()}" th:text="${language.value}"
                        th:selected="${#lists.contains(thisDataset.selectedLanguages, language)}"/>
                    </th:block>
                  </select>
                </div>
            </div>

            <div class="form-group row">
              <label class="col-md-auto col-form-label" th:text="#{dictionaries.dataset.processstates}">Protsessiolekud</label>
              <div class="col-md-12">
                <select  name="selectedProcessStates" class="classifier-select" multiple data-live-search="true" th:title="#{dictionaries.dataset.select.processstate}"
                         data-actions-box="true" th:data-select-all-text="#{button.select.all.text}" th:data-deselect-all-text="#{button.unselect.all.text}">
                  <th:block th:each="processState: ${processStates}">
                    <option th:value="${processState.toIdString()}" th:text="${processState.value}"
                            th:selected="${thisDataset.selectedProcessStates != null && #lists.contains(thisDataset.selectedProcessStates, processState)}"/>
                  </th:block>
                </select>
              </div>
            </div>

            <div class="form-check mt-1">
              <input th:id="${'chkVisible_' + thisDataset.code}" class="form-check-input" type="checkbox" name="visible" th:checked="${thisDataset.visible}">
              <label th:for="${'chkVisible_' + thisDataset.code}" class="form-check-label" th:text="#{dictionaries.dataset.is.visible}">Nähtav</label>
            </div>
            <div class="form-check mt-1">
              <input th:id="${'chkPublic_' + thisDataset.code}" class="form-check-input" type="checkbox" name="public" th:checked="${thisDataset.public}">
              <label th:for="${'chkPublic_' + thisDataset.code}" class="form-check-label" th:text="#{dictionaries.dataset.is.public}">Nähtav</label>
            </div>
          </div>

          <div class="modal-footer">
            <button type="submit" class="btn btn-primary dataset-save-btn">Salvesta</button>
            <button type="button" class="btn btn-default" data-dismiss="modal">Katkesta</button>
          </div>
        </form>
      </div>
    </div>
  </div>
</body>
</html>
