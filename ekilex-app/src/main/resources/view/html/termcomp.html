<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head></head>
<body>
  <div class="card-body px-2 pt-1 pb-2 d-flex flex-column h-100"
       th:fragment="term_search_result"
       th:with="
         isWordResultMode=${sessionBean.termSearchResultMode == T(eki.ekilex.constant.SearchResultMode).WORD},
         isMeaningResultMode=${sessionBean.termSearchResultMode == T(eki.ekilex.constant.SearchResultMode).MEANING}">
    <div class="row no-gutters">
      <div class="col-auto">
        <div class="btn-group btn-group-toggle btn-tabs" data-toggle="buttons">
          <label class="btn btn-secondary" th:classappend="${isWordResultMode ? 'active' : ''}">
            <span th:if="${isWordResultMode}" th:text="#{term.terms.found} + ' ' + ${termSearchResult.wordCount}" data-toggle="tooltip" th:title="#{term.search.tooltip.terms}"></span>
            <span th:if="${isMeaningResultMode}" th:text="#{term.terms.found} + ' ' + ${termSearchResult.wordCount}" data-toggle="tooltip" th:title="#{term.search.tooltip.meaning.terms}"></span>
            <input type="radio" name="resultMode" autocomplete="off"
                   data-plugin="relativeFormItem"
                   data-relativeFormItem:id="search-result-mode-1"
                   th:checked="${isWordResultMode}"
                   th:value="${T(eki.ekilex.constant.SearchResultMode).WORD}"/>
          </label>
          <label class="btn btn-secondary" th:classappend="${isMeaningResultMode ? 'active' : ''}">
            <span th:if="${isMeaningResultMode}" th:text="#{term.meanings.found} + ' ' + ${termSearchResult.meaningCount}" data-toggle="tooltip" th:title="#{term.search.tooltip.meanings}"></span>
            <span th:if="${isWordResultMode}" th:text="#{term.meanings.found} + ' ' + ${termSearchResult.meaningCount}" data-toggle="tooltip" th:title="#{term.search.tooltip.term.meanings}"></span>
            <input type="radio" name="resultMode" autocomplete="off"
                   data-plugin="relativeFormItem"
                   data-relativeFormItem:id="search-result-mode-2"
                   th:checked="${isMeaningResultMode}"
                   th:value="${T(eki.ekilex.constant.SearchResultMode).MEANING}"/>
          </label>
        </div>
        <th:block th:if="${termSearchResult != null}">
          <input type="hidden" id="pageNum" th:value="${termSearchResult.currentPage}">
          <div class="btn-group btn-tabs">
            <th:block th:if="${termSearchResult.resultDownloadNow}">
              <div>
                <form th:action="@{/termsearch_result_download}" method="post">
                  <span>|</span>
                  <input type="hidden" name="searchUri" th:value="${searchUri}">
                  <button type="submit" class="btn btn-secondary" th:text="#{term.download}">Laadi alla</button>
                </form>
              </div>
            </th:block>
            <th:block th:if="${termSearchResult.resultDownloadLater}">
              <div>
                <form th:action="@{/termsearch_result_queue}" method="post">
                  <span>|</span>
                  <input type="hidden" name="searchUri" th:value="${searchUri}">
                  <button id="queueTermSearchResultsBtn" type="button" data-plugin="queueTermSearchResults" class="btn btn-secondary" th:text="#{term.send.email}">Saada e-postiga</button>
                  <span id="queueTermSearchResultsMsg" class="btn" style="display: none" th:text="#{term.sending}">Saatmisel</span>
                </form>
              </div>
            </th:block>
            <div>
              <form th:action="@{/termmeaningtable}" method="post" target="_blank">
                <span>|</span>
                <input type="hidden" name="searchUri" th:value="${searchUri}">
                <button type="button" data-plugin="tableViewTermSearchResults" class="btn btn-secondary" th:data-result-count="${termSearchResult.meaningCount}" th:text="#{term.meaning.table.title}">Tabelivaade</button>
              </form>
            </div>
            <div>
              <form th:action="@{/term_paging}" method="post">
                <span>|</span>
                <input type="hidden" name="searchUri" th:value="${searchUri}">
                <input type="hidden" name="pageNum" th:value="${termSearchResult.currentPage}">
                <input type="hidden" name="direction" value="page">
                <input type="hidden" name="offset" value="0">
                <button type="button" data-plugin="refreshSearchResults" class="btn btn-secondary" data-toggle="tooltip" th:title="#{common.refresh.search}">
                  <i class="fa fa-refresh" aria-hidden="true"></i>
                </button>
              </form>
            </div>
          </div>
        </th:block>
      </div>
      <div class="col-auto ml-auto">
        <select
          name="resultLang"
          data-plugin="relativeFormItem"
          data-relativeFormItem:id="lang-select-item"
          class="form-control classifier-select"
          data-live-search="true">
          <option value="" th:text="#{common.all.languages}">Kõik keeled</option>
          <option th:each="lang : ${allLanguages}" th:value="${lang.code}" th:selected="${lang.code == sessionBean.termSearchResultLang}" th:text="${lang.value}"></option>
        </select>
      </div>
    </div>
    <div th:replace="termcomp :: search_result_rows"></div>
  </div>
  <div class="card-body px-2 pt-1 pb-2" th:fragment="lim_term_search_result">
    <div class="row no-gutters">
      <div class="col-auto">
        <span th:text="#{term.meanings.found} + ' ' + ${termSearchResult.meaningCount}"></span>
      </div>
    </div>
    <div th:replace="termcomp :: search_result_rows"></div>
  </div>
  <div class="border-bottom pb-2 title-bar" th:fragment="meaning_header">
    <div class="d-flex flex-row align-items-center">
      <div class="dragHandle">
        <span class="fa fa-ellipsis-v"></span>
        <span class="fa fa-ellipsis-v"></span>
      </div>
      <div>
        <h1 class="mb-0"><span th:text="${meaningId}"></span></h1>
      </div>
      <div class="ml-2">
        <div class="d-inline-block">
          <form th:action="@{/termcreateword}" method="post">
            <input type="hidden" name="backUri">
            <input type="hidden" name="meaningId" th:value="${meaningId}">
            <button type="button" class="btn btn-secondary mr-1" data-plugin="initCreateWordPlugin" sec:authorize="#vars.meaning.crudGrant">
              <span th:text="#{term.add.term}">Lisa termin</span>
            </button>
          </form>
        </div>
        <a class="btn btn-secondary mr-1" th:href="@{'/meaningjoin/' + ${meaningId}}"
           title="Tähenduste ühendamine"
           sec:authorize="#vars.meaning.crudGrant" th:text="#{term.join}">Ühenda</a>
        <button class="btn btn-secondary mr-1"
                data-toggle="duplicate-meaning-confirm"
                th:data-meaning-id="${meaningId}"
                sec:authorize="#vars.meaning.crudGrant" th:text="#{term.duplicate}">Dubleeri</button>
        <div class="p-1 ml-2 d-inline-block" th:classappend="${meaning.lastApproveEventOn != null ? 'border rounded' : ''}">
          <form th:action="@{/approve_meaning}" method="post">
            <input type="hidden" name="meaningId" th:value="${meaningId}">
            <span class="ml-1 date-modified" data-toggle="tooltip" data-placement="bottom" th:data-original-title="#{term.last.approved}" th:if="${meaning.lastApproveEventOn}">
              <i class="fa fa-calendar"></i>
              <span class="ml-n1" th:text="${#dates.format(meaning.lastApproveEventOn, 'dd.MM.yyyy')}"></span>
            </span>
            <button type="button"
                    th:title="#{term.approve.meaning}"
                    class="btn btn-secondary ml-1 mr-1"
                    data-plugin="approveMeaning"
                    th:data-meaning-id="${meaningId}"
                    sec:authorize="#vars.meaning.crudGrant"
                    th:if="${userProfile.approveMeaningEnabled}">
                    Kinnita
            </button>
          </form>
        </div>
        <button class="btn btn-link" type="button"
                th:data-id="${meaningId}"
                data-callback="doNewSearchTermSearch"
                data-toggle="deleteMeaningAndLexemesAndWords"
                sec:authorize="#vars.isMeaningLexemeCrudGranted"
                th:text="#{common.delete}">Kustuta</button>
        <div class="hover-actions-container hover-actions-container-outline ml-2 d-inline-block">
          <div class="date-modified" data-toggle="tooltip" data-boundary="window" data-placement="top" th:title="#{term.manual.event.on}">
            <i class="fa fa-edit"></i>
            <span th:text="${#dates.format(meaning.manualEventOn, 'dd.MM.yyyy')}" class="ml-n1"></span>
          </div>
          <div class="hover-actions hover-actions-bottom-right">
            <div class="btn-group">
                <button type="button" class="btn btn-secondary btn-sm" th:title="#{common.edit}" data-toggle="modal"
                        th:data-target="${'#editMeaningManualEventOnDlg_' + meaningId}"
                        sec:authorize="#vars.meaning.crudGrant">
                <i class="fa fa-pencil action-icon" aria-hidden="true"></i>
              </button>
            </div>
          </div>
        </div>
        <div th:replace="termdialog :: edit_meaning_manual_event_on_dlg"></div>
      </div>
      <div class="ml-auto d-flex align-items-center flex-row">
        <div style="display:inline-block">
          <span class="date-modified mr-2" data-toggle="tooltip" data-placement="top" th:data-original-title="#{term.last.modified}">
            <span class="ml-n1" th:text="${#dates.format(meaning.lastActivityEventOn, 'dd.MM.yyyy')}"></span>
          </span>
        </div>
        <a th:href="@{'/meaningactivitylog:' + ${meaningId}}"
           data-toggle="modal"
           data-target="#meaningActivityLogDlg"
           class="btn btn-secondary ml-2"
           sec:authorize="#vars.meaning.readGrant"
           th:text="#{term.meaning.activity.log}">Logi</a>
        <div th:data-id="${meaningId}" data-plugin="contextmenu" data-leftclick="true" data-contextmenu:closepanel="Sulge" class="fa fa-ellipsis-v paneMenu">
        </div>
      </div>
    </div>
    <script>
      $('[data-toggle=duplicate-meaning-confirm]').confirmation({
        btnOkLabel : /*[[#{common.yes}]]*/'Jah',
        btnCancelLabel : /*[[#{common.no}]]*/'Ei',
        title : /*[[#{term.duplicate.meaning}]]*/'Tee duplikaat mõistest ja kõigist tema ilmikutest',
        onConfirm : duplicateMeaning
      });
    </script>
  </div>
  <div class="border-bottom pb-2 title-bar" th:fragment="lim_term_meaning_header">
    <div class="alert bg-warning text-black px-3 py-1 d-flex align-items-center flex-nowrap" role="alert">
      <i class="fa fa-exclamation-triangle small mr-2" aria-hidden="true"></i>
      <span th:text="#{term.lim.term.warning}">Ekilexi keskkonnas tehtud võrgustiku postitused jõuavad sõnaveebi järgmisel päeval</span>
    </div>
    <div class="d-flex flex-row align-items-center">
      <div class="dragHandle">
        <span class="fa fa-ellipsis-v"></span>
        <span class="fa fa-ellipsis-v"></span>
      </div>
      <div>
        <h1 class="mb-0"><span th:text="${meaningId}"></span></h1>
      </div>
      <div class="ml-2">
        <button class="btn btn-secondary mr-1"
                data-toggle="modal"
                data-target="#newLimTermWordDlg"
                th:data-meaning-id="${meaningId}"
                sec:authorize="#vars.isMeaningAnyLexemeCrudGranted && #vars.userRoleData.crudRoleSelected"
                th:text="#{term.add.term}">Lisa termin</button>
        <a class="btn btn-secondary mr-1" th:href="@{'/limtermmeaningjoin/' + ${meaningId}}"
           title="Tähenduste ühendamine"
           sec:authorize="#vars.meaning.crudGrant"
           th:text="#{term.join}">Ühenda</a>
        <button id="duplicateLimTermMeaningBtn"
                th:title="#{term.duplicate.meaning}"
                class="btn btn-secondary mr-1"
                th:data-meaning-id="${meaningId}"
                sec:authorize="#vars.meaning.crudGrant"
                data-plugin="duplicateLimTermMeaningPlugin"
                th:text="#{term.duplicate}">Dubleeri</button>
        <div class="date-modified d-inline-block" title="" data-toggle="tooltip" data-placement="bottom"
             th:data-original-title="#{term.last.modified}">
          <i class="fa fa-calendar"></i><span th:text="${#dates.format(meaning.lastActivityEventOn, 'dd.MM.yyyy')}"></span>
        </div>
        <button class="btn btn-link" type="button"
                th:data-id="${meaningId}"
                data-callback="doNewSearchTermSearch"
                data-toggle="deleteMeaningAndLexemesAndWords"
                sec:authorize="#vars.isMeaningLexemeCrudGranted"
                th:text="#{common.delete}">Kustuta</button>
      </div>
      <div class="ml-auto d-flex align-items-center flex-row">
        <a th:href="@{'/meaningactivitylog:' + ${meaningId}}"
           data-toggle="modal"
           data-target="#meaningActivityLogDlg"
           class="btn btn-secondary ml-2"
           sec:authorize="#vars.meaning.readGrant"
           th:text="#{term.meaning.activity.log}">Logi</a>
        <div th:data-id="${meaningId}" data-plugin="contextmenu" data-leftclick="true" data-contextmenu:closepanel="Sulge" class="fa fa-ellipsis-v paneMenu">
        </div>
      </div>
    </div>
  </div>
  <div id="results" class="w-100 h-100 d-flex flex-column" style="overflow:auto; " th:fragment="search_result_rows">
    <div class="entries" style="overflow:auto;">
      <th:block th:each="resultRow,resultRowIter : ${termSearchResult.results}">
        <div
          th:id="${'word-result-' + resultRow.meaningId}"
          class="d-flex flex-row flex-nowrap list-group-item"
          th:classappend="${resultRowIter.last} ? '' : 'border-bottom'" >
          <button
            type="button"
            data-plugin="contextmenu, loadDetailsPlugin"
            data-contextmenu:compare="Ava uues paneelis"
            name="details-btn" th:data-id="${resultRow.meaningId}" class="btn btn-block ml-n1" style="color: inherit; text-decoration: none;">
            <span th:text="${resultRow.meaningId}" class="text-monospace float-right"></span>
            <th:block th:if="${resultRow.meaningWordsExist}">
              <th:block th:each="meaningWord : ${resultRow.meaningWords}">
                <div class="row ml-0" th:classappend="${meaningWord.matchingWord ? '' : 'other-word'}">
                  <span>
                    <span class="mr-1">
                      <span th:if="${meaningWord.public}" class="badge badge-pill badge-primary">&nbsp;</span>
                      <span th:unless="${meaningWord.public}" class="badge badge-pill badge-light">&nbsp;</span>
                      <span th:if="${meaningWord.mostPreferred}" class="badge badge-pill badge-secondary">&nbsp;</span>
                      <span th:if="${meaningWord.leastPreferred}" class="badge badge-pill badge-danger">&nbsp;</span>
                      <span th:unless="${meaningWord.mostPreferred or meaningWord.leastPreferred}" class="badge badge-pill badge-light">&nbsp;</span>
                    </span>
                    <span th:utext="${viewUtil.getWordValueMarkup(meaningWord)}" th:class="${meaningWord.matchingWord ? 'font-weight-bold' : ''}"></span>
                    <span th:text="${'(' + viewUtil.getLangIso2(meaningWord.lang) + ')'}"></span>
                    <span class="ctxt mt-2">
                      <span th:each="datasetCode,itemIter : ${meaningWord.datasetCodes}">
                        <span th:text="${datasetCode}"></span>
                        <span th:unless="${itemIter.last}">,</span>
                      </span>
                    </span>
                  </span>
                </div>
              </th:block>
              <th:block th:if="${not #lists.isEmpty(resultRow.meaningDomains)}">
                <div class="row ml-0 mt-1">
                  <small th:each="domain,itemIter : ${resultRow.meaningDomains}">
                    <span th:text="${domain.code}" th:title="${domain.value}"></span>
                    <span th:unless="${itemIter.last}" class="ml-n1">,&nbsp;</span>
                  </small>
                </div>
              </th:block>
            </th:block>
            <th:block th:unless="${resultRow.meaningWordsExist}">
              <div class="row">
                <span class="stxt pl-1" th:text="#{term.no.meaning.words}">tähendusel ei ole valitud keeles vasteid</span>
              </div>
            </th:block>
          </button>
          <div class="result-right" style="padding: 5px;">
            <span th:id="${'meaning_select_point_' + resultRow.meaningId}" class="fa fa-play" style="display: none;"></span>
            <span th:id="${'select_wait_' + resultRow.meaningId}" class="fa fa-refresh fa-spin" style="display: none;"></span>
          </div>
        </div>
      </th:block>
    </div>
    <div th:if="${termSearchResult.showPaging}">
      <div th:replace="components :: paging(${termSearchResult})"></div>
    </div>
  </div>
  <div class="row" th:if="${not #lists.isEmpty(meaning.domains)}" th:fragment="meaning_domain">
    <div class="col pr-0 col-w13rem">
      <span class="lbl" th:text="#{term.meaning.domain}">Valdkond</span>
      <button type="button" class="btn badge badge-success float-right mr-4" th:title="#{common.add.new}"
              data-toggle="modal"
              th:data-target="${'#addMeaningDomainDlg_' + meaningId}"
              sec:authorize="#vars.meaning.crudGrant">
        <i class="fa fa-plus" aria-hidden="true"></i>
      </button>
    </div>
    <div class="col pl-0">
      <div class="orderable" data-op-code="meaning_domain">
        <div th:each="classif,classifIter : ${meaning.domains}"
             th:data-id="${classif.id}"
             th:data-orderby="${classif.orderBy}"
             class="hidden-buttons">
          <div class="row">
            <div class="action-column">
              <th:block th:replace="common :: ordering_buttons(${classifIter})" sec:authorize="#vars.meaning.crudGrant"></th:block>
            </div>
            <div class="col">
              <span th:replace="termdialog :: edit_meaning_domain_dlg"></span>
              <span th:text="${classif.code}"></span>
              <th:block th:unless="${classif.code == classif.value}">
                -
                <span th:text="${classif.value}"></span>
              </th:block>
              <button type="button" class="btn badge badge-primary" th:title="#{common.edit}"
                      data-toggle="modal"
                      th:data-target="${'#editMeaningDomainDlg_' + meaningId + '_' + classifIter.index}"
                      sec:authorize="${#vars.meaning.crudGrant}">
                <i class="fa fa-caret-down" aria-hidden="true"></i>
              </button>
              <button type="button" class="btn badge badge-warning"
                      th:data-id="${meaningId}"
                      data-op-code="meaning_domain"
                      th:data-value="${classif.toIdString()}"
                      data-toggle="delete-confirm"
                      data-placement="right"
                      sec:authorize="${#vars.meaning.crudGrant}">
                <i class="fa fa-remove" aria-hidden="true"></i>
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="row no-gutters" th:if="${not #lists.isEmpty(meaning.semanticTypes)}" th:fragment="meaning_semantic_type">
    <div class="col pr-0 col-w13rem">
      <span class="lbl" th:text="#{term.meaning.semantic.type}">Semantiline tüüp</span>
      <button type="button" class="btn badge badge-success float-right mr-4" th:title="#{common.add.new}"
              data-toggle="modal"
              th:data-target="${'#addMeaningSemanticTypeDlg_' + meaningId}"
              sec:authorize="#vars.meaning.crudGrant">
        <i class="fa fa-plus" aria-hidden="true"></i>
      </button>
    </div>
    <div class="col pl-0">
      <span th:each="classif,classifIter : ${meaning.semanticTypes}" class="hidden-buttons">
        <span th:replace="termdialog :: edit_meaning_semantic_type_dlg"></span>
        <span th:text="${classif.code}"></span>
        <th:block th:unless="${classif.code == classif.value}">
          -
          <span th:text="${classif.value}"></span>
        </th:block>
        <button type="button" class="btn badge badge-primary"
                th:title="#{common.edit}"
                data-toggle="modal"
                th:data-target="${'#editMeaningSemanticTypeDlg_' + meaningId + '_' + classifIter.index}"
                sec:authorize="${#vars.meaning.crudGrant}">
          <i class="fa fa-caret-down" aria-hidden="true"></i>
        </button>
        <button type="button" class="btn badge badge-warning"
                th:data-id="${meaningId}"
                data-op-code="meaning_semantic_type"
                th:data-value="${classif.code}"
                data-toggle="delete-confirm"
                data-placement="right"
                sec:authorize="${#vars.meaning.crudGrant}">
          <i class="fa fa-remove" aria-hidden="true"></i>
        </button>
        <span th:unless="${classifIter.last}">,</span>
      </span>
    </div>
  </div>
  <div class="row no-gutters" th:fragment="meaning_definition">
    <div class="col pr-0 col-w13rem">
      <span class="lbl" th:text="#{term.definition}">Seletus</span>
      <button type="button" class="btn badge badge-success float-right mr-4"
              th:title="#{common.add.new}"
              data-toggle="modal"
              th:data-target="${'#addDefinitionDlg_' + meaningId}"
              sec:authorize="#vars.isMeaningLexemeCrudGranted">
        <i class="fa fa-plus" aria-hidden="true"></i>
      </button>
    </div>
    <div class="col pl-0">
      <th:block th:each="definitionLangGroup : ${meaning.definitionLangGroups}">
        <div>
          <span th:text="${viewUtil.getLangIso2(definitionLangGroup.lang)}" class="mr-2"></span>
          <button name="lang-collapse-btn" type="button" class="btn badge badge-secondary btn-toggle"
                  th:data-lang="${definitionLangGroup.lang}"
                  th:title="${definitionLangGroup.selected} ? #{common.hide.lang.group} : #{common.show.lang.group}"
                  data-plugin="langCollapsePlugin">
            <i th:class="${definitionLangGroup.selected ? 'fa fa-caret-down' : 'fa fa-caret-right'}" aria-hidden="true"></i>
          </button>
        </div>
        <div th:if="${definitionLangGroup.selected}" class="orderable" data-op-code="definition">
          <div class="ml-4" style="position: relative"
               th:each="definition, itemIter: ${definitionLangGroup.definitions}"
               th:data-id="${definition.id}"
               th:data-orderby="${definition.orderBy}">
            <div th:replace="termdialog :: edit_definition_dlg"></div>
            <div th:replace="termdialog :: add_definition_source_link_dlg"></div>
            <div th:replace="termdialog :: add_definition_note_dlg"></div>
            <div style="display: list-item; position: absolute"></div>
            <div class="action-column">
              <th:block th:replace="common :: ordering_buttons(${itemIter})" sec:authorize="#vars.meaning.crudGrant"></th:block>
            </div>
            <div class="invisible-buttons action-buttons-anchor mw-80">
              <span th:utext="${definition.value}"></span>
              <span class="font-italic text-info" th:text="${definition.typeValue}"></span>
              <span class="ctxt" th:text="'(' + #{'boolean.public.' + ${definition.public}} + ')'" th:if="${definition.crudGrant}"></span>
              <span th:if="${#lists.isEmpty(definition.sourceLinks)}" class="show-on-mouseover" th:unless="${definition.editDisabled}">
                [
                <button type="button" class="btn badge badge-secondary"
                        th:title="#{common.add.source.link}"
                        data-toggle="modal"
                        th:data-target="${'#addDefinitionSourceLinkDlg_' + definition.id}"
                        sec:authorize="#vars.definition.crudGrant">
                  <i class="fa fa-external-link" aria-hidden="true"></i>
                </button>
                ]
              </span>
              <div class="action-buttons-3" th:unless="${definition.editDisabled}">
                <button type="button" class="btn badge badge-primary"
                        th:title="#{common.edit}"
                        data-toggle="modal"
                        th:data-target="${'#editDefinitionDlg_' + definition.id}"
                        sec:authorize="#vars.definition.crudGrant">
                  <i class="fa fa-edit" aria-hidden="true"></i>
                </button>
                <button type="button" class="btn badge badge-secondary"
                        th:title="#{term.add.definition.note}"
                        data-toggle="modal"
                        th:data-target="${'#addDefinitionNoteDlg_' + definition.id}"
                        sec:authorize="#vars.definition.crudGrant">
                  <i class="fa fa-sticky-note-o" aria-hidden="true"></i>
                </button>
                <button type="button" class="btn badge badge-warning"
                        data-op-code="definition"
                        th:data-id="${definition.id}"
                        data-toggle="delete-confirm"
                        data-placement="right"
                        sec:authorize="#vars.definition.crudGrant">
                  <i class="fa fa-remove" aria-hidden="true"></i>
                </button>
              </div>
            </div>
            <div class="hidden-buttons">
              <th:block th:each="sourceLink : ${definition.sourceLinks}" th:if="${not #lists.isEmpty(definition.sourceLinks)}">
                <div th:replace="termdialog :: edit_definition_source_link_dlg"></div>
                <span>
                  [
                  <a th:href="@{'/def_source_link:' + ${sourceLink.id}}" th:text="${sourceLink.value}"></a>
                  <span th:if="${sourceLink.name != null}" th:text="${sourceLink.name}"></span>
                  <button type="button" class="btn badge badge-primary"
                          th:title="#{common.edit}"
                          data-toggle="modal"
                          th:data-target="${'#editDefinitionSourceLinkDlg_' + sourceLink.id}"
                          sec:authorize="#vars.definition.crudGrant">
                    <i class="fa fa-edit" aria-hidden="true"></i>
                  </button>
                  <button type="button" class="btn badge badge-warning"
                          data-op-code="def_source_link"
                          th:data-id="${sourceLink.id}"
                          data-toggle="delete-confirm"
                          data-placement="right"
                          sec:authorize="#vars.definition.crudGrant">
                    <i class="fa fa-remove" aria-hidden="true"></i>
                  </button>
                  ]
                </span>
              </th:block>
              <button type="button" class="btn badge badge-secondary"
                      th:title="#{common.add.source.link}"
                      data-toggle="modal"
                      th:data-target="${'#addDefinitionSourceLinkDlg_' + definition.id}"
                      sec:authorize="#vars.definition.crudGrant">
                <i class="fa fa-external-link" aria-hidden="true"></i>
              </button>
            </div>
            <div th:if="${not #lists.isEmpty(definition.notes)}" class="col pl-0">
              <div>
                <span class="lbl" th:text="#{term.definition.note}">Märkus</span>
              </div>
              <div class="orderable" data-op-code="definition_note">
                <div th:each="note,noteIter : ${definition.notes}"
                     th:data-id="${note.id}"
                     th:data-orderby="${note.orderBy}">
                  <div th:replace="termdialog :: edit_definition_note_dlg"></div>
                  <div th:replace="termdialog :: add_definition_note_source_link_dlg"></div>
                  <div style="display: list-item; position: absolute"></div>
                  <div class="action-column">
                    <th:block th:replace="common :: ordering_buttons(${noteIter})" sec:authorize="#vars.definition.crudGrant"></th:block>
                  </div>
                  <div class="small invisible-buttons action-buttons-anchor mw-80 ml-4">
                    <span th:utext="${note.valuePrese}"></span>
                    <span class="ctxt" th:text="'(' + #{'boolean.public.' + ${note.public}} + ')'" th:if="${definition.crudGrant}"></span>
                    <span class="show-on-mouseover" th:if="${#lists.isEmpty(note.sourceLinks)}">
                      [
                      <button type="button" class="btn badge badge-secondary"
                              th:title="#{common.add.source.link}"
                              data-toggle="modal"
                              th:data-target="${'#addDefinitionNoteSourceLinkDlg_' + definition.id + '_' + note.id}"
                              sec:authorize="#vars.definition.crudGrant">
                        <i class="fa fa-external-link" aria-hidden="true"></i>
                      </button>
                      ]
                    </span>
                    <div class="action-buttons-2">
                      <button type="button" class="btn badge badge-primary"
                              th:title="#{common.edit}"
                              data-toggle="modal"
                              th:data-target="${'#editDefinitionNoteDlg_' + definition.id + '_' + note.id}"
                              sec:authorize="#vars.definition.crudGrant">
                        <i class="fa fa-edit" aria-hidden="true"></i>
                      </button>
                      <button type="button" class="btn badge badge-warning"
                              th:data-id="${note.id}"
                              data-op-code="definition_note"
                              data-toggle="delete-confirm"
                              data-placement="right"
                              sec:authorize="#vars.definition.crudGrant">
                        <i class="fa fa-remove" aria-hidden="true"></i>
                      </button>
                    </div>
                  </div>
                  <div class="small hidden-buttons ml-4">
                    <th:block th:each="sourceLink : ${note.sourceLinks}">
                      <div th:replace="termdialog :: edit_freeform_source_link_dlg"></div>
                      <span>
                        [
                        <a th:href="@{'/ff_source_link:' + ${sourceLink.id}}" th:text="${sourceLink.value}"></a>
                        <span th:if="${sourceLink.name != null}">
                          <span th:text="${sourceLink.name}"></span>
                        </span>
                        <button type="button" class="btn badge badge-primary"
                                th:title="#{common.edit}"
                                data-toggle="modal"
                                th:data-target="${'#editFreeformSourceLinkDlg_' + sourceLink.id}"
                                sec:authorize="#vars.definition.crudGrant">
                          <i class="fa fa-edit" aria-hidden="true"></i>
                        </button>
                        <button type="button" class="btn badge badge-warning"
                                th:data-id="${sourceLink.id}"
                                data-op-code="ff_source_link"
                                data-toggle="delete-confirm"
                                data-placement="right"
                                sec:authorize="#vars.definition.crudGrant">
                          <i class="fa fa-remove" aria-hidden="true"></i>
                        </button>
                        ]
                      </span>
                    </th:block>
                    <button type="button" class="btn badge badge-secondary"
                            th:title="#{common.add.source.link}"
                            data-toggle="modal"
                            th:data-target="${'#addDefinitionNoteSourceLinkDlg_' + definition.id + '_' + note.id}"
                            sec:authorize="#vars.definition.crudGrant">
                      <i class="fa fa-external-link" aria-hidden="true"></i>
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </th:block>
    </div>
  </div>
  <div class="row no-gutters" th:if="${not #lists.isEmpty(meaning.noteLangGroups)}" th:fragment="term_meaning_note">
    <hr/>
    <div class="col pr-0 col-w13rem">
      <span class="lbl">
        <span th:text="#{term.meaning.note}"></span>
        <button type="button" class="btn badge badge-success float-right mr-4"
                th:title="#{common.add.new}"
                data-toggle="modal"
                th:data-target="${'#addMeaningNoteDlg_' + meaningId}"
                sec:authorize="#vars.meaning.crudGrant">
          <i class="fa fa-plus" aria-hidden="true"></i>
        </button>
      </span>
    </div>
    <div class="col pl-0">
      <th:block th:each="noteLangGroup : ${meaning.noteLangGroups}">
        <div>
          <span th:text="${viewUtil.getLangIso2(noteLangGroup.lang)}" class="mr-2"></span>
          <button name="lang-collapse-btn" type="button" class="btn badge badge-secondary btn-toggle"
                  th:data-lang="${noteLangGroup.lang}"
                  th:title="${noteLangGroup.selected} ? #{common.hide.lang.group} : #{common.show.lang.group}"
                  data-plugin="langCollapsePlugin">
            <i th:class="${noteLangGroup.selected ? 'fa fa-caret-down' : 'fa fa-caret-right'}" aria-hidden="true"></i>
          </button>
        </div>
        <div th:if="${noteLangGroup.selected}" class="orderable" data-op-code="meaning_note">
          <div class="ml-4" style="position: relative" th:each="note, itemIter: ${noteLangGroup.notes}"
               th:data-id="${note.id}"
               th:data-orderby="${note.orderBy}">
            <div th:replace="termdialog :: edit_meaning_note_dlg"></div>
            <div th:replace="termdialog :: add_meaning_note_source_link_dlg"></div>
            <div style="display: list-item; position: absolute"></div>
            <div class="action-column">
              <th:block th:replace="common :: ordering_buttons(${itemIter})" sec:authorize="#vars.meaning.crudGrant"></th:block>
            </div>
            <div class="invisible-buttons action-buttons-anchor mw-80">
              <span th:utext="${note.valuePrese}"></span>
              <span class="ctxt" th:text="'(' + #{'boolean.public.' + ${note.public}} + ')'" th:if="${meaning.crudGrant}"></span>
              <span class="show-on-mouseover" th:if="${#lists.isEmpty(note.sourceLinks)}">
                [
                <button type="button" class="btn badge badge-secondary"
                        th:title="#{common.add.source.link}"
                        data-toggle="modal"
                        th:data-target="${'#addMeaningNoteSourceLinkDlg_' + meaningId + '_' + note.id}"
                        sec:authorize="#vars.meaning.crudGrant">
                  <i class="fa fa-external-link" aria-hidden="true"></i>
                </button>
                ]
              </span>
              <div class="action-buttons-2">
                <button type="button" class="btn badge badge-primary"
                        th:title="#{common.edit}"
                        data-toggle="modal"
                        th:data-target="${'#editMeaningNoteDlg_' + meaningId + '_' + note.id}"
                        sec:authorize="#vars.meaning.crudGrant">
                  <i class="fa fa-edit" aria-hidden="true"></i>
                </button>
                <button type="button" class="btn badge badge-warning"
                        th:data-id="${note.id}"
                        data-op-code="meaning_note"
                        data-toggle="delete-confirm"
                        data-placement="right"
                        sec:authorize="#vars.meaning.crudGrant">
                  <i class="fa fa-remove" aria-hidden="true"></i>
                </button>
              </div>
            </div>
            <div class="hidden-buttons">
              <th:block th:each="sourceLink : ${note.sourceLinks}">
                <div th:replace="termdialog :: edit_freeform_source_link_dlg"></div>
                <span>
                  [
                  <a th:href="@{'/ff_source_link:' + ${sourceLink.id}}" th:text="${sourceLink.value}"></a>
                  <span th:if="${sourceLink.name != null}">
                    <span th:text="${sourceLink.name}"></span>
                  </span>
                  <button type="button" class="btn badge badge-primary"
                          th:title="#{common.edit}"
                          data-toggle="modal"
                          th:data-target="${'#editFreeformSourceLinkDlg_' + sourceLink.id}"
                          sec:authorize="#vars.meaning.crudGrant">
                    <i class="fa fa-edit" aria-hidden="true"></i>
                  </button>
                  <button type="button" class="btn badge badge-warning"
                          th:data-id="${sourceLink.id}"
                          data-op-code="ff_source_link"
                          data-toggle="delete-confirm"
                          data-placement="right"
                          sec:authorize="#vars.meaning.crudGrant">
                    <i class="fa fa-remove" aria-hidden="true"></i>
                  </button>
                  ]
                </span>
              </th:block>
              <button type="button" class="btn badge badge-secondary"
                      th:title="#{common.add.source.link}"
                      data-toggle="modal"
                      th:data-target="${'#addMeaningNoteSourceLinkDlg_' + meaningId + '_' + note.id}"
                      sec:authorize="#vars.meaning.crudGrant">
                <i class="fa fa-external-link" aria-hidden="true"></i>
              </button>
            </div>
          </div>
        </div>
      </th:block>
    </div>
  </div>
  <div class="row no-gutters" th:fragment="lim_term_meaning_note">
    <div class="col pr-0 col-w13rem">
      <span class="lbl">
        Arutelu
        <button type="button" class="btn badge badge-success float-right mr-4"
                th:title="#{common.add.new}"
                data-toggle="modal"
                th:data-target="${'#addLimTermMeaningNoteDlg_' + meaningId}"
                sec:authorize="#vars.meaning.crudGrant">
          <i class="fa fa-plus" aria-hidden="true"></i>
        </button>
      </span>
    </div>
    <div class="col pl-0">
      <th:block th:each="noteLangGroup : ${meaning.noteLangGroups}">
        <div>
          <span th:text="${viewUtil.getLangIso2(noteLangGroup.lang)}" class="mr-2"></span>
          <button name="lang-collapse-btn" type="button" class="btn badge badge-secondary btn-toggle"
                  th:data-lang="${noteLangGroup.lang}"
                  th:title="${noteLangGroup.selected} ? #{common.hide.lang.group} : #{common.show.lang.group}"
                  data-plugin="langCollapsePlugin">
            <i th:class="${noteLangGroup.selected ? 'fa fa-caret-down' : 'fa fa-caret-right'}" aria-hidden="true"></i>
          </button>
        </div>
        <div th:if="${noteLangGroup.selected}" data-op-code="meaning_note">
          <div class="ml-4" style="position: relative" th:each="note, itemIter: ${noteLangGroup.notes}">
            <div th:replace="termdialog :: edit_lim_term_meaning_note_dlg"></div>
            <div th:replace="termdialog :: add_meaning_note_source_link_dlg"></div>
            <div style="display: list-item; position: absolute"></div>
            <div class="invisible-buttons action-buttons-anchor mw-80">
              <span th:utext="${note.valuePrese}"></span>
              <span class="ctxt" th:text="'[' + ${note.modifiedBy} + ']'" th:if="${note.modifiedBy != null}"></span>
              <span class="ctxt" th:text="${#dates.format(note.modifiedOn, 'dd.MM.yyyy HH:mm')}" th:if="${note.modifiedOn != null}"></span>
              <span class="show-on-mouseover" th:if="${#lists.isEmpty(note.sourceLinks)}">
                [
                <button type="button" class="btn badge badge-secondary"
                        th:title="#{common.add.source.link}"
                        data-toggle="modal"
                        th:data-target="${'#addMeaningNoteSourceLinkDlg_' + meaningId + '_' + note.id}"
                        sec:authorize="#vars.meaning.crudGrant">
                  <i class="fa fa-external-link" aria-hidden="true"></i>
                </button>
                ]
              </span>
              <div class="action-buttons-2">
                <button type="button" class="btn badge badge-primary"
                        th:title="#{common.edit}"
                        data-toggle="modal"
                        th:data-target="${'#editLimTermMeaningNoteDlg_' + meaningId + '_' + note.id}"
                        sec:authorize="#vars.meaning.crudGrant">
                  <i class="fa fa-edit" aria-hidden="true"></i>
                </button>
                <button type="button" class="btn badge badge-warning"
                        th:data-id="${note.id}"
                        data-op-code="meaning_note"
                        data-toggle="delete-confirm"
                        data-placement="right"
                        sec:authorize="#vars.meaning.crudGrant">
                  <i class="fa fa-remove" aria-hidden="true"></i>
                </button>
              </div>
            </div>
            <div class="hidden-buttons">
              <th:block th:each="sourceLink : ${note.sourceLinks}">
                <div th:replace="termdialog :: edit_freeform_source_link_dlg"></div>
                <span>
                  [
                  <a th:href="@{'/ff_source_link:' + ${sourceLink.id}}" th:text="${sourceLink.value}"></a>
                  <span th:if="${sourceLink.name != null}">
                    <span th:text="${sourceLink.name}"></span>
                  </span>
                  <button type="button" class="btn badge badge-primary"
                          th:title="#{common.edit}"
                          data-toggle="modal"
                          th:data-target="${'#editFreeformSourceLinkDlg_' + sourceLink.id}"
                          sec:authorize="#ars.meaning.crudGrant">
                    <i class="fa fa-edit" aria-hidden="true"></i>
                  </button>
                  <button type="button" class="btn badge badge-warning"
                          th:data-id="${sourceLink.id}"
                          data-op-code="ff_source_link"
                          data-toggle="delete-confirm"
                          data-placement="right"
                          sec:authorize="#vars.meaning.crudGrant">
                    <i class="fa fa-remove" aria-hidden="true"></i>
                  </button>
                  ]
                </span>
              </th:block>
              <button type="button" class="btn badge badge-secondary"
                      th:title="#{common.add.source.link}"
                      data-toggle="modal"
                      th:data-target="${'#addMeaningNoteSourceLinkDlg_' + meaningId + '_' + note.id}"
                      sec:authorize="#vars.meaning.crudGrant">
                <i class="fa fa-external-link" aria-hidden="true"></i>
              </button>
            </div>
          </div>
        </div>
      </th:block>
    </div>
    <hr/>
  </div>
  <div class="row no-gutters" th:if="${not #lists.isEmpty(meaning.images)}" th:fragment="meaning_image">
    <hr>
    <div class="col pr-0 col-w13rem">
      <span class="lbl" th:text="#{term.meaning.image}">Pilt</span>
      <button type="button" class="btn badge badge-success float-right mr-4"
              title="Lisa pilt"
              data-toggle="modal"
              th:data-target="${'#addMeaningImageDlg_' + meaningId}"
              sec:authorize="#vars.meaning.crudGrant">
        <i class="fa fa-plus" aria-hidden="true"></i>
      </button>
    </div>
    <div class="col pl-0">
      <th:block th:each="image : ${meaning.images}">
        <div th:replace="termdialog :: edit_meaning_image_dlg"></div>
        <div th:replace="termdialog :: add_image_title_dlg"></div>
        <div th:replace="termdialog :: edit_image_title_dlg"></div>
        <div th:replace="termdialog :: add_image_source_link_dlg"></div>
        <div class="invisible-buttons action-buttons-anchor w-100">
          <img class="w-25" th:src="${image.sourceUrl}">
          <span class="invisible-buttons">
            <button type="button" class="btn badge badge-primary align-bottom"
                    th:title="#{common.edit}"
                    data-toggle="modal"
                    th:data-target="${'#editMeaningImageDlg_' + image.id}"
                    sec:authorize="#vars.meaning.crudGrant">
              <i class="fa fa-edit" aria-hidden="true"></i>
            </button>
            <button type="button" class="btn badge badge-warning align-bottom"
                    th:title="#{term.delete.image}"
                    data-op-code="meaning_image"
                    th:data-id="${image.id}"
                    data-toggle="delete-confirm"
                    sec:authorize="#vars.meaning.crudGrant">
              <i class="fa fa-remove" aria-hidden="true"></i>
            </button>
          </span>
          <span th:if="${#strings.isEmpty(image.title)}">
            <button type="button" class="btn badge badge-secondary align-bottom"
                    th:title="#{term.add.image.title}"
                    data-toggle="modal"
                    th:data-target="${'#addImageTitleDlg_' + image.id}"
                    sec:authorize="#vars.meaning.crudGrant">
              <i class="fa fa-plus" aria-hidden="true"></i>
            </button>
            <button type="button" class="btn badge badge-secondary align-bottom"
                    th:title="#{common.add.source.link}"
                    data-toggle="modal"
                    th:data-target="${'#addImageSourceLinkDlg_' + image.id}"
                    sec:authorize="#vars.meaning.crudGrant">
              <i class="fa fa-external-link" aria-hidden="true"></i>
            </button>
          </span>
        </div>
        <div class="col pl-0 hidden-buttons" th:if="${#strings.isEmpty(image.title)}">
          <th:block th:each="sourceLink : ${image.sourceLinks}">
            <div th:replace="termdialog :: edit_freeform_source_link_dlg"></div>
            <span>
              [
              <a th:href="@{'/ff_source_link:' + ${sourceLink.id}}" th:text="${sourceLink.value}"></a>
              <span th:if="${sourceLink.name != null}">
                <span th:text="${sourceLink.name}"></span>
              </span>
              <button type="button" class="btn badge badge-primary"
                      th:title="#{common.edit}"
                      data-toggle="modal"
                      th:data-target="${'#editFreeformSourceLinkDlg_' + sourceLink.id}"
                      sec:authorize="#vars.meaning.crudGrant">
                <i class="fa fa-edit" aria-hidden="true"></i>
              </button>
              <button type="button" class="btn badge badge-warning"
                      th:data-id="${sourceLink.id}"
                      data-op-code="ff_source_link"
                      data-toggle="delete-confirm"
                      data-placement="right"
                      sec:authorize="#vars.meaning.crudGrant">
                <i class="fa fa-remove" aria-hidden="true"></i>
              </button>
              ]
            </span>
          </th:block>
        </div>
        <div th:unless="${#strings.isEmpty(image.title)}">
          <div class="invisible-buttons action-buttons-anchor mw-80">
            <span th:text="${image.title}"></span>
            <span class="show-on-mouseover" th:if="${#lists.isEmpty(image.sourceLinks)}">
              [
              <button type="button" class="btn badge badge-secondary"
                      th:title="#{common.add.source.link}"
                      data-toggle="modal"
                      th:data-target="${'#addImageSourceLinkDlg_' + image.id}"
                      sec:authorize="#vars.meaning.crudGrant">
                <i class="fa fa-external-link" aria-hidden="true"></i>
              </button>
              ]
            </span>
            <div class="action-buttons-2">
              <button type="button" class="btn badge badge-primary"
                      th:title="#{common.edit}"
                      data-toggle="modal"
                      th:data-target="${'#editImageTitleDlg_' + image.id}"
                      sec:authorize="#vars.meaning.crudGrant">
                <i class="fa fa-edit" aria-hidden="true"></i>
              </button>
              <button type="button" class="btn badge badge-warning"
                      th:data-id="${image.id}"
                      data-op-code="image_title"
                      data-toggle="delete-confirm"
                      data-placement="right"
                      sec:authorize="#vars.meaning.crudGrant">
                <i class="fa fa-remove" aria-hidden="true"></i>
              </button>
            </div>
          </div>
          <div class="hidden-buttons">
            <th:block th:each="sourceLink : ${image.sourceLinks}">
              <div th:replace="termdialog :: edit_freeform_source_link_dlg"></div>
              <span>
                [
                <a th:href="@{'/ff_source_link:' + ${sourceLink.id}}" th:text="${sourceLink.value}"></a>
                <span th:if="${sourceLink.name != null}">
                  <span th:text="${sourceLink.name}"></span>
                </span>
                <button type="button" class="btn badge badge-primary"
                        th:title="#{common.edit}"
                        data-toggle="modal"
                        th:data-target="${'#editFreeformSourceLinkDlg_' + sourceLink.id}"
                        sec:authorize="#vars.meaning.crudGrant">
                  <i class="fa fa-edit" aria-hidden="true"></i>
                </button>
                <button type="button" class="btn badge badge-warning"
                        th:data-id="${sourceLink.id}"
                        data-op-code="ff_source_link"
                        data-toggle="delete-confirm"
                        data-placement="right"
                        sec:authorize="#vars.meaning.crudGrant">
                  <i class="fa fa-remove" aria-hidden="true"></i>
                </button>
                ]
              </span>
            </th:block>
            <button type="button" class="btn badge badge-secondary"
                    th:title="#{common.add.source.link}"
                    data-toggle="modal"
                    th:data-target="${'#addImageSourceLinkDlg_' + image.id}"
                    sec:authorize="#vars.meaning.crudGrant">
              <i class="fa fa-external-link" aria-hidden="true"></i>
            </button>
          </div>
          <hr>
        </div>
      </th:block>
    </div>
  </div>
  <div class="row no-gutters" th:if="${not #lists.isEmpty(meaning.medias)}" th:fragment="meaning_media">
    <hr>
    <div class="col pr-0 col-w13rem">
      <span class="lbl" th:text="#{term.meaning.media}">Videod ja muu meedia</span>
      <button type="button" class="btn badge badge-success float-right mr-4"
              th:title="#{term.add.media}"
              data-toggle="modal"
              th:data-target="${'#addMeaningMediaDlg_' + meaningId}"
              sec:authorize="#vars.meaning.crudGrant">
        <i class="fa fa-plus" aria-hidden="true"></i>
      </button>
    </div>
    <div class="col pl-0">
      <th:block th:each="media : ${meaning.medias}">
        <div th:replace="termdialog :: edit_meaning_media_dlg"></div>
        <div class="invisible-buttons action-buttons-anchor w-100">
          <iframe th:src="${media.sourceUrl}" allowfullscreen></iframe>
          <span class="invisible-buttons">
            <button type="button" class="btn badge badge-primary"
                    th:title="#{common.edit}"
                    data-toggle="modal"
                    th:data-target="${'#editMeaningMediaDlg_' + media.id}"
                    sec:authorize="#vars.meaning.crudGrant">
              <i class="fa fa-edit" aria-hidden="true"></i>
            </button>
            <button type="button" class="btn badge badge-warning"
                    th:title="#{term.delete.media}"
                    th:data-id="${media.id}"
                    data-op-code="meaning_media"
                    data-toggle="delete-confirm"
                    data-placement="right"
                    sec:authorize="#vars.meaning.crudGrant">
              <i class="fa fa-remove" aria-hidden="true"></i>
            </button>
          </span>
        </div>
        <hr>
      </th:block>
    </div>
  </div>
  <div class="row no-gutters" th:if="${not #lists.isEmpty(meaning.freeforms)}" th:fragment="meaning_freeform">
    <hr/>
    <div class="col pr-0 col-w13rem">
      <span class="lbl" th:text="#{term.meaning.attributes}">Tähenduse atribuudid</span>
    </div>
    <div class="col pl-0">
      <table>
        <tr th:each="freeform : ${meaning.freeforms}">
          <td style="vertical-align: text-top; padding-right: 1em">
            <span th:text="${freeform.type}"></span>
          </td>
          <td>
            <span th:utext="${freeform.valueText}" th:if="${freeform.valueText != null}"></span>
            <span th:text="${#dates.format(freeform.valueDate, 'dd.MM.yyyy HH:mm')}" th:if="${freeform.valueDate != null}"></span>
          </td>
        </tr>
      </table>
    </div>
  </div>
  <div class="row no-gutters" th:if="${not #lists.isEmpty(meaning.viewRelations)}" th:fragment="meaning_relation">
    <hr/>
    <div class="col pr-0 col-w13rem">
      <span class="lbl" th:text="#{term.meaning.relation}">Tähenduse seos</span>
      <button type="button" class="btn badge badge-success float-right mr-4"
              title="Lisa seos"
              data-toggle="modal"
              th:data-target="${'#addMeaningRelationDlg_' + meaningId}"
              sec:authorize="#vars.meaning.crudGrant">
        <i class="fa fa-plus" aria-hidden="true"></i>
      </button>
    </div>
    <div class="col pl-0">
      <table class="table table-striped" th:if="${not #lists.isEmpty(meaning.viewRelations)}">
        <tr th:each="relations : ${meaning.viewRelations}" th:with="relSample = ${relations.get(0)}" class="hidden-buttons">
          <td class="pr-3" th:if="${userProfile.showMeaningRelationMeaningId}">
            <span class="text-monospace" th:text="${relSample.meaningId}"></span>
          </td>
          <td class="pr-3">
            <th:block th:each="relation, relIter : ${relations}">
              <button type="button" class="btn btn-link p-0" th:data-id="${relation.meaningId}" name="details-btn"
                    data-behaviour="replace"
                    data-plugin="loadDetailsPlugin">
                <span th:utext="${viewUtil.getWordValueMarkup(relation)}"></span>
                <span th:text="${'(' + viewUtil.getLangIso2(relation.wordLang) + ')'}"></span>
                <th:block th:each="datasetCode, dsIter : ${relation.datasetCodes}">
                  <span th:if="${dsIter.first}">[</span>
                  <span th:text="${datasetCode}"></span>
                  <span th:unless="${dsIter.last}">,</span>
                  <span th:if="${dsIter.last}">]</span>
                </th:block>
                <th:block th:unless="${#strings.isEmpty(relation.wordAspectCode)}">
                  <span th:text="${'[' + relation.wordAspectCode + ']'}"></span>
                </th:block>
                <th:block th:each="valueStateCode, vsIter : ${relation.lexemeValueStateCodes}">
                  <span th:if="${vsIter.first}">[</span>
                  <span th:text="${valueStateCode}"></span>
                  <span th:unless="${vsIter.last}">,</span>
                  <span th:if="${vsIter.last}">]</span>
                </th:block>
                <th:block th:each="registerCode, rIter : ${relation.lexemeRegisterCodes}">
                  <span th:if="${rIter.first}">[</span>
                  <span th:text="${registerCode}"></span>
                  <span th:unless="${rIter.last}">,</span>
                  <span th:if="${rIter.last}">]</span>
                </th:block>
                <th:block th:each="government, gIter : ${relation.lexemeGovernmentValues}">
                  <span th:if="${gIter.first}">[</span>
                  <span th:utext="${government}"></span>
                  <span th:unless="${gIter.last}">,</span>
                  <span th:if="${gIter.last}">]</span>
                </th:block>
              </button>
              <span th:unless="${relIter.last}">,</span>
            </th:block>
          </td>
          <td>
            <span th:text="${relSample.relTypeLabel}"></span>
          </td>
          <td>
            <button type="button" class="btn badge badge-warning"
                    data-placement="right"
                    data-op-code="meaning_relation"
                    th:data-id="${relSample.id}"
                    data-toggle="delete-confirm"
                    sec:authorize="#vars.meaning.crudGrant">
              <i class="fa fa-remove" aria-hidden="true"></i>
            </button>
          </td>
        </tr>
      </table>
    </div>
  </div>
  <div class="block-subtitle" th:fragment="lexeme_header">
    <div class="d-flex align-items-center flex-wrap"> 
      <div class="hidden-buttons">
        <span class="ttl word-value"
              th:data-id="${lexeme.wordId}"
              th:id="${'word-value-' + lexeme.wordId}"
              th:utext="${viewUtil.getWordValueMarkup(lexeme.word)}"></span>
        <button type="button" class="btn badge badge-primary"
                th:title="#{common.edit}"
                data-toggle="modal"
                th:data-target="${'#editWordValueDlg_' + lexeme.lexemeId}"
                sec:authorize="${#vars.lexeme.crudGrant}">
          <i class="fa fa-edit" aria-hidden="true"></i>
        </button>
      </div>
      <th:block th:if="${lexeme.word.displayMorphCode != null}">
        <div class="hover-actions-container hover-actions-container-outline ml-2">
          <span data-toggle="tooltip" data-boundary="window" data-placement="top"
                th:text="'[' + ${lexeme.word.displayMorphCode} + ']'"
                th:title="#{term.word.display.morph}"></span>
          <div class="hover-actions">
            <div class="btn-group">
              <button type="button" class="btn btn-secondary btn-sm" th:title="#{common.edit}" data-toggle="modal"
                      th:data-target="${'#editWordDisplayMorphDlg_' + lexeme.wordId}"
                      sec:authorize="#vars.lexeme.word.subGrant">
                <i class="fa fa-caret-down action-icon" aria-hidden="true"></i>
              </button>
              <button type="button" class="btn btn-secondary btn-sm"
                      th:data-id="${lexeme.wordId}"
                      data-op-code="word_display_morph"
                      data-toggle="delete-confirm"
                      data-placement="right"
                      sec:authorize="#vars.lexeme.word.subGrant">
                <i class="fa fa-remove action-icon" aria-hidden="true"></i>
              </button>
            </div>
          </div>
        </div>
      </th:block>
      <button class="btn" data-plugin="identificator"><span class="fa fa-info-circle"></span></button>
      <button type="button" class="btn badge badge-secondary float-right mt-1"
              th:title="#{term.add.data}"
              data-toggle="modal"
              th:data-target="${'#addLexemeDataDlg_' + lexeme.lexemeId}"
              sec:authorize="#vars.lexeme.crudGrant">
        <i class="fa fa-plus" aria-hidden="true"></i>
      </button>
      <button class="btn" data-plugin="lexemePublicity"
              th:data-target="${'#editLexemePublicityDlg_' + lexeme.lexemeId}"
              th:data-edit-enabled="${#vars.lexeme.crudGrant}"
              th:data-public="${lexeme.public}"
              th:data-label="#{'boolean.public.' + ${lexeme.public}}">
        <span name="icon-span"></span>
      </button>
      <span class="valuestatus" data-plugin="valueStatus"></span>
    </div>
    <div class="ml-auto">
      <span th:text="${lexeme.datasetName}"></span>
    </div>
    <div class="ml-2">
      <button type="button" class="btn btn-link"
              th:data-id="${lexeme.lexemeId}"
              data-callback="refreshDetailsTermsSearch"
              data-toggle="deleteLexemeAndWordAndMeaning"
              sec:authorize="#vars.lexeme.crudGrant">Eemalda
      </button>
    </div>
    <div class="ml-2">
      <th:block th:replace="common :: ordering_buttons(${itemIter})" sec:authorize="#vars.meaning.crudGrant"></th:block>
    </div>
  </div>
  <div class="hidden-buttons row no-gutters" th:fragment="data_ids" style="display: none;">
    <div class="col pr-0 col-w13rem">
      <span class="lbl" th:text="#{term.data.ids}">Identifikaatorid</span>
    </div>
    <div class="col pl-0" data-id="identificators">
      <span class="pr-1" th:text="'W' + ${lexeme.wordId}"></span>
      <span class="pr-1" th:text="'L' + ${lexeme.lexemeId}"></span>
      <span class="pr-1" th:text="'M' + ${lexeme.meaningId}"></span>
    </div>
  </div>
  <div class="row no-gutters" th:if="${not #lists.isEmpty(lexeme.tags)}" th:fragment="lexeme_tags">
    <div class="col pr-0 col-w13rem">
      <span class="lbl" th:text="#{term.lexeme.tag}">Ilmiku silt</span>
      <button type="button" class="btn badge badge-secondary float-right mr-4"
              th:title="#{common.add.new}"
              data-toggle="modal"
              th:data-target="${'#addLexemeTagDlg_' + lexeme.lexemeId}"
              sec:authorize="#vars.lexeme.crudGrant">
        <i class="fa fa-plus" aria-hidden="true"></i>
      </button>
    </div>
    <div class="col pl-0">
      <span th:each="tag,tagIter : ${lexeme.tags}" class="hidden-buttons">
        <span th:text="${tag}"></span>
        <button type="button" class="btn badge badge-warning"
                th:data-id="${lexeme.lexemeId}"
                data-op-code="lexeme_tag"
                th:data-value="${tag}"
                data-toggle="delete-confirm"
                data-placement="right"
                sec:authorize="#vars.lexeme.crudGrant">
          <i class="fa fa-remove" aria-hidden="true"></i>
        </button>
        <span th:unless="${tagIter.last}">,</span>
      </span>
    </div>
  </div>
  <div class="row no-gutters" th:if="${not #lists.isEmpty(meaning.tags)}" th:fragment="meaning_tags">
    <div class="col pr-0 col-w13rem">
      <span class="lbl" th:text="#{term.meaning.tag}">Tähenduse silt</span>
      <button type="button" class="btn badge badge-success float-right mr-4"
              th:title="#{common.add.new}"
              data-toggle="modal"
              th:data-target="${'#addMeaningTagDlg_' + meaningId}"
              sec:authorize="#vars.meaning.crudGrant">
        <i class="fa fa-plus" aria-hidden="true"></i>
      </button>
    </div>
    <div class="col pl-0">
      <span th:each="tag,tagIter : ${meaning.tags}" class="hidden-buttons">
        <span th:text="${tag}"></span>
        <button type="button" class="btn badge badge-warning"
                th:data-id="${meaningId}"
                data-op-code="meaning_tag"
                th:data-value="${tag}"
                data-toggle="delete-confirm"
                data-placement="right"
                sec:authorize="#vars.meaning.crudGrant">
          <i class="fa fa-remove" aria-hidden="true"></i>
        </button>
        <span th:unless="${tagIter.last}">,</span>
      </span>
    </div>
  </div>
  <div class="hidden-buttons row no-gutters" th:if="${lexeme.lexemeValueState != null}" th:fragment="lexeme_value_state"  data-id="valuestatus" style="display: none;">
    <div class="col pr-0 col-w13rem">
      <span class="lbl" th:text="#{term.lexeme.value.state}">Väärtusolek</span>
    </div>
    <div class="col pl-0">
      <span th:text="${lexeme.lexemeValueState.value}"></span>
      <button type="button" class="btn badge badge-primary" th:title="#{common.edit}"
              data-toggle="modal"
              th:data-target="${'#editLexemeValueStateCodeDlg_' + lexeme.lexemeId}"
              sec:authorize="#vars.lexeme.crudGrant">
        <i class="fa fa-caret-down" aria-hidden="true"></i>
      </button>
      <button type="button" class="btn badge badge-warning"
              th:data-id="${lexeme.lexemeId}"
              data-op-code="lexeme_value_state"
              data-toggle="delete-confirm"
              data-placement="right"
              sec:authorize="#vars.lexeme.crudGrant">
        <i class="fa fa-remove" aria-hidden="true"></i>
      </button>
    </div>
  </div>
  <div class="row no-gutters" th:if="${not #lists.isEmpty(lexeme.grammars)}" th:fragment="lexeme_grammar">
    <div class="col pr-0 col-w13rem">
      <span class="lbl" th:text="#{term.lexeme.grammar}">Grammatika</span>
    </div>
    <div class="col pl-0">
      <span th:each="grammar,grammarIter : ${lexeme.grammars}" class="hidden-buttons">
        <span th:utext="${grammar.valuePrese}"></span>
        <span th:unless="${grammarIter.last}" class="ml-n1">,</span>
      </span>
    </div>
  </div>
  <div class="row no-gutters" th:if="${not #lists.isEmpty(lexeme.pos)}" th:fragment="lexeme_pos">
    <div class="col pr-0 col-w13rem">
      <span class="lbl" th:text="#{term.lexeme.pos}">Sõnaliik</span>
    </div>
    <div class="col pl-0">
      <span th:each="classif,classifIter : ${lexeme.pos}" class="hidden-buttons">
        <span th:replace="termdialog :: edit_lexeme_pos_dlg"></span>
        <span th:text="${classif.code}"></span>
        <th:block th:unless="${classif.code == classif.value}">
          -
          <span th:text="${classif.value}"></span>
        </th:block>
        <button type="button" class="btn badge badge-primary" th:title="#{common.edit}"
                data-toggle="modal"
                th:data-target="${'#editLexemePosDlg_' + lexeme.lexemeId + '_' + classifIter.index}"
                sec:authorize="#vars.lexeme.crudGrant">
          <i class="fa fa-caret-down" aria-hidden="true"></i>
        </button>
        <button type="button" class="btn badge badge-warning"
                th:data-id="${lexeme.lexemeId}"
                data-op-code="lexeme_pos"
                th:data-value="${classif.code}"
                data-toggle="delete-confirm"
                data-placement="right"
                sec:authorize="#vars.lexeme.crudGrant">
          <i class="fa fa-remove" aria-hidden="true"></i>
        </button>
        <span th:unless="${classifIter.last}">,</span>
      </span>
    </div>
  </div>
  <div class="row no-gutters" th:if="${not #lists.isEmpty(lexeme.derivs)}" th:fragment="lexeme_derivative">
    <div class="col pr-0 col-w13rem">
      <span class="lbl" th:text="#{term.lexeme.deriv}">Tuletuskood</span>
    </div>
    <div class="col pl-0">
      <span th:each="classif,classifIter : ${lexeme.derivs}" class="hidden-buttons">
        <span th:replace="termdialog :: edit_lexeme_deriv_dlg"></span>
        <span th:text="${classif.code}"></span>
        <th:block th:unless="${classif.code == classif.value}">
          -
          <span th:text="${classif.value}"></span>
        </th:block>
        <button type="button" class="btn badge badge-primary" th:title="#{common.edit}"
                data-toggle="modal"
                th:data-target="${'#editLexemeDerivDlg_' + lexeme.lexemeId + '_' + classifIter.index}"
                sec:authorize="#vars.lexeme.crudGrant">
          <i class="fa fa-caret-down" aria-hidden="true"></i>
        </button>
        <button type="button" class="btn badge badge-warning"
                th:data-id="${lexeme.lexemeId}"
                data-op-code="lexeme_deriv"
                th:data-value="${classif.code}"
                data-toggle="delete-confirm"
                data-placement="right"
                sec:authorize="#vars.lexeme.crudGrant">
          <i class="fa fa-remove" aria-hidden="true"></i>
        </button>
        <span th:unless="${classifIter.last}">,</span>
      </span>
    </div>
  </div>
  <div class="row no-gutters" th:if="${not #lists.isEmpty(lexeme.registers)}" th:fragment="lexeme_register">
    <div class="col pr-0 col-w13rem">
      <span class="lbl" th:text="#{term.lexeme.register}">Register</span>
    </div>
    <div class="col pl-0">
      <span th:each="classif,classifIter : ${lexeme.registers}" class="hidden-buttons">
        <span th:replace="termdialog :: edit_lexeme_register_dlg"></span>
        <span th:text="${classif.code}"></span>
        <th:block th:unless="${classif.code == classif.value}">
          -
          <span th:text="${classif.value}"></span>
        </th:block>
        <button type="button" class="btn badge badge-primary" th:title="#{common.edit}"
                data-toggle="modal"
                th:data-target="${'#editLexemeRegisterDlg_' + lexeme.lexemeId + '_' + classifIter.index}"
                sec:authorize="#vars.lexeme.crudGrant">
          <i class="fa fa-caret-down" aria-hidden="true"></i>
        </button>
        <button type="button" class="btn badge badge-warning"
                th:data-id="${lexeme.lexemeId}"
                data-op-code="lexeme_register"
                th:data-value="${classif.code}"
                data-toggle="delete-confirm"
                data-placement="right"
                sec:authorize="#vars.lexeme.crudGrant">
          <i class="fa fa-remove" aria-hidden="true"></i>
        </button>
        <span th:unless="${classifIter.last}">,</span>
      </span>
    </div>
  </div>
  <div class="row no-gutters" th:if="${not #lists.isEmpty(lexeme.regions)}" th:fragment="lexeme_region">
    <div class="col pr-0 col-w13rem">
      <span class="lbl">Regioon</span>
    </div>
    <div class="col pl-0">
      <span th:each="classif,classifIter : ${lexeme.regions}" class="hidden-buttons">
        <span th:replace="termdialog :: edit_lexeme_region_dlg"></span>
        <span th:text="${classif.code}"></span>
        <th:block th:unless="${classif.code == classif.value}">
          -
          <span th:text="${classif.value}"></span>
        </th:block>
        <button type="button" class="btn badge badge-primary" th:title="#{common.edit}"
                data-toggle="modal"
                th:data-target="${'#editLexemeRegionDlg_' + lexeme.lexemeId + '_' + classifIter.index}">
          <i class="fa fa-caret-down" aria-hidden="true"></i>
        </button>
        <button type="button" class="btn badge badge-warning"
                th:data-id="${lexeme.lexemeId}"
                data-op-code="lexeme_region"
                th:data-value="${classif.code}"
                data-toggle="delete-confirm"
                data-placement="right">
          <i class="fa fa-remove" aria-hidden="true"></i>
        </button>
        <span th:unless="${classifIter.last}">,</span>
      </span>
    </div>
  </div>
  <div class="row mr-0 hidden-buttons no-gutters" th:if="${lexeme.reliability != null}" th:fragment="lexeme_reliability">
    <div class="col pr-0 col-w13rem">
      <span class="lbl" th:text="#{term.lexeme.reliability}">Usaldusväärsus</span>
    </div>
    <div class="col pl-0">
      <span class="fa fa-star" th:classappend="${lexeme.reliability >= 1} ? 'text-warning': ''"></span>
      <span class="fa fa-star" th:classappend="${lexeme.reliability >= 2} ? 'text-warning': ''"></span>
      <span class="fa fa-star" th:classappend="${lexeme.reliability >= 3} ? 'text-warning': ''"></span>
      <span class="fa fa-star" th:classappend="${lexeme.reliability >= 4} ? 'text-warning': ''"></span>
      <span class="fa fa-star" th:classappend="${lexeme.reliability >= 5} ? 'text-warning': ''"></span>
      <button type="button" class="btn badge badge-primary" th:title="#{common.edit}" data-toggle="modal"
              th:data-target="${'#editLexemeReliabilityDlg_' + lexeme.lexemeId}">
        <i class="fa fa-caret-down" aria-hidden="true"></i>
      </button>
      <button type="button" class="btn badge badge-warning"
              th:data-id="${lexeme.lexemeId}"
              data-op-code="lexeme_reliability"
              data-toggle="delete-confirm"
              data-placement="right"
              sec:authorize="${#vars.lexeme.crudGrant}">
        <i class="fa fa-remove" aria-hidden="true"></i>
      </button>
    </div>
  </div>
  <div class="row mt-2 no-gutters" th:if="${not #lists.isEmpty(lexeme.sourceLinks)}" th:fragment="lexeme_source_link">
    <hr/>
    <div class="col pr-0 col-w13rem">
      <span class="lbl" th:text="#{term.source.link}">Allikaviide</span>
      <button type="button" class="btn badge badge-secondary float-right mr-4"
              th:title="#{common.add.source.link}"
              data-toggle="modal"
              th:data-target="${'#addLexemeSourceLinkDlg_' + lexeme.lexemeId}"
              sec:authorize="#vars.lexeme.crudGrant">
        <i class="fa fa-external-link" aria-hidden="true"></i>
      </button>
    </div>
    <div class="col pl-0 hidden-buttons">
      <th:block th:each="sourceLink : ${lexeme.sourceLinks}">
        <div th:replace="termdialog :: edit_lexeme_source_link_dlg"></div>
        <span>
          [
          <a th:href="@{'/lex_source_link:' + ${sourceLink.id}}" th:text="${sourceLink.value}"></a>
          <span th:if="${sourceLink.name != null}">
            <span th:text="${sourceLink.name}"></span>
          </span>
          <button type="button" class="btn badge badge-primary"
                  th:title="#{common.edit}"
                  data-toggle="modal"
                  th:data-target="${'#editLexemeSourceLinkDlg_' + sourceLink.id}"
                  sec:authorize="#vars.lexeme.crudGrant">
            <i class="fa fa-edit" aria-hidden="true"></i>
          </button>
          <button type="button" class="btn badge badge-warning"
                  data-placement="right"
                  th:data-id="${sourceLink.id}"
                  data-op-code="lex_source_link"
                  data-toggle="delete-confirm"
                  sec:authorize="#vars.lexeme.crudGrant">
            <i class="fa fa-remove" aria-hidden="true"></i>
          </button>
          ]
        </span>
      </th:block>
    </div>
  </div>
  <div class="row no-gutters" th:if="${not #lists.isEmpty(lexeme.usages)}" th:fragment="lexeme_usage">
    <hr/>
    <div class="col pr-0 col-w13rem">
      <span class="lbl" th:text="#{term.usage}">Kasutusnäide</span>
      <button type="button" class="btn badge badge-secondary float-right mr-4"
              th:title="#{common.add.new}"
              data-toggle="modal"
              th:data-target="${'#addUsageDlg_' + lexeme.lexemeId}"
              sec:authorize="#vars.lexeme.crudGrant">
        <i class="fa fa-plus" aria-hidden="true"></i>
      </button>
    </div>
    <div class="col pl-0">
      <div th:each="usage : ${lexeme.usages}">
        <div th:replace="termdialog :: edit_usage_dlg"></div>
        <div th:replace="termdialog :: add_usage_source_link_dlg"></div>
        <div class="invisible-buttons action-buttons-anchor mw-80 ml-3">
          <div style="display: list-item; position: absolute"></div>
          <span th:utext="${usage.value}"></span>
          <span th:if="${usage.typeValue != null}" th:text="'(' + ${usage.typeValue + ')'}"></span>
          <div class="d-inline-block ctxt" th:text="'(' + #{'boolean.public.' + ${usage.public}} + ')'" th:if="${usage.crudGrant}"></div>
          <span class="show-on-mouseover" th:if="${#lists.isEmpty(usage.sourceLinks)}">
            [
            <button type="button" class="btn badge badge-secondary"
                    th:title="#{common.add.source.link}"
                    data-toggle="modal"
                    th:data-target="${'#addUsageSourceLinkDlg_' + usage.id}"
                    sec:authorize="#vars.usage.crudGrant">
              <i class="fa fa-external-link" aria-hidden="true"></i>
            </button>
            ]
          </span>
          <div class="action-buttons-2">
            <button type="button" class="btn badge badge-primary"
                    th:title="#{common.edit}"
                    data-toggle="modal"
                    th:data-target="${'#editUsageDlg_' + lexeme.lexemeId + '_' + usage.id}"
                    sec:authorize="#vars.usage.crudGrant">
              <i class="fa fa-edit" aria-hidden="true"></i>
            </button>
            <button type="button" class="btn badge badge-warning"
                    th:data-id="${usage.id}"
                    data-op-code="usage"
                    data-toggle="delete-confirm"
                    data-placement="right"
                    sec:authorize="#vars.usage.crudGrant">
              <i class="fa fa-remove" aria-hidden="true"></i>
            </button>
          </div>
        </div>
        <div class="hidden-buttons" th:if="${not #lists.isEmpty(usage.sourceLinks)}">
          <th:block th:each="sourceLink : ${usage.sourceLinks}">
            <div th:replace="termdialog :: edit_freeform_source_link_dlg"></div>
            <span>
              [
              <a th:href="@{'/ff_source_link:' + ${sourceLink.id}}" th:text="${sourceLink.value}"></a>
              <span th:text="${sourceLink.name}" th:if="${sourceLink.name != null}"></span>
              <button type="button" class="btn badge badge-primary"
                      th:title="#{common.edit}"
                      data-toggle="modal"
                      th:data-target="${'#editFreeformSourceLinkDlg_' + sourceLink.id}"
                      sec:authorize="#vars.usage.crudGrant">
                <i class="fa fa-edit" aria-hidden="true"></i>
              </button>
              <button type="button" class="btn badge badge-warning"
                      th:data-id="${sourceLink.id}"
                      data-op-code="ff_source_link"
                      data-toggle="delete-confirm"
                      data-placement="right"
                      sec:authorize="#vars.usage.crudGrant">
                <i class="fa fa-remove" aria-hidden="true"></i>
              </button>
              ]
            </span>
          </th:block>
          <button type="button" class="btn badge badge-secondary"
                  th:title="#{common.add.source.link}"
                  data-toggle="modal"
                  th:data-target="${'#addUsageSourceLinkDlg_' + usage.id}"
                  sec:authorize="#vars.usage.crudGrant">
            <i class="fa fa-external-link" aria-hidden="true"></i>
          </button>
        </div>
      </div>
    </div>
  </div>
  <div class="row no-gutters" th:if="${not #lists.isEmpty(lexeme.lexemeRelations)}" th:fragment="lexeme_relation">
    <hr/>
    <div class="col pr-0 col-w13rem">
      <span class="lbl" th:text="#{term.lexeme.relation}">Ilmiku seos</span>
      <button type="button" class="btn badge badge-secondary float-right mr-4"
              th:title="#{term.add.relation}"
              data-toggle="modal"
              th:data-target="${'#addLexemeRelationDlg_' + lexeme.lexemeId}"
              sec:authorize="#vars.lexeme.crudGrant">
        <i class="fa fa-plus" aria-hidden="true"></i>
      </button>
    </div>
    <div class="col pl-0">
      <table class="orderable" data-op-code="lexeme_relation" th:if="${not #lists.isEmpty(lexeme.lexemeRelations)}">
        <tr th:each="relation, itemIter : ${lexeme.lexemeRelations}" th:data-id="${relation.id}" th:data-orderby="${relation.orderBy}">
          <td class="action-column">
            <th:block th:replace="common :: ordering_buttons(${itemIter})" sec:authorize="#vars.lexeme.crudGrant"></th:block>
          </td>
          <td class="pr-3 invisible-buttons">
            <button type="button" class="btn btn-link btn-xs" th:data-id="${relation.meaningId}" name="details-btn"
                  data-behaviour="replace"
                  data-plugin="loadDetailsPlugin">
              <span th:utext="${viewUtil.getWordValueMarkup(relation) + ' (' + viewUtil.getLangIso2(relation.wordLang) + ')'}"></span>
            </button>
            <button type="button" class="btn badge badge-warning"
                    th:data-id="${relation.id}"
                    data-op-code="lexeme_relation"
                    data-toggle="delete-confirm"
                    data-placement="left"
                    sec:authorize="#vars.lexeme.crudGrant">
              <i class="fa fa-remove" aria-hidden="true"></i>
            </button>
          </td>
          <td class="invisible-buttons">
            <span th:text="${relation.relTypeLabel}"></span>
          </td>
        </tr>
      </table>
    </div>
  </div>
  <div class="row no-gutters" th:if="${not #lists.isEmpty(lexeme.noteLangGroups)}" th:fragment="lexeme_note">
    <hr/>
    <div class="col pr-0 col-w13rem">
      <span class="lbl">
        <span th:text="#{term.lexeme.note}"></span>
        <button type="button" class="btn badge badge-secondary float-right mr-4"
                th:title="#{common.add.new}"
                data-toggle="modal"
                th:data-target="${'#addLexemeNoteDlg_' + lexeme.lexemeId}"
                sec:authorize="#vars.lexeme.crudGrant">
          <i class="fa fa-plus" aria-hidden="true"></i>
        </button>
      </span>
    </div>
    <div class="col pl-0">
      <th:block th:each="noteLangGroup : ${lexeme.noteLangGroups}">
        <div>
          <span th:text="${viewUtil.getLangIso2(noteLangGroup.lang)}" class="mr-2"></span>
          <button name="lang-collapse-btn" type="button" class="btn badge badge-secondary btn-toggle"
                  th:data-lang="${noteLangGroup.lang}"
                  th:title="${noteLangGroup.selected} ? #{common.hide.lang.group} : #{common.show.lang.group}"
                  data-plugin="langCollapsePlugin">
            <i th:class="${noteLangGroup.selected ? 'fa fa-caret-down' : 'fa fa-caret-right'}" aria-hidden="true"></i>
          </button>
        </div>
        <div th:if="${noteLangGroup.selected}" class="orderable" data-op-code="lexeme_note">
          <div class="ml-4" style="position: relative"
               th:each="note, itemIter: ${noteLangGroup.notes}"
               th:data-id="${note.id}"
               th:data-orderby="${note.orderBy}">
            <div th:replace="termdialog :: edit_lexeme_note_dlg"></div>
            <div th:replace="termdialog :: add_lexeme_note_source_link_dlg"></div>
            <div style="display: list-item; position: absolute"></div>
            <div class="action-column">
              <th:block th:replace="common :: ordering_buttons(${itemIter})" sec:authorize="#vars.lexeme.crudGrant"></th:block>
            </div>
            <div class="invisible-buttons action-buttons-anchor mw-80">
              <span th:utext="${note.valuePrese}"></span>
              <span class="ctxt" th:text="'(' + #{'boolean.public.' + ${note.public}} + ')'" th:if="${lexeme.crudGrant}"></span>
              <span class="show-on-mouseover" th:if="${#lists.isEmpty(note.sourceLinks)}">
                [
                <button type="button" class="btn badge badge-secondary"
                        th:title="#{common.add.source.link}"
                        data-toggle="modal"
                        th:data-target="${'#addLexemeNoteSourceLinkDlg_' + lexeme.lexemeId + '_' + note.id}"
                        sec:authorize="#vars.lexeme.crudGrant">
                  <i class="fa fa-external-link" aria-hidden="true"></i>
                </button>
                ]
              </span>
              <div class="action-buttons-2">
                <button type="button" class="btn badge badge-primary"
                        th:title="#{common.edit}"
                        data-toggle="modal"
                        th:data-target="${'#editLexemeNoteDlg_' + lexeme.lexemeId + '_' + note.id}"
                        sec:authorize="#vars.lexeme.crudGrant">
                  <i class="fa fa-edit" aria-hidden="true"></i>
                </button>
                <button type="button" class="btn badge badge-warning"
                        th:data-id="${note.id}"
                        data-op-code="lexeme_note"
                        data-toggle="delete-confirm"
                        data-placement="right"
                        sec:authorize="#vars.lexeme.crudGrant">
                  <i class="fa fa-remove" aria-hidden="true"></i>
                </button>
              </div>
            </div>
            <div class="hidden-buttons">
              <th:block th:each="sourceLink : ${note.sourceLinks}">
                <div th:replace="termdialog :: edit_freeform_source_link_dlg"></div>
                <span>
                  [
                  <a th:href="@{'/ff_source_link:' + ${sourceLink.id}}" th:text="${sourceLink.value}"></a>
                  <span th:if="${sourceLink.name != null}">
                    <span th:text="${sourceLink.name}"></span>
                  </span>
                  <button type="button" class="btn badge badge-primary"
                          th:title="#{common.edit}"
                          data-toggle="modal"
                          th:data-target="${'#editFreeformSourceLinkDlg_' + sourceLink.id}"
                          sec:authorize="#vars.lexeme.crudGrant">
                    <i class="fa fa-edit" aria-hidden="true"></i>
                  </button>
                  <button type="button" class="btn badge badge-warning"
                          th:data-id="${sourceLink.id}"
                          data-op-code="ff_source_link"
                          data-toggle="delete-confirm"
                          data-placement="right"
                          sec:authorize="#vars.lexeme.crudGrant">
                    <i class="fa fa-remove" aria-hidden="true"></i>
                  </button>
                  ]
                </span>
              </th:block>
              <button type="button" class="btn badge badge-secondary"
                      th:title="#{common.add.source.link}"
                      data-toggle="modal"
                      th:data-target="${'#addLexemeNoteSourceLinkDlg_' + lexeme.lexemeId + '_' + note.id}"
                      sec:authorize="#vars.lexeme.crudGrant">
                <i class="fa fa-external-link" aria-hidden="true"></i>
              </button>
            </div>
          </div>
        </div>
      </th:block>
    </div>
  </div>
  <div th:if="${not #lists.isEmpty(lexeme.freeforms)}" class="row no-gutters" th:fragment="lexeme_freeform">
    <hr/>
    <div class="col pr-0 col-w13rem">
      <span class="lbl" th:text="#{term.lexeme.attributes}">Ilmiku atribuudid</span>
    </div>
    <div class="col pl-0">
      <table>
        <tr th:each="freeform : ${lexeme.freeforms}">
          <td style="vertical-align: text-top; padding-right: 1em">
            <span th:text="${freeform.type}"></span>
          </td>
          <td>
            <span th:utext="${freeform.valueText}" th:if="${freeform.valueText != null}"></span>
            <span th:text="${#dates.format(freeform.valueDate, 'dd.MM.yyyy HH:mm')}" th:if="${freeform.valueDate != null}"></span>
          </td>
        </tr>
      </table>
    </div>
  </div>
  <div class="row mr-0 hidden-buttons no-gutters" th:if="${lexeme.word.genderCode != null}" th:fragment="word_gender">
    <div class="col pr-0 col-w13rem">
      <span class="lbl" th:text="#{term.word.gender}">Sugu</span>
    </div>
    <div class="col pl-0">
      <span th:text="${viewUtil.getClassifierValue(lexeme.word.genderCode, wordGenders)}"></span>
      <button type="button" class="btn badge badge-primary" th:title="#{common.edit}"
              data-toggle="modal"
              th:data-target="${'#editWordGenderDlg_' + lexeme.lexemeId + '_' + lexeme.wordId}">
        <i class="fa fa-caret-down" aria-hidden="true"></i>
      </button>
      <button type="button" class="btn badge badge-warning"
              th:data-id="${lexeme.wordId}"
              data-op-code="word_gender"
              data-toggle="delete-confirm"
              data-placement="right"
              sec:authorize="${#vars.lexeme.word.subGrant}">
        <i class="fa fa-remove" aria-hidden="true"></i>
      </button>
    </div>
  </div>
  <div class="row mr-0 no-gutters" th:if="${not #lists.isEmpty(lexeme.wordTypes)}" th:fragment="word_type">
    <div class="col pr-0 col-w13rem">
      <span class="lbl" th:text="#{term.word.type}">Keelendi tüüp</span>
    </div>
    <div class="col pl-0">
      <span th:each="classif,classifIter : ${lexeme.wordTypes}" class="hidden-buttons">
        <span th:replace="termdialog :: edit_word_type_dlg"></span>
        <span th:text="${classif.code}"></span>
        <th:block th:unless="${classif.code == classif.value}">
          -
          <span th:text="${classif.value}"></span>
        </th:block>
        <button type="button" class="btn badge badge-primary" th:title="#{common.edit}"
                data-toggle="modal"
                th:data-target="${'#editWordTypeDlg_' + lexeme.lexemeId + '_' + lexeme.wordId + '_' + classifIter.index}"
                sec:authorize="${#vars.lexeme.word.subGrant}">
          <i class="fa fa-caret-down" aria-hidden="true"></i>
        </button>
        <button type="button" class="btn badge badge-warning"
                th:data-id="${lexeme.wordId}"
                data-op-code="word_type"
                th:data-value="${classif.code}"
                data-toggle="delete-confirm"
                data-placement="right"
                sec:authorize="${#vars.lexeme.word.subGrant}">
          <i class="fa fa-remove" aria-hidden="true"></i>
        </button>
        <span th:unless="${classifIter.last}">,</span>
      </span>
    </div>
  </div>
  <div class="border-top px-0 w-100 ekiAccordion__instance" th:fragment="word_forum">
    <div class="ekiAccordion__title">
      <span class="badge badge-data-exists" th:unless="${#lists.isEmpty(lexeme.word.forums)}">•</span>
      <span th:text="#{term.word.forum}">Keelendi sisemärkus</span>
      <button type="button" class="ekiAccordion__add"
              th:title="#{common.add.new}"
              data-toggle="modal"
              th:data-target="${'#addWordForumDlg_' + lexeme.lexemeId}"
              sec:authorize="#vars.userRoleData.crudRoleSelected">
        <i class="fa fa-plus" aria-hidden="true"></i>
      </button>
    </div>
    <div class="ekiAccordion__content overflow-auto">
      <div th:if="${#lists.isEmpty(lexeme.word.forums)}" th:text="#{common.no.content}">
        Sisu puudub...
      </div>
      <div th:each="forum,forumIter : ${lexeme.word.forums}">
        <div th:replace="termdialog :: edit_word_forum_dlg"></div>
        <div class="col hidden-buttons pr-5" th:classappend="${forumIter.last ? '' : 'mb-3'}">
          <div class="action-buttons-anchor">
            <span th:utext="${forum.valuePrese}"></span>
            <span class="ctxt" th:text="'[' + ${forum.modifiedBy} + ']'" th:if="${forum.modifiedBy != null}"></span>
            <span class="ctxt" th:text="'(' + ${#dates.format(forum.modifiedOn, 'dd.MM.yyyy')} + ')'" th:if="${forum.modifiedOn != null}"></span>
            <div class="action-buttons-2">
              <button type="button" class="btn badge badge-primary"
                      th:title="#{common.edit}"
                      data-toggle="modal"
                      th:data-target="${'#editWordForumDlg_' + forum.id}"
                      sec:authorize="#vars.forum.crudGrant">
                <i class="fa fa-edit" aria-hidden="true"></i>
              </button>
              <button type="button" class="btn badge badge-warning"
                      th:data-id="${forum.id}"
                      data-op-code="word_forum"
                      data-toggle="delete-confirm"
                      data-placement="right"
                      sec:authorize="#vars.forum.crudGrant">
                <i class="fa fa-remove" aria-hidden="true"></i>
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="border-top px-0 w-100 ekiAccordion__instance" th:fragment="meaning_forum">
    <div class="ekiAccordion__title">
      <span class="badge badge-data-exists" th:unless="${#lists.isEmpty(meaning.forums)}">•</span>
      <span th:text="#{term.meaning.forum}">Tähenduse sisemärkus</span>
      <button type="button" class="ekiAccordion__add"
              th:title="#{common.add.new}"
              data-toggle="modal"
              th:data-target="${'#addMeaningForumDlg_' + meaningId}"
              sec:authorize="#vars.userRoleData.crudRoleSelected">
        <i class="fa fa-plus" aria-hidden="true"></i>
      </button>
    </div>
    <div class="ekiAccordion__content overflow-auto">
      <div th:if="${#lists.isEmpty(meaning.forums)}" th:text="#{common.no.content}">
        Sisu puudub...
      </div>
      <div th:each="forum,forumIter : ${meaning.forums}">
        <div th:replace="termdialog :: edit_meaning_forum_dlg"></div>
        <div class="col hidden-buttons pr-5" th:classappend="${forumIter.last ? '' : 'mb-3'}">
          <div class="action-buttons-anchor">
            <span th:utext="${forum.valuePrese}"></span>
            <span class="ctxt" th:text="'[' + ${forum.modifiedBy} + ']'" th:if="${forum.modifiedBy != null}"></span>
            <span class="ctxt" th:text="'(' + ${#dates.format(forum.modifiedOn, 'dd.MM.yyyy')} + ')'" th:if="${forum.modifiedOn != null}"></span>
            <div class="action-buttons-2">
              <button type="button" class="btn badge badge-primary"
                      th:title="#{common.edit}"
                      data-toggle="modal"
                      th:data-target="${'#editMeaningForumDlg_' + forum.id}"
                      sec:authorize="#vars.forum.crudGrant">
                <i class="fa fa-edit" aria-hidden="true"></i>
              </button>
              <button type="button" class="btn badge badge-warning"
                      th:data-id="${forum.id}"
                      data-op-code="meaning_forum"
                      data-toggle="delete-confirm"
                      data-placement="right"
                      sec:authorize="#vars.forum.crudGrant">
                <i class="fa fa-remove" aria-hidden="true"></i>
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="border-top px-0 w-100 ekiAccordion__instance" th:fragment="word_od_recommendation">
    <div class="ekiAccordion__title">
      <span class="badge badge-data-exists" th:unless="${#lists.isEmpty(lexeme.word.odWordRecommendations)}">•</span>
      <span th:text="#{term.word.od.recommendation}">ÕS soovitab</span>
      <button type="button" class="ekiAccordion__add"
              th:title="#{common.add.new}"
              data-toggle="modal"
              th:data-target="${'#addOdWordRecommendationDlg_' + lexeme.lexemeId}"
              sec:authorize="#vars.lexeme.word.subGrant">
        <i class="fa fa-plus" aria-hidden="true"></i>
      </button>
    </div>
    <div class="ekiAccordion__content overflow-auto">
      <div th:if="${#lists.isEmpty(lexeme.word.odWordRecommendations)}" th:text="#{common.no.content}">
        Sisu puudub...
      </div>
      <div th:each="odWordRecommendation : ${lexeme.word.odWordRecommendations}">
        <div th:replace="termdialog :: edit_od_word_recommendation"></div>
        <div class="col hidden-buttons pr-5">
          <div class="action-buttons-anchor">
            <span th:utext="${odWordRecommendation.valuePrese}"></span>
            <span class="ctxt" th:text="'[' + ${odWordRecommendation.modifiedBy} + ']'" th:if="${odWordRecommendation.modifiedBy != null}"></span>
            <span class="ctxt" th:text="'(' + #{'enum.complexity.' + ${odWordRecommendation.complexity}} + ')'"></span>
            <span class="ctxt" th:text="'(' + ${#dates.format(odWordRecommendation.modifiedOn, 'dd.MM.yyyy')} + ')'" th:if="${odWordRecommendation.modifiedOn != null}"></span>
            <div class="action-buttons-2">
              <button type="button" class="btn badge badge-primary"
                      th:title="#{common.edit}"
                      data-toggle="modal"
                      th:data-target="${'#editOdWordRecommendationDlg_' + odWordRecommendation.id}"
                      sec:authorize="#vars.lexeme.word.crudGrant">
                <i class="fa fa-edit" aria-hidden="true"></i>
              </button>
              <button type="button" class="btn badge badge-warning"
                      th:data-id="${odWordRecommendation.id}"
                      data-op-code="od_word_recommendation"
                      data-toggle="delete-confirm"
                      data-placement="right"
                      sec:authorize="#vars.lexeme.word.crudGrant">
                <i class="fa fa-remove" aria-hidden="true"></i>
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</body>
</html>
