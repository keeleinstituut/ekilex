<!DOCTYPE HTML>
<html lang="et" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head></head>
<body>
  <div id="synCandidatesListDiv"
       class="overflow-auto h-100"
       data-panel-index="3"
       th:fragment="syn_candidate_list">
    <ul th:if="${not #lists.isEmpty(details.wordRelationDetails.wordSynRelations)}" width="100%" class="orderable list-unstyled p-0"
          data-op-code="word_relation"
          data-sorter:type="relations"
          data-plugin="sorter">
      <li th:each="synRelation,relationIter : ${details.wordRelationDetails.wordSynRelations}"
          class="border w-100"
          th:data-id="${synRelation.id}"
          th:data-orderby="${synRelation.orderBy}">
        <div class="d-flex flex-row hover-actions-container align-items-center pl-1 bg-light"
             th:data-word-id="${synRelation.wordId}"
             th:data-word="${synRelation.wordValue}"
             th:data-meaning-id="${synRelation.meaningId}">
          <span th:if="${synRelation.relationStatus}" th:title="#{|relationstatus.${synRelation.relationStatus}|}" data-toggle="tooltip" class="px-2">
            <i class="fa" th:classappend="#{|relationstatus.icon.${synRelation.relationStatus}|}" aria-hidden="true"></i>
          </span>
          <span th:unless="${synRelation.relationStatus}" th:title="#{syn.no.relation}" data-toggle="tooltip" class="px-2">
            <i class="fa fa-exclamation-triangle text-muted" aria-hidden="true"></i>
          </span>
          <div class="mr-auto pl-0 d-flex flex-row flex-nowrap align-items-center">
            <p class="py-2 pr-1 m-0 list-item-value" th:inline="text">
              <span th:utext="${viewUtil.getWordValueMarkup(synRelation)}"></span>
            </p>
          </div>
          <div class="hover-actions">
            <button type="button" th:hidden="${relationIter.first}" class="btn btn-xs btn-secondary order-up "
                  th:title="#{common.update.ordering}"
                  data-plugin="changeItemOrderingPlugin">
              <i class="fa fa-arrow-up" aria-hidden="true"></i>
            </button>
            <button type="button" th:hidden="${relationIter.last}" class="btn btn-xs  btn-secondary order-down "
                    th:title="#{common.update.ordering}"
                  data-plugin="changeItemOrderingPlugin">
              <i class="fa fa-arrow-down" aria-hidden="true"></i>
            </button>
            <button type="button" class="btn  btn-xs btn-secondary rel-status-btn" th:data-id="${synRelation.id}"
                  data-status="UNDEFINED"
                  th:title="#{syn.update.undefined}"
                  data-plugin="changeSynRelationPlugin">
              <i class="fa fa-question" aria-hidden="true"></i>
            </button>
            <button type="button" class="btn btn-xs btn-success rel-status-btn" th:data-id="${synRelation.id}"
                  data-status="PROCESSED"
                  th:title="#{syn.update.processed}"
                  data-plugin="changeSynRelationPlugin">
              <i class="fa fa-check" aria-hidden="true"></i>
            </button>
            <button type="button" class="btn btn-xs btn-danger rel-status-btn" th:data-id="${synRelation.id}"
                  data-status="DELETED"
                  data-placement="right"
                  th:title="#{syn.update.deleted}"
                  data-plugin="changeSynRelationPlugin">
              <i class="fa fa-remove" aria-hidden="true"></i>
            </button>
          </div>
          <button type="button" class="btn btn-sm px-0 syn-stats-popover" data-trigger="hover" data-toggle="popover" th:data-title="${synRelation.wordValue}" data-html="true">
            <i class="fa fa-bar-chart action-icon px-2 d-block" aria-hidden="true"></i>
          </button>
          <div class="syn-stats-content d-none">
            <div th:if="${not #lists.isEmpty(synRelation.wordLexemesPoses)}">
              <span th:text="#{syn.lexeme.pos}">SÃµnaliik:</span>
              <th:block th:each="lexemePos,lexemePosIter : ${synRelation.wordLexemesPoses}">
                <span th:text="${lexemePos}"></span>
                <span th:unless="${lexemePosIter.last}">, </span>
              </th:block>
            </div>
            <div>
              <br>
              <ul th:if="${not #lists.isEmpty(synRelation.relationParams)}" class="list-unstyled">
                <li th:each="relationParam : ${synRelation.relationParams}" class="d-flex flex-row flex-nowrap row">
                  <span class="col-6" th:text="${relationParam.name}">Label</span>
                  <span class="col-6" th:text="${relationParam.value}">Value</span>
                </li>
              </ul>
              <p th:if="${#lists.isEmpty(synRelation.relationParams)}" th:text="#{syn.no.relation.params}">Seosetugevuste andmed puuduvad</p>
            </div>
          </div>
          <span th:if="${synRelation.oppositeRelationStatus != null}"
                th:title="#{|relationstatus.${synRelation.oppositeRelationStatus}|}"
                data-toggle="tooltip"
                class="border-left border-light px-2">
            <i class="fa" th:classappend="#{|relationstatus.icon.${synRelation.oppositeRelationStatus}|}" aria-hidden="true"></i>
          </span>
          <span th:if="${synRelation.oppositeRelationStatus == null}" th:title="#{syn.no.relation}" data-toggle="tooltip" class="border-left border-light px-2">
            <i class="fa fa-exclamation-triangle text-muted" aria-hidden="true"></i>
          </span>
        </div>
        <div class="draggable-synonym drag-handle keyboard-nav-list"
             th:each="meaning,meaningIter : ${synRelation.wordMeanings}"
             th:data-meaning-id="${meaning.meaningId}"
             th:data-relation-id="${synRelation.id}"
             th:data-id="${synRelation.id}"
             th:data-navigate-index="${meaningCount.increment()}"
             th:data-navigate-selected="${markedSynMeaningId != null && markedSynMeaningId == meaning.meaningId}?'true'"
             th:data-active-panel="${markedSynMeaningId != null}?'true'"
             th:classappend="${markedSynMeaningId != null && markedSynMeaningId == meaning.meaningId ? 'navigate-marked' : ''}">
          <div data-toggle="tooltip" data-html="true" th:title="${viewUtil.getLexRegisterTooltipHtml(meaning.lexRegisterCodes)}">
            <span class="px-2 handle drag-handle border-right border-light text-muted" title="Lohista siit">
              <i class="fa fa-ellipsis-v text-muted" aria-hidden="true"></i>
            </span>
            <span class="small" th:text="#{syn.meaning.id}">TÃ¤henduse id:</span>
            <span class="small" th:text="${meaning.meaningId}"></span>
            <span class="pr-2 small" th:if="${not #lists.isEmpty(meaning.lexPosCodes)}">
              <span th:each="posCode : ${meaning.lexPosCodes}">
                <span class="font-italic" th:text="${posCode}"></span>
              </span>
            </span>
          </div>
          <div class="d-flex flex-row" data-toggle="tooltip" th:title="#{syn.definition}" th:each="definition : ${meaning.definitions}">
            <span class="small" th:utext="${definition}"></span>
          </div>
          <div class="d-flex flex-row" data-toggle="tooltip" th:title="#{syn.usage}" th:each="usage : ${meaning.usages}">
            <span class="small text-info" th:utext="${usage}"></span>
          </div>
        </div>
      </li>
    </ul>
    <p th:unless="${not #lists.isEmpty(details.wordRelationDetails.wordSynRelations)}"
       class="text-secondary font-italic p-3"
       th:text="#{fullsyn.no.word.syn.relations}">Vastete kandidaadid puuduvad valitud keeltes</p>
  </div>
  <div th:fragment="full_syn_data"
       th:if="${not #lists.isEmpty(lexeme.synonymLangGroups)}"
       class="orderable border-top">
    <div class="orderable d-flex flex-row" th:each="synonymLangGroup : ${lexeme.synonymLangGroups}" >
      <span th:if="${lexeme.wordLang == synonymLangGroup.lang}" class="mr-2" th:text="#{syn.abbreviation}"></span>
      <span th:unless="${lexeme.wordLang == synonymLangGroup.lang}" th:text="${viewUtil.getLangIso2(synonymLangGroup.lang)}" class="mr-2"></span>
      <div data-plugin="sorter" data-sorter:type="syn" data-sorter:handle=".syn-handle">
        <span th:each="syn,synIter : ${synonymLangGroup.synonyms}"
              class="hidden-buttons draggable-syn-rel droppable-syn-rel do-refresh"
              th:data-lexeme-id="${lexeme.lexemeId}"
              th:data-orderby="${syn.orderBy}"
              th:data-relation-id="${syn.relationId}"
              th:data-syn-type="${syn.type}"
              th:with="
                isMeaningWordSyn=${syn.type == T(eki.common.constant.SynonymType).MEANING_WORD},
                isMeaningRelSyn=${syn.type == T(eki.common.constant.SynonymType).MEANING_REL}">
          <span class="hidden-buttons">
            <th:block th:each="synWord, synWordIter : ${syn.words}">
              <input type="hidden" class="relation-meaning-id" th:value="${syn.meaningId}"/>
              <input type="hidden" name="synword-lexeme-id" th:value="${synWord.lexemeId}"/>
              <span class="syn-handle">
                <small class="font-weight-bold" th:text="${synWord.lexemeLevels}" th:if="${not #strings.isEmpty(synWord.lexemeLevels)}"></small>
                <span th:utext="${viewUtil.getWordValueMarkup(synWord)}" th:styleappend="${isMeaningRelSyn ? 'color: #00874F' : 'color: #005aa9'}"></span>
                <sup th:if="${synWord.homonymsExist}" th:text="${synWord.homonymNr}"></sup>
                <small th:each="registerCode,regIter : ${synWord.lexemeRegisterCodes}" th:text="${registerCode + (regIter.last ? '' : ', ')}"></small>
                <small th:if="${synWordIter.last}" th:text="${'[' + viewUtil.getFormattedWeight(syn.weight) + ']'}"></small>
              </span>
              <span th:unless="${synWordIter.last}">,</span>
            </th:block>
            <span th:unless="${synIter.last}">|</span>
          </span>
        </span>
      </div>
    </div>
  </div>
</body>
</html>